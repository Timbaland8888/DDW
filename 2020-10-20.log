17:10:20.708199 exception   25         input_key = input("请输入查询的商品：")
Exception:..... EOFError: EOF when reading a line
Call ended by exception
Elapsed time: 01:03:37.078647
Source path:... D:\PycharmProjects\DDW\app\get_key_html.py
Starting var:.. self = <app.get_key_html.DdwBooks object at 0x000001BB6EAB6B08>
Starting var:.. args = ()
Starting var:.. kwargs = {}
17:41:25.398612 call        24     def get_ddw_key(self,*args,**kwargs):
17:41:25.404606 line        25         input_key = input("请输入查询的商品：")
New var:....... input_key = '9787533255879'
17:41:40.168156 line        30         url = f"{self.web_href}/?key={input_key.strip()}&act=input"
New var:....... url = 'http://search.dangdang.com/?key=9787533255879&act=input'
17:41:40.171156 line        32             'User-Agent': UserAgent().random
New var:....... headers = {'User-Agent': 'Mozilla/5.0 (Windows NT 6.1) App...L, like Gecko) Chrome/41.0.2228.0 Safari/537.36'}
17:41:40.176164 line        34         page = requests.get(url=url, headers=headers)
New var:....... page = <Response [200]>
17:41:40.840802 line        36         tree = html.fromstring(page.text)
New var:....... tree = <Element html at 0x1bb6f647d18>
17:41:40.903732 line        39         go_sort = ''.join(tree.xpath('//*[@id="go_sort"]/div/div[@class="bottom"]/ul//*[@dd_name="当当自营"]//@href'))
New var:....... go_sort = '/?key=9787533255879&act=input&filter=0%7C0%7C0%...C0%7C1%7C0%7C0%7C0%7C0%7C0%7C0%7C0%7C0%7C0#J_tab'
17:41:40.909743 line        40         go_sort_href = self.web_href + go_sort
New var:....... go_sort_href = 'http://search.dangdang.com/?key=9787533255879&a...C0%7C1%7C0%7C0%7C0%7C0%7C0%7C0%7C0%7C0%7C0#J_tab'
17:41:40.911742 line        41         print(f'自营链接地址：{go_sort_href}')
17:41:40.913741 line        44         if go_sort:
17:41:40.914741 line        45             go_page = requests.get(url=go_sort_href, headers=headers)
New var:....... go_page = <Response [200]>
17:41:41.142597 line        46             go_tree = html.fromstring(go_page.text)
New var:....... go_tree = <Element html at 0x1bb6f647db8>
17:41:41.165587 line        47             bigimge_li_list = go_tree.xpath('//*[@id="search_nature_rg"]/ul/li')
New var:....... bigimge_li_list = [<Element li at 0x1bb6f6af688>, <Element li at 0x1bb6f618ea8>]
17:41:41.171578 line        50             for n,li in enumerate(bigimge_li_list):
New var:....... n = 0
New var:....... li = <Element li at 0x1bb6f6af688>
17:41:41.173592 line        52                 href = ''.join(li.xpath('./p[@class="name"]/a/@href'))
New var:....... href = 'http://product.dangdang.com/25225871.html'
17:41:41.176591 line        54                 printDarkBlue(f'{input_key}书本详情链接=====》：{href}\n',FOREGROUND_GREEN)
17:41:41.178574 line        57                 if len(li.xpath('./a/img/@data-original')) > 0:
17:41:41.179591 line        60                     src_imag = ''.join(li.xpath('./a/img/@src'))
New var:....... src_imag = 'http://img3m1.ddimg.cn/77/11/25225871-1_b_3.jpg'
17:41:41.181591 line        61                     print('封面图片====》’：', src_imag)
17:41:41.183574 line        66                     """
New var:....... book_inof_sql = " replace into book_info(id,src_imag,go_sort_hre....com/25225871.html',now())\n                    "
17:41:41.184574 line        68                 self.sql_cursor.query(book_inof_sql)
17:41:41.194565 line        70                 print('获取详情地址完成！！')
17:41:41.195567 line        50             for n,li in enumerate(bigimge_li_list):
Modified var:.. n = 1
Modified var:.. li = <Element li at 0x1bb6f618ea8>
17:41:41.196566 line        52                 href = ''.join(li.xpath('./p[@class="name"]/a/@href'))
Modified var:.. href = 'http://product.dangdang.com/20246031.html'
17:41:41.199565 line        54                 printDarkBlue(f'{input_key}书本详情链接=====》：{href}\n',FOREGROUND_GREEN)
17:41:41.201564 line        57                 if len(li.xpath('./a/img/@data-original')) > 0:
17:41:41.202563 line        58                     src_imag = ''.join(li.xpath('./a/img/@data-original'))
Modified var:.. src_imag = 'http://img3m1.ddimg.cn/36/1/20246031-1_b_5.jpg'
17:41:41.203563 line        66                     """
Modified var:.. book_inof_sql = " replace into book_info(id,src_imag,go_sort_hre....com/20246031.html',now())\n                    "
17:41:41.205561 line        68                 self.sql_cursor.query(book_inof_sql)
17:41:41.212568 line        70                 print('获取详情地址完成！！')
17:41:41.213570 line        50             for n,li in enumerate(bigimge_li_list):
17:41:41.214569 return      50             for n,li in enumerate(bigimge_li_list):
Return value:.. None
Elapsed time: 00:00:15.820941
Source path:... D:\PycharmProjects\DDW\app\get_detail_html.py
Starting var:.. sefl = <app.get_detail_html.DdwBooksDetail object at 0x000001BB6F617AC8>
Starting var:.. args = ()
Starting var:.. kwargs = {}
17:41:41.220551 call        25     def get_field(sefl,*args,**kwargs):
17:41:41.225563 line        28         href_sql = """ select id,href,src_imag from book_info"""
New var:....... href_sql = ' select id,href,src_imag from book_info'
17:41:41.226562 line        29         hrefs = sefl.sql_cursor.query(href_sql)
New var:....... hrefs = (('738e093512b511eb805b507b9d245e55', 'http://pr...http://img3m4.ddimg.cn/93/2/23364984-1_b_4.jpg'))
17:41:41.234543 line        30         print(hrefs)
17:41:41.240575 line        31         for link in hrefs:
New var:....... link = ('738e093512b511eb805b507b9d245e55', 'http://pro...http://img3m2.ddimg.cn/75/17/25078062-1_b_6.jpg')
17:41:41.241539 line        33             print('')
17:41:41.243537 line        34             printDarkBlue(f"开始读取详情数据，加载缓存。。。。。\n",FOREGROUND_BLUE)
17:41:41.244537 line        35             url = f'{link[1]}'
New var:....... url = 'http://product.dangdang.com/25078062.html'
17:41:41.245536 line        36             try:
17:41:41.247535 line        38                 chrome_opts = webdriver.ChromeOptions()
New var:....... chrome_opts = <selenium.webdriver.chrome.options.Options object at 0x000001BB6F617F08>
17:41:41.248534 line        39                 chrome_opts.add_argument("--headless")
17:41:41.250533 line        41                 browser = webdriver.Chrome(options=chrome_opts)
New var:....... browser = <selenium.webdriver.chrome.webdriver.WebDriver (session="d96337ce2f3f39f8a7eb2342a4e58c1f")>
17:41:45.081360 line        43                 browser.get(url)
17:41:50.486891 line        44                 out_html = browser.page_source
New var:....... out_html = '<html><head><script async="" src="http://nt-dow...amp;random_id=0.3488734845967685"></body></html>'
17:41:50.533861 line        46                 tree = html.fromstring(out_html)
New var:....... tree = <Element html at 0x1bb6ec6eef8>
17:41:50.546854 line        51                 product_title_xpath = tree.xpath('//*[@id="product_info"]/div/h1/text()')
New var:....... product_title_xpath = ['\n                    ', '\n                                        国际大奖小说·注音版--云朵工厂    ']
17:41:50.551848 line        52                 product_title = ''.join(product_title_xpath).strip()
New var:....... product_title = '国际大奖小说·注音版--云朵工厂'
17:41:50.554847 line        53                 print('书本名称：',product_title)
17:41:50.558861 line        59                 product_author_xpath = tree.xpath('//*[@id="product_info"]/div/span[@dd_name="作者"]/a//text()')
New var:....... product_author_xpath = ['霍尔迪·塞拉·依·法布拉']
17:41:50.562857 line        61                 if product_author_xpath:
17:41:50.566840 line        62                         product_author = ' '.join(product_author_xpath)
New var:....... product_author = '霍尔迪·塞拉·依·法布拉'
17:41:50.568854 line        63                         print('作者：',product_author)
17:41:50.572837 line        68                 publishing_company_name_xpath = tree.xpath('//*[@id="product_info"]/div/span[@dd_name="出版社"]/a//text()')
New var:....... publishing_company_name_xpath = ['新蕾出版社']
17:41:50.576836 line        69                 if publishing_company_name_xpath:
17:41:50.580833 line        70                     publishing_company_name = ''.join(publishing_company_name_xpath)
New var:....... publishing_company_name = '新蕾出版社'
17:41:50.583831 line        71                     print('出版社：',publishing_company_name)
17:41:50.586831 line        76                 publish_date_xpath = tree.xpath('//*[@id="product_info"]/div/span//text()')
New var:....... publish_date_xpath = ['作者:(西)', '霍尔迪·塞拉·依·法布拉', '出版社:', '新蕾出版社', '出版时间:2014年12月\xa0']
17:41:50.591828 line        78                 if publish_date_xpath:
17:41:50.595840 line        79                     for pub_list in publish_date_xpath:
New var:....... pub_list = '作者:(西)'
17:41:50.597827 line        80                         if "出版时间" in pub_list:
17:41:50.601846 line        79                     for pub_list in publish_date_xpath:
Modified var:.. pub_list = '霍尔迪·塞拉·依·法布拉'
17:41:50.604819 line        80                         if "出版时间" in pub_list:
17:41:50.607831 line        79                     for pub_list in publish_date_xpath:
Modified var:.. pub_list = '出版社:'
17:41:50.609830 line        80                         if "出版时间" in pub_list:
17:41:50.613829 line        79                     for pub_list in publish_date_xpath:
Modified var:.. pub_list = '新蕾出版社'
17:41:50.616827 line        80                         if "出版时间" in pub_list:
17:41:50.620809 line        79                     for pub_list in publish_date_xpath:
Modified var:.. pub_list = '出版时间:2014年12月\xa0'
17:41:50.622823 line        80                         if "出版时间" in pub_list:
17:41:50.626808 line        81                             publish_date = pub_list.split('出版时间:')[-1].split('\xa0')[0]
New var:....... publish_date = '2014年12月'
17:41:50.628805 line        82                             print('出版时间:',publish_date)
17:41:50.632804 line        79                     for pub_list in publish_date_xpath:
17:41:50.635801 line        87                 price_xpath = tree.xpath('//*[@id="pc-price"]/div/div/p/text()')
New var:....... price_xpath = ['\n                    ', '\n                    ', '\n                ', '20.00']
17:41:50.640799 line        88                 if price_xpath:
17:41:50.643797 line        89                     price = price_xpath[-1]
New var:....... price = '20.00'
17:41:50.646794 line        90                     print('价格：',price)
17:41:50.649795 line        95                 isbn_no_xpath = tree.xpath('//*[@id="detail_all"]/div/ul/li/text()')
New var:....... isbn_no_xpath = ['开 本：16开', '纸 张：胶版纸', '包 装：平装-胶订', '是否套装：否', '国际标准书号ISBN：9787530761304']
17:41:50.654804 line        96                 if isbn_no_xpath:
17:41:50.657791 line        97                     for isbn_no_li in isbn_no_xpath:
New var:....... isbn_no_li = '开 本：16开'
17:41:50.660789 line        98                         if "ISBN" in isbn_no_li:
17:41:50.663787 line        97                     for isbn_no_li in isbn_no_xpath:
Modified var:.. isbn_no_li = '纸 张：胶版纸'
17:41:50.666783 line        98                         if "ISBN" in isbn_no_li:
17:41:50.670795 line        97                     for isbn_no_li in isbn_no_xpath:
Modified var:.. isbn_no_li = '包 装：平装-胶订'
17:41:50.673781 line        98                         if "ISBN" in isbn_no_li:
17:41:50.676792 line        97                     for isbn_no_li in isbn_no_xpath:
Modified var:.. isbn_no_li = '是否套装：否'
17:41:50.679779 line        98                         if "ISBN" in isbn_no_li:
17:41:50.683783 line        97                     for isbn_no_li in isbn_no_xpath:
Modified var:.. isbn_no_li = '国际标准书号ISBN：9787530761304'
17:41:50.686772 line        98                         if "ISBN" in isbn_no_li:
17:41:50.689770 line        99                             isbn_new_no = isbn_no_li.split('国际标准书号ISBN：')[-1]
New var:....... isbn_new_no = '9787530761304'
17:41:50.692768 line       100                             print('ISBN号:',isbn_new_no)
17:41:50.695771 line        97                     for isbn_no_li in isbn_no_xpath:
17:41:50.698767 line       106                 introduce_str = ''.join(tree.xpath('//*[@id="detail"]/div[@id="content"]/div[@class="descrip"]//text()'))
New var:....... introduce_str = '你见过彩色的云朵吗？你知道这世界上有云朵工厂吗？在遥远的帕佩鲁姆市，云朵可不是什么大自然的产物...一朵朵彩色的云袅袅升起的时候，他们会愤怒抗议还是会欣喜若狂？不管怎样，云朵工厂引起了全城的轰动。'
17:41:50.703787 line       108                 pre = re.compile('>(.*)<')
New var:....... pre = re.compile('>(.*)<')
17:41:50.707760 line       109                 retouve_str = ''.join(pre.findall(introduce_str))
New var:....... retouve_str = ''
17:41:50.711758 line       111                 if retouve_str:
17:41:50.714756 line       114                     content_introduce = introduce_str.strip()
New var:....... content_introduce = '你见过彩色的云朵吗？你知道这世界上有云朵工厂吗？在遥远的帕佩鲁姆市，云朵可不是什么大自然的产物...一朵朵彩色的云袅袅升起的时候，他们会愤怒抗议还是会欣喜若狂？不管怎样，云朵工厂引起了全城的轰动。'
17:41:50.718756 line       115                 print('内容简介:', content_introduce)
17:41:50.721752 line       121                 author_introduce_str = ''.join(
17:41:50.724750 line       122                     tree.xpath('//*[@id="detail"]/div[@id="authorIntroduction"]/div[@class="descrip"]//text()'))
New var:....... author_introduce_str = '霍尔迪·塞拉·依·法布拉\n1947年7月26日出生于西班牙巴塞罗那，1959年创作出首部长篇...，并多次获得西班牙“领路人”儿童文学奖、天主教儿童文学奖，几乎囊括了西班牙所有的青少年文学奖项。'
17:41:50.729748 line       124                 retouve_str = ''.join(pre.findall(author_introduce_str))
17:41:50.733747 line       125                 if retouve_str:
17:41:50.736762 line       128                     author_introduce = author_introduce_str.strip()
New var:....... author_introduce = '霍尔迪·塞拉·依·法布拉\n1947年7月26日出生于西班牙巴塞罗那，1959年创作出首部长篇...，并多次获得西班牙“领路人”儿童文学奖、天主教儿童文学奖，几乎囊括了西班牙所有的青少年文学奖项。'
17:41:50.739757 line       129                 print('书名作者简介:', author_introduce)
17:41:50.742756 line       134                 abstract_info_span = tree.xpath('//*[@id="detail"]/div[@id="abstract"]/div[@class="descrip"]//text()')
New var:....... abstract_info_span = ['★西班牙安徒生奖', '\n', '★西班牙年度畅销作品', '\n', '★西班牙CCEI..., '★再版36次', '\n', '★版权输出至巴西、美国、墨西哥等多个国家', '\xa0']
17:41:50.747752 line       135                 abstract_info = ''.join(abstract_info_span).strip()
New var:....... abstract_info = '★西班牙安徒生奖\n★西班牙年度畅销作品\n★西班牙CCEI儿童文学奖\n★再版36次\n★版权输出至巴西、美国、墨西哥等多个国家'
17:41:50.751735 line       136                 print('编辑推荐：',abstract_info)
17:41:50.755732 line       138                 abstract_info_pic = ''.join(tree.xpath('//*[@id="detail"]/div[@id="abstract"]/div[@class="descrip"]//*/@src'))
New var:....... abstract_info_pic = ''
17:41:50.759744 line       139                 print('编辑推荐长图：', abstract_info_pic)
17:41:50.763729 line       144                 feature_pic = ''.join(tree.xpath('//*[@id="detail"]/div[@id="feature"]/div[@class="descrip"]//*/@src'))
New var:....... feature_pic = ''
17:41:50.769724 line       145                 if not feature_pic:
17:41:50.774726 line       146                     feature_pic = ''.join(
17:41:50.777723 line       147                         tree.xpath('//*[@id="detail"]/div[@id="feature"]/div[@class="descrip"]//*/@data-original'))
17:41:50.782732 line       148                 print('产品特色长图：', feature_pic)
17:41:50.786717 line       153                 attachImage = ''.join(tree.xpath('//*[@id="detail"]/div[@id="attachImage"]/div[@class="descrip"]//*/img/@data-original'))
New var:....... attachImage = 'http://img57.ddimg.cn/99999990001435537.jpg'
17:41:50.792715 line       154                 if not attachImage:
17:41:50.799708 line       158                 print('书摘插画：', attachImage)
17:41:50.805707 line       167                 """
New var:....... tbook_sql = " REPLACE INTO `t_book` \n                      ..._b_6.jpg',now())\n            \n                "
17:41:50.809703 line       169                 sefl.sql_cursor.query(tbook_sql)
17:41:50.822694 line        31         for link in hrefs:
Modified var:.. link = ('7391493512b511eb805b507b9d245e55', 'http://pro...http://img3m6.ddimg.cn/56/16/23614526-1_b_1.jpg')
17:41:50.827691 line        33             print('')
17:41:50.832689 line        34             printDarkBlue(f"开始读取详情数据，加载缓存。。。。。\n",FOREGROUND_BLUE)
17:41:50.842684 line        35             url = f'{link[1]}'
Modified var:.. url = 'http://product.dangdang.com/23614526.html'
17:41:50.849680 line        36             try:
17:41:50.855676 line        38                 chrome_opts = webdriver.ChromeOptions()
Modified var:.. chrome_opts = <selenium.webdriver.chrome.options.Options object at 0x000001BB6F6B1808>
17:41:50.859675 line        39                 chrome_opts.add_argument("--headless")
17:41:50.865673 line        41                 browser = webdriver.Chrome(options=chrome_opts)
Modified var:.. browser = <selenium.webdriver.chrome.webdriver.WebDriver (session="e8a11916c7bc08b463b3c7d197ce476a")>
17:41:54.610526 line        43                 browser.get(url)
17:42:00.806980 line        44                 out_html = browser.page_source
Modified var:.. out_html = '<html><head><script async="" src="http://nt-dow...&amp;random_id=0.342765755021222"></body></html>'
17:42:02.887787 line        46                 tree = html.fromstring(out_html)
Modified var:.. tree = <Element html at 0x1bb6f6a7138>
17:42:02.905776 line        51                 product_title_xpath = tree.xpath('//*[@id="product_info"]/div/h1/text()')
Modified var:.. product_title_xpath = ['\n                    ', '\n                                        国际大奖小说注音版 云朵工厂    ']
17:42:02.913774 line        52                 product_title = ''.join(product_title_xpath).strip()
Modified var:.. product_title = '国际大奖小说注音版 云朵工厂'
17:42:02.918771 line        53                 print('书本名称：',product_title)
17:42:02.922766 line        59                 product_author_xpath = tree.xpath('//*[@id="product_info"]/div/span[@dd_name="作者"]/a//text()')
17:42:02.929778 line        61                 if product_author_xpath:
17:42:02.932760 line        62                         product_author = ' '.join(product_author_xpath)
17:42:02.936759 line        63                         print('作者：',product_author)
17:42:02.940758 line        68                 publishing_company_name_xpath = tree.xpath('//*[@id="product_info"]/div/span[@dd_name="出版社"]/a//text()')
17:42:02.947751 line        69                 if publishing_company_name_xpath:
17:42:02.951752 line        70                     publishing_company_name = ''.join(publishing_company_name_xpath)
17:42:02.954762 line        71                     print('出版社：',publishing_company_name)
17:42:02.958752 line        76                 publish_date_xpath = tree.xpath('//*[@id="product_info"]/div/span//text()')
Modified var:.. publish_date_xpath = ['作者:[西] ', '霍尔迪·塞拉·依·法布拉', '出版社:', '新蕾出版社', '出版时间:2014年09月\xa0']
17:42:02.965755 line        78                 if publish_date_xpath:
17:42:02.969754 line        79                     for pub_list in publish_date_xpath:
Modified var:.. pub_list = '作者:[西] '
17:42:02.972752 line        80                         if "出版时间" in pub_list:
17:42:02.976751 line        79                     for pub_list in publish_date_xpath:
Modified var:.. pub_list = '霍尔迪·塞拉·依·法布拉'
17:42:02.980750 line        80                         if "出版时间" in pub_list:
17:42:02.984731 line        79                     for pub_list in publish_date_xpath:
Modified var:.. pub_list = '出版社:'
17:42:02.988744 line        80                         if "出版时间" in pub_list:
17:42:02.992729 line        79                     for pub_list in publish_date_xpath:
Modified var:.. pub_list = '新蕾出版社'
17:42:02.996726 line        80                         if "出版时间" in pub_list:
17:42:03.000726 line        79                     for pub_list in publish_date_xpath:
Modified var:.. pub_list = '出版时间:2014年09月\xa0'
17:42:03.003735 line        80                         if "出版时间" in pub_list:
17:42:03.007717 line        81                             publish_date = pub_list.split('出版时间:')[-1].split('\xa0')[0]
Modified var:.. publish_date = '2014年09月'
17:42:03.011718 line        82                             print('出版时间:',publish_date)
17:42:03.015728 line        79                     for pub_list in publish_date_xpath:
17:42:03.019714 line        87                 price_xpath = tree.xpath('//*[@id="pc-price"]/div/div/p/text()')
Modified var:.. price_xpath = ['\n                    ', '\n                    ', '\n                ', '11.70']
17:42:03.025721 line        88                 if price_xpath:
17:42:03.029710 line        89                     price = price_xpath[-1]
Modified var:.. price = '11.70'
17:42:03.033718 line        90                     print('价格：',price)
17:42:03.037716 line        95                 isbn_no_xpath = tree.xpath('//*[@id="detail_all"]/div/ul/li/text()')
Modified var:.. isbn_no_xpath = ['开 本：32开', '纸 张：胶版纸', '包 装：平装', '是否套装：否', '国际标准书号ISBN：9787530761304']
17:42:03.043711 line        96                 if isbn_no_xpath:
17:42:03.047709 line        97                     for isbn_no_li in isbn_no_xpath:
Modified var:.. isbn_no_li = '开 本：32开'
17:42:03.051694 line        98                         if "ISBN" in isbn_no_li:
17:42:03.055705 line        97                     for isbn_no_li in isbn_no_xpath:
Modified var:.. isbn_no_li = '纸 张：胶版纸'
17:42:03.058703 line        98                         if "ISBN" in isbn_no_li:
17:42:03.063685 line        97                     for isbn_no_li in isbn_no_xpath:
Modified var:.. isbn_no_li = '包 装：平装'
17:42:03.067685 line        98                         if "ISBN" in isbn_no_li:
17:42:03.071696 line        97                     for isbn_no_li in isbn_no_xpath:
Modified var:.. isbn_no_li = '是否套装：否'
17:42:03.074694 line        98                         if "ISBN" in isbn_no_li:
17:42:03.078678 line        97                     for isbn_no_li in isbn_no_xpath:
Modified var:.. isbn_no_li = '国际标准书号ISBN：9787530761304'
17:42:03.081690 line        98                         if "ISBN" in isbn_no_li:
17:42:03.086673 line        99                             isbn_new_no = isbn_no_li.split('国际标准书号ISBN：')[-1]
17:42:03.089684 line       100                             print('ISBN号:',isbn_new_no)
17:42:03.093684 line        97                     for isbn_no_li in isbn_no_xpath:
17:42:03.096681 line       106                 introduce_str = ''.join(tree.xpath('//*[@id="detail"]/div[@id="content"]/div[@class="descrip"]//text()'))
Modified var:.. introduce_str = '你见过彩色的云朵吗？\n你知道这世界上有云朵工厂吗？\n在遥远的帕佩鲁姆市，云朵可不是什么大自...一朵朵彩色的云袅袅升起的时候，他们会愤怒抗议还是会欣喜若狂？不管怎样，云朵工厂引起了全城的轰动。'
17:42:03.102663 line       108                 pre = re.compile('>(.*)<')
17:42:03.106661 line       109                 retouve_str = ''.join(pre.findall(introduce_str))
17:42:03.110674 line       111                 if retouve_str:
17:42:03.113672 line       114                     content_introduce = introduce_str.strip()
Modified var:.. content_introduce = '你见过彩色的云朵吗？\n你知道这世界上有云朵工厂吗？\n在遥远的帕佩鲁姆市，云朵可不是什么大自...一朵朵彩色的云袅袅升起的时候，他们会愤怒抗议还是会欣喜若狂？不管怎样，云朵工厂引起了全城的轰动。'
17:42:03.117670 line       115                 print('内容简介:', content_introduce)
17:42:03.121667 line       121                 author_introduce_str = ''.join(
17:42:03.124666 line       122                     tree.xpath('//*[@id="detail"]/div[@id="authorIntroduction"]/div[@class="descrip"]//text()'))
Modified var:.. author_introduce_str = '\xa0\xa0\xa0 霍尔迪·塞拉·依·法布拉1947年7月26日出生于西班牙巴塞罗那，1...，并多次获得西班牙“领路人”儿童文学奖、天主教儿童文学奖，几乎囊括了西班牙所有的青少年文学奖项。'
17:42:03.131649 line       124                 retouve_str = ''.join(pre.findall(author_introduce_str))
17:42:03.136646 line       125                 if retouve_str:
17:42:03.139645 line       128                     author_introduce = author_introduce_str.strip()
Modified var:.. author_introduce = '霍尔迪·塞拉·依·法布拉1947年7月26日出生于西班牙巴塞罗那，1959年创作出第一部长篇小...，并多次获得西班牙“领路人”儿童文学奖、天主教儿童文学奖，几乎囊括了西班牙所有的青少年文学奖项。'
17:42:03.142656 line       129                 print('书名作者简介:', author_introduce)
17:42:03.147641 line       134                 abstract_info_span = tree.xpath('//*[@id="detail"]/div[@id="abstract"]/div[@class="descrip"]//text()')
Modified var:.. abstract_info_span = ['★西班牙安徒生奖', '\n', '★西班牙年度**畅销作品', '\n', '★西班牙CC..., '★再版36次', '\n', '★版权输出至巴西、美国、墨西哥等多个国家', '\xa0']
17:42:03.156649 line       135                 abstract_info = ''.join(abstract_info_span).strip()
Modified var:.. abstract_info = '★西班牙安徒生奖\n★西班牙年度**畅销作品\n★西班牙CCEI儿童文学奖\n★再版36次\n★版权输出至巴西、美国、墨西哥等多个国家'
17:42:03.160632 line       136                 print('编辑推荐：',abstract_info)
17:42:03.164630 line       138                 abstract_info_pic = ''.join(tree.xpath('//*[@id="detail"]/div[@id="abstract"]/div[@class="descrip"]//*/@src'))
17:42:03.171629 line       139                 print('编辑推荐长图：', abstract_info_pic)
17:42:03.175623 line       144                 feature_pic = ''.join(tree.xpath('//*[@id="detail"]/div[@id="feature"]/div[@class="descrip"]//*/@src'))
17:42:03.182633 line       145                 if not feature_pic:
17:42:03.187615 line       146                     feature_pic = ''.join(
17:42:03.191613 line       147                         tree.xpath('//*[@id="detail"]/div[@id="feature"]/div[@class="descrip"]//*/@data-original'))
17:42:03.200608 line       148                 print('产品特色长图：', feature_pic)
17:42:03.203606 line       153                 attachImage = ''.join(tree.xpath('//*[@id="detail"]/div[@id="attachImage"]/div[@class="descrip"]//*/img/@data-original'))
Modified var:.. attachImage = 'http://img38.ddimg.cn/imgother/201412/09_0/20141209102942178.jpg'
17:42:03.212600 line       154                 if not attachImage:
17:42:03.219599 line       158                 print('书摘插画：', attachImage)
17:42:03.223595 line       167                 """
Modified var:.. tbook_sql = " REPLACE INTO `t_book` \n                      ..._b_1.jpg',now())\n            \n                "
17:42:03.230590 line       169                 sefl.sql_cursor.query(tbook_sql)
17:42:03.249580 line        31         for link in hrefs:
Modified var:.. link = ('750b55aa12b811eb805b507b9d245e55', 'http://pro...http://img3m1.ddimg.cn/77/11/25225871-1_b_3.jpg')
17:42:03.254579 line        33             print('')
17:42:03.259576 line        34             printDarkBlue(f"开始读取详情数据，加载缓存。。。。。\n",FOREGROUND_BLUE)
17:42:03.263572 line        35             url = f'{link[1]}'
Modified var:.. url = 'http://product.dangdang.com/25225871.html'
17:42:03.267569 line        36             try:
17:42:03.276564 line        38                 chrome_opts = webdriver.ChromeOptions()
Modified var:.. chrome_opts = <selenium.webdriver.chrome.options.Options object at 0x000001BB6F64E548>
17:42:03.284559 line        39                 chrome_opts.add_argument("--headless")
17:42:03.290556 line        41                 browser = webdriver.Chrome(options=chrome_opts)
Modified var:.. browser = <selenium.webdriver.chrome.webdriver.WebDriver (session="dc0710bfa4c49bc84149a58834a82f86")>
17:42:07.150348 line        43                 browser.get(url)
17:42:22.759415 line        44                 out_html = browser.page_source
Modified var:.. out_html = '<html><head><script async="" src="http://nt-dow...amp;random_id=0.3163838502851397"></body></html>'
17:42:22.818375 line        46                 tree = html.fromstring(out_html)
Modified var:.. tree = <Element html at 0x1bb6f6a5d68>
17:42:22.839363 line        51                 product_title_xpath = tree.xpath('//*[@id="product_info"]/div/h1/text()')
Modified var:.. product_title_xpath = ['\n                    ', '\n                                        信谊绘本：3-6岁中国传统文化绘本·团圆    ']
17:42:22.845376 line        52                 product_title = ''.join(product_title_xpath).strip()
Modified var:.. product_title = '信谊绘本：3-6岁中国传统文化绘本·团圆'
17:42:22.849373 line        53                 print('书本名称：',product_title)
17:42:22.852357 line        59                 product_author_xpath = tree.xpath('//*[@id="product_info"]/div/span[@dd_name="作者"]/a//text()')
Modified var:.. product_author_xpath = ['余丽琼', '朱成梁']
17:42:22.857367 line        61                 if product_author_xpath:
17:42:22.861367 line        62                         product_author = ' '.join(product_author_xpath)
Modified var:.. product_author = '余丽琼 朱成梁'
17:42:22.863364 line        63                         print('作者：',product_author)
17:42:22.867347 line        68                 publishing_company_name_xpath = tree.xpath('//*[@id="product_info"]/div/span[@dd_name="出版社"]/a//text()')
Modified var:.. publishing_company_name_xpath = ['明天出版社']
17:42:22.871345 line        69                 if publishing_company_name_xpath:
17:42:22.875342 line        70                     publishing_company_name = ''.join(publishing_company_name_xpath)
Modified var:.. publishing_company_name = '明天出版社'
17:42:22.878357 line        71                     print('出版社：',publishing_company_name)
17:42:22.881339 line        76                 publish_date_xpath = tree.xpath('//*[@id="product_info"]/div/span//text()')
Modified var:.. publish_date_xpath = ['作者:作者:', '余丽琼', '\u3000文，', '朱成梁', '\u3000绘', '出版社:', '明天出版社', '出版时间:2008年04月\xa0']
17:42:22.886350 line        78                 if publish_date_xpath:
17:42:22.889336 line        79                     for pub_list in publish_date_xpath:
Modified var:.. pub_list = '作者:作者:'
17:42:22.892347 line        80                         if "出版时间" in pub_list:
17:42:22.897332 line        79                     for pub_list in publish_date_xpath:
Modified var:.. pub_list = '余丽琼'
17:42:22.899343 line        80                         if "出版时间" in pub_list:
17:42:22.902327 line        79                     for pub_list in publish_date_xpath:
Modified var:.. pub_list = '\u3000文，'
17:42:22.905325 line        80                         if "出版时间" in pub_list:
17:42:22.909325 line        79                     for pub_list in publish_date_xpath:
Modified var:.. pub_list = '朱成梁'
17:42:22.912321 line        80                         if "出版时间" in pub_list:
17:42:22.915319 line        79                     for pub_list in publish_date_xpath:
Modified var:.. pub_list = '\u3000绘'
17:42:22.918334 line        80                         if "出版时间" in pub_list:
17:42:22.923316 line        79                     for pub_list in publish_date_xpath:
Modified var:.. pub_list = '出版社:'
17:42:22.928314 line        80                         if "出版时间" in pub_list:
17:42:22.932310 line        79                     for pub_list in publish_date_xpath:
Modified var:.. pub_list = '明天出版社'
17:42:22.936322 line        80                         if "出版时间" in pub_list:
17:42:22.941321 line        79                     for pub_list in publish_date_xpath:
Modified var:.. pub_list = '出版时间:2008年04月\xa0'
17:42:22.945304 line        80                         if "出版时间" in pub_list:
17:42:22.949300 line        81                             publish_date = pub_list.split('出版时间:')[-1].split('\xa0')[0]
Modified var:.. publish_date = '2008年04月'
17:42:22.953301 line        82                             print('出版时间:',publish_date)
17:42:22.959294 line        79                     for pub_list in publish_date_xpath:
17:42:22.964292 line        87                 price_xpath = tree.xpath('//*[@id="pc-price"]/div/div/p/text()')
Modified var:.. price_xpath = ['\n                    ', '\n                    ', '\n                ', '39.80']
17:42:22.971287 line        88                 if price_xpath:
17:42:22.975285 line        89                     price = price_xpath[-1]
Modified var:.. price = '39.80'
17:42:22.979285 line        90                     print('价格：',price)
17:42:22.983282 line        95                 isbn_no_xpath = tree.xpath('//*[@id="detail_all"]/div/ul/li/text()')
Modified var:.. isbn_no_xpath = ['开 本：16开', '纸 张：铜版纸', '包 装：精装', '是否套装：否', '国际标准书号ISBN：9787533255879']
17:42:22.989277 line        96                 if isbn_no_xpath:
17:42:22.993275 line        97                     for isbn_no_li in isbn_no_xpath:
Modified var:.. isbn_no_li = '开 本：16开'
17:42:22.997273 line        98                         if "ISBN" in isbn_no_li:
17:42:23.001271 line        97                     for isbn_no_li in isbn_no_xpath:
Modified var:.. isbn_no_li = '纸 张：铜版纸'
17:42:23.004269 line        98                         if "ISBN" in isbn_no_li:
17:42:23.008267 line        97                     for isbn_no_li in isbn_no_xpath:
Modified var:.. isbn_no_li = '包 装：精装'
17:42:23.011265 line        98                         if "ISBN" in isbn_no_li:
17:42:23.015263 line        97                     for isbn_no_li in isbn_no_xpath:
Modified var:.. isbn_no_li = '是否套装：否'
17:42:23.018263 line        98                         if "ISBN" in isbn_no_li:
17:42:23.022258 line        97                     for isbn_no_li in isbn_no_xpath:
Modified var:.. isbn_no_li = '国际标准书号ISBN：9787533255879'
17:42:23.025257 line        98                         if "ISBN" in isbn_no_li:
17:42:23.030254 line        99                             isbn_new_no = isbn_no_li.split('国际标准书号ISBN：')[-1]
Modified var:.. isbn_new_no = '9787533255879'
17:42:23.032254 line       100                             print('ISBN号:',isbn_new_no)
17:42:23.036250 line        97                     for isbn_no_li in isbn_no_xpath:
17:42:23.039249 line       106                 introduce_str = ''.join(tree.xpath('//*[@id="detail"]/div[@id="content"]/div[@class="descrip"]//text()'))
Modified var:.. introduce_str = '\xa0 《团圆》——分享爱的温暖和好运。\n毛毛的爸爸是一个建筑师，他每年只能回家一次。除夕...的好运硬币。短短的相聚、沉沉的离别，父亲把一个长长的守望留在了女儿心里！\n\xa0\n\xa0'
17:42:23.046246 line       108                 pre = re.compile('>(.*)<')
17:42:23.051242 line       109                 retouve_str = ''.join(pre.findall(introduce_str))
17:42:23.054240 line       111                 if retouve_str:
17:42:23.057239 line       114                     content_introduce = introduce_str.strip()
Modified var:.. content_introduce = '《团圆》——分享爱的温暖和好运。\n毛毛的爸爸是一个建筑师，他每年只能回家一次。除夕夜，爸爸把...a0\n这是一枚承载着爱的好运硬币。短短的相聚、沉沉的离别，父亲把一个长长的守望留在了女儿心里！'
17:42:23.060237 line       115                 print('内容简介:', content_introduce)
17:42:23.065237 line       121                 author_introduce_str = ''.join(
17:42:23.068233 line       122                     tree.xpath('//*[@id="detail"]/div[@id="authorIntroduction"]/div[@class="descrip"]//text()'))
Modified var:.. author_introduce_str = '文／余丽琼\xa0 \n1980年出生在安徽安庆。南京大学文学学士、戏剧艺术在读硕士，中国散文...。1994年，《争鹿》由台湾信谊基金出版社出版。2006年，出版第一本自编自绘的图画书《火焰》。'
17:42:23.072231 line       124                 retouve_str = ''.join(pre.findall(author_introduce_str))
17:42:23.076228 line       125                 if retouve_str:
17:42:23.079226 line       128                     author_introduce = author_introduce_str.strip()
Modified var:.. author_introduce = '文／余丽琼\xa0 \n1980年出生在安徽安庆。南京大学文学学士、戏剧艺术在读硕士，中国散文...。1994年，《争鹿》由台湾信谊基金出版社出版。2006年，出版第一本自编自绘的图画书《火焰》。'
17:42:23.082224 line       129                 print('书名作者简介:', author_introduce)
17:42:23.085224 line       134                 abstract_info_span = tree.xpath('//*[@id="detail"]/div[@id="abstract"]/div[@class="descrip"]//text()')
Modified var:.. abstract_info_span = ['\n', '本书入选教育部基础教育课程教材发展中心 中小学阅读指导目录（2020年版）', ...时报》年度*儿童图画书', '\n', '\xa0', '\n', '\xa0', '\xa0']
17:42:23.091219 line       135                 abstract_info = ''.join(abstract_info_span).strip()
Modified var:.. abstract_info = '本书入选教育部基础教育课程教材发展中心 中小学阅读指导目录（2020年版）\n一部将民族传统文...。\n\xa0\n【丰子恺儿童画书奖】*儿童图画书首奖\n2011年《纽约时报》年度*儿童图画书'
17:42:23.096216 line       136                 print('编辑推荐：',abstract_info)
17:42:23.100214 line       138                 abstract_info_pic = ''.join(tree.xpath('//*[@id="detail"]/div[@id="abstract"]/div[@class="descrip"]//*/@src'))
Modified var:.. abstract_info_pic = 'http://img54.ddimg.cn/99999990147084224.jpg'
17:42:23.104211 line       139                 print('编辑推荐长图：', abstract_info_pic)
17:42:23.108210 line       144                 feature_pic = ''.join(tree.xpath('//*[@id="detail"]/div[@id="feature"]/div[@class="descrip"]//*/@src'))
Modified var:.. feature_pic = 'http://img55.ddimg.cn/99999990168742015.jpg'
17:42:23.112208 line       145                 if not feature_pic:
17:42:23.116205 line       148                 print('产品特色长图：', feature_pic)
17:42:23.119203 line       153                 attachImage = ''.join(tree.xpath('//*[@id="detail"]/div[@id="attachImage"]/div[@class="descrip"]//*/img/@data-original'))
Modified var:.. attachImage = 'http://img52.ddimg.cn/99999990002501452.jpg'
17:42:23.123201 line       154                 if not attachImage:
17:42:23.128200 line       158                 print('书摘插画：', attachImage)
17:42:23.131197 line       167                 """
Modified var:.. tbook_sql = " REPLACE INTO `t_book` \n                      ..._b_3.jpg',now())\n            \n                "
17:42:23.134196 line       169                 sefl.sql_cursor.query(tbook_sql)
17:42:23.143238 line        31         for link in hrefs:
Modified var:.. link = ('750e632f12b811eb805b507b9d245e55', 'http://pro...'http://img3m1.ddimg.cn/36/1/20246031-1_b_5.jpg')
17:42:23.146203 line        33             print('')
17:42:23.150200 line        34             printDarkBlue(f"开始读取详情数据，加载缓存。。。。。\n",FOREGROUND_BLUE)
17:42:23.153184 line        35             url = f'{link[1]}'
Modified var:.. url = 'http://product.dangdang.com/20246031.html'
17:42:23.155197 line        36             try:
17:42:23.159195 line        38                 chrome_opts = webdriver.ChromeOptions()
Modified var:.. chrome_opts = <selenium.webdriver.chrome.options.Options object at 0x000001BB6F6C0548>
17:42:23.162178 line        39                 chrome_opts.add_argument("--headless")
17:42:23.165176 line        41                 browser = webdriver.Chrome(options=chrome_opts)
Modified var:.. browser = <selenium.webdriver.chrome.webdriver.WebDriver (session="21ec38dfa60918e174418f8b351c3398")>
17:42:27.000006 line        43                 browser.get(url)
17:42:32.685732 line        44                 out_html = browser.page_source
Modified var:.. out_html = '<html><head><script async="" src="http://nt-dow...amp;random_id=0.4541139909147287"></body></html>'
17:42:32.735712 line        46                 tree = html.fromstring(out_html)
Modified var:.. tree = <Element html at 0x1bb6f6a5598>
17:42:32.751687 line        51                 product_title_xpath = tree.xpath('//*[@id="product_info"]/div/h1/text()')
Modified var:.. product_title_xpath = ['\n                    ', '\n                                        团圆——信谊 原创图画书系列    ']
17:42:32.756684 line        52                 product_title = ''.join(product_title_xpath).strip()
Modified var:.. product_title = '团圆——信谊 原创图画书系列'
17:42:32.760684 line        53                 print('书本名称：',product_title)
17:42:32.764683 line        59                 product_author_xpath = tree.xpath('//*[@id="product_info"]/div/span[@dd_name="作者"]/a//text()')
17:42:32.769692 line        61                 if product_author_xpath:
17:42:32.772676 line        62                         product_author = ' '.join(product_author_xpath)
17:42:32.774674 line        63                         print('作者：',product_author)
17:42:32.778673 line        68                 publishing_company_name_xpath = tree.xpath('//*[@id="product_info"]/div/span[@dd_name="出版社"]/a//text()')
17:42:32.784671 line        69                 if publishing_company_name_xpath:
17:42:32.787668 line        70                     publishing_company_name = ''.join(publishing_company_name_xpath)
17:42:32.790665 line        71                     print('出版社：',publishing_company_name)
17:42:32.792664 line        76                 publish_date_xpath = tree.xpath('//*[@id="product_info"]/div/span//text()')
Modified var:.. publish_date_xpath = ['作者:', '余丽琼', '\u3000文，', '朱成梁', '\u3000绘', '出版社:', '明天出版社', '出版时间:2008年04月\xa0']
17:42:32.797662 line        78                 if publish_date_xpath:
17:42:32.801660 line        79                     for pub_list in publish_date_xpath:
Modified var:.. pub_list = '作者:'
17:42:32.804658 line        80                         if "出版时间" in pub_list:
17:42:32.807656 line        79                     for pub_list in publish_date_xpath:
Modified var:.. pub_list = '余丽琼'
17:42:32.811655 line        80                         if "出版时间" in pub_list:
17:42:32.815653 line        79                     for pub_list in publish_date_xpath:
Modified var:.. pub_list = '\u3000文，'
17:42:32.818651 line        80                         if "出版时间" in pub_list:
17:42:32.821648 line        79                     for pub_list in publish_date_xpath:
Modified var:.. pub_list = '朱成梁'
17:42:32.824648 line        80                         if "出版时间" in pub_list:
17:42:32.829644 line        79                     for pub_list in publish_date_xpath:
Modified var:.. pub_list = '\u3000绘'
17:42:32.832642 line        80                         if "出版时间" in pub_list:
17:42:32.836640 line        79                     for pub_list in publish_date_xpath:
Modified var:.. pub_list = '出版社:'
17:42:32.838639 line        80                         if "出版时间" in pub_list:
17:42:32.842637 line        79                     for pub_list in publish_date_xpath:
Modified var:.. pub_list = '明天出版社'
17:42:32.846634 line        80                         if "出版时间" in pub_list:
17:42:32.849632 line        79                     for pub_list in publish_date_xpath:
Modified var:.. pub_list = '出版时间:2008年04月\xa0'
17:42:32.851631 line        80                         if "出版时间" in pub_list:
17:42:32.855629 line        81                             publish_date = pub_list.split('出版时间:')[-1].split('\xa0')[0]
17:42:32.857628 line        82                             print('出版时间:',publish_date)
17:42:32.860626 line        79                     for pub_list in publish_date_xpath:
17:42:32.863624 line        87                 price_xpath = tree.xpath('//*[@id="pc-price"]/div/div/p/text()')
Modified var:.. price_xpath = ['\n                    ', '\n                    ', '\n                ', '28.43']
17:42:32.867622 line        88                 if price_xpath:
17:42:32.871621 line        89                     price = price_xpath[-1]
Modified var:.. price = '28.43'
17:42:32.875621 line        90                     print('价格：',price)
17:42:32.880615 line        95                 isbn_no_xpath = tree.xpath('//*[@id="detail_all"]/div/ul/li/text()')
Modified var:.. isbn_no_xpath = ['开 本：大16开', '纸 张：铜版纸', '包 装：精装', '是否套装：否', '国际标准书号ISBN：9787533255879', '丛书名：信谊原创图画书系列']
17:42:32.884627 line        96                 if isbn_no_xpath:
17:42:32.888625 line        97                     for isbn_no_li in isbn_no_xpath:
Modified var:.. isbn_no_li = '开 本：大16开'
17:42:32.890623 line        98                         if "ISBN" in isbn_no_li:
17:42:32.895606 line        97                     for isbn_no_li in isbn_no_xpath:
Modified var:.. isbn_no_li = '纸 张：铜版纸'
17:42:32.898603 line        98                         if "ISBN" in isbn_no_li:
17:42:32.901602 line        97                     for isbn_no_li in isbn_no_xpath:
Modified var:.. isbn_no_li = '包 装：精装'
17:42:32.904600 line        98                         if "ISBN" in isbn_no_li:
17:42:32.907598 line        97                     for isbn_no_li in isbn_no_xpath:
Modified var:.. isbn_no_li = '是否套装：否'
17:42:32.911606 line        98                         if "ISBN" in isbn_no_li:
17:42:32.916594 line        97                     for isbn_no_li in isbn_no_xpath:
Modified var:.. isbn_no_li = '国际标准书号ISBN：9787533255879'
17:42:32.919609 line        98                         if "ISBN" in isbn_no_li:
17:42:32.924604 line        99                             isbn_new_no = isbn_no_li.split('国际标准书号ISBN：')[-1]
17:42:32.929603 line       100                             print('ISBN号:',isbn_new_no)
17:42:32.932584 line        97                     for isbn_no_li in isbn_no_xpath:
Modified var:.. isbn_no_li = '丛书名：信谊原创图画书系列'
17:42:32.934598 line        98                         if "ISBN" in isbn_no_li:
17:42:32.938583 line        97                     for isbn_no_li in isbn_no_xpath:
17:42:32.940581 line       106                 introduce_str = ''.join(tree.xpath('//*[@id="detail"]/div[@id="content"]/div[@class="descrip"]//text()'))
Modified var:.. introduce_str = '\u3000为离家很远的缘故，已经习惯了对家乡和父母的遥望，这些遥望常常是伴随着童年的回忆一下...。没想到很多年后，我和父亲换了位置——那个在家守望的人是他，而那个一心想要赶回家过年的人是我……'
17:42:32.948590 line       108                 pre = re.compile('>(.*)<')
17:42:32.952573 line       109                 retouve_str = ''.join(pre.findall(introduce_str))
17:42:32.955576 line       111                 if retouve_str:
17:42:32.958570 line       114                     content_introduce = introduce_str.strip()
Modified var:.. content_introduce = '为离家很远的缘故，已经习惯了对家乡和父母的遥望，这些遥望常常是伴随着童年的回忆一下子涌到我面前...。没想到很多年后，我和父亲换了位置——那个在家守望的人是他，而那个一心想要赶回家过年的人是我……'
17:42:32.962582 line       115                 print('内容简介:', content_introduce)
17:42:32.966569 line       121                 author_introduce_str = ''.join(
17:42:32.970566 line       122                     tree.xpath('//*[@id="detail"]/div[@id="authorIntroduction"]/div[@class="descrip"]//text()'))
Modified var:.. author_introduce_str = '余丽琼，1980年出生在安徽安庆。南京大学文学学士、戏剧艺术在读硕士，中国散文学会会员。现为《东方娃娃》编辑。1996年至今已发表散文、小说十余万字。'
17:42:32.978573 line       124                 retouve_str = ''.join(pre.findall(author_introduce_str))
17:42:32.982571 line       125                 if retouve_str:
17:42:32.984571 line       128                     author_introduce = author_introduce_str.strip()
Modified var:.. author_introduce = '余丽琼，1980年出生在安徽安庆。南京大学文学学士、戏剧艺术在读硕士，中国散文学会会员。现为《东方娃娃》编辑。1996年至今已发表散文、小说十余万字。'
17:42:32.987570 line       129                 print('书名作者简介:', author_introduce)
17:42:32.992554 line       134                 abstract_info_span = tree.xpath('//*[@id="detail"]/div[@id="abstract"]/div[@class="descrip"]//text()')
Modified var:.. abstract_info_span = ['适读人群 ：5-8岁', '\n', '\u3000\u3000团圆 属于你我的节日故事',...供了坚实的展开基础，也给绘者留下了广阔的创意空间。', '\n', '\xa0', '\xa0']
17:42:33.003561 line       135                 abstract_info = ''.join(abstract_info_span).strip()
Modified var:.. abstract_info = '适读人群 ：5-8岁\n\u3000\u3000团圆 属于你我的节日故事\u3000\u300...情感表达酽而不烈，结构安排疏而不漏，既為绘画提供了坚实的展开基础，也给绘者留下了广阔的创意空间。'
17:42:33.006545 line       136                 print('编辑推荐：',abstract_info)
17:42:33.010543 line       138                 abstract_info_pic = ''.join(tree.xpath('//*[@id="detail"]/div[@id="abstract"]/div[@class="descrip"]//*/@src'))
Modified var:.. abstract_info_pic = ''
17:42:33.015538 line       139                 print('编辑推荐长图：', abstract_info_pic)
17:42:33.019550 line       144                 feature_pic = ''.join(tree.xpath('//*[@id="detail"]/div[@id="feature"]/div[@class="descrip"]//*/@src'))
Modified var:.. feature_pic = ''
17:42:33.023536 line       145                 if not feature_pic:
17:42:33.031529 line       146                     feature_pic = ''.join(
17:42:33.034541 line       147                         tree.xpath('//*[@id="detail"]/div[@id="feature"]/div[@class="descrip"]//*/@data-original'))
17:42:33.038538 line       148                 print('产品特色长图：', feature_pic)
17:42:33.041538 line       153                 attachImage = ''.join(tree.xpath('//*[@id="detail"]/div[@id="attachImage"]/div[@class="descrip"]//*/img/@data-original'))
Modified var:.. attachImage = 'http://img57.ddimg.cn/99999990001989737.jpg'
17:42:33.046521 line       154                 if not attachImage:
17:42:33.051523 line       158                 print('书摘插画：', attachImage)
17:42:33.054517 line       167                 """
Modified var:.. tbook_sql = " REPLACE INTO `t_book` \n                      ..._b_5.jpg',now())\n            \n                "
17:42:33.057513 line       169                 sefl.sql_cursor.query(tbook_sql)
17:42:33.071506 line        31         for link in hrefs:
Modified var:.. link = ('f51bc85e12b011eba9b5507b9d245e55', 'http://pro...http://img3m6.ddimg.cn/24/19/22632216-1_b_1.jpg')
17:42:33.073503 line        33             print('')
17:42:33.078505 line        34             printDarkBlue(f"开始读取详情数据，加载缓存。。。。。\n",FOREGROUND_BLUE)
17:42:33.083506 line        35             url = f'{link[1]}'
Modified var:.. url = 'http://product.dangdang.com/22632216.html'
17:42:33.087512 line        36             try:
17:42:33.090508 line        38                 chrome_opts = webdriver.ChromeOptions()
Modified var:.. chrome_opts = <selenium.webdriver.chrome.options.Options object at 0x000001BB6F6D2348>
17:42:33.093497 line        39                 chrome_opts.add_argument("--headless")
17:42:33.097492 line        41                 browser = webdriver.Chrome(options=chrome_opts)
Modified var:.. browser = <selenium.webdriver.chrome.webdriver.WebDriver (session="dbadb2171b96208590ea39db6d3058d5")>
17:42:36.959280 line        43                 browser.get(url)
17:42:43.012816 line        44                 out_html = browser.page_source
Modified var:.. out_html = '<html><head><script async="" src="http://nt-dow...amp;random_id=0.5635661161267775"></body></html>'
17:42:43.083773 line        46                 tree = html.fromstring(out_html)
Modified var:.. tree = <Element html at 0x1bb6f6c26d8>
17:42:43.100764 line        51                 product_title_xpath = tree.xpath('//*[@id="product_info"]/div/h1/text()')
Modified var:.. product_title_xpath = ['\n                    ', '\n                  ...   天黑以后（与诺贝尔文学奖擦身而过的作家,村上春树关于孤独的经典之作，全新译本！）    ']
17:42:43.106760 line        52                 product_title = ''.join(product_title_xpath).strip()
Modified var:.. product_title = '天黑以后（与诺贝尔文学奖擦身而过的作家,村上春树关于孤独的经典之作，全新译本！）'
17:42:43.111758 line        53                 print('书本名称：',product_title)
17:42:43.115755 line        59                 product_author_xpath = tree.xpath('//*[@id="product_info"]/div/span[@dd_name="作者"]/a//text()')
Modified var:.. product_author_xpath = ['村上春树', '施小炜']
17:42:43.122750 line        61                 if product_author_xpath:
17:42:43.130746 line        62                         product_author = ' '.join(product_author_xpath)
Modified var:.. product_author = '村上春树 施小炜'
17:42:43.133744 line        63                         print('作者：',product_author)
17:42:43.137743 line        68                 publishing_company_name_xpath = tree.xpath('//*[@id="product_info"]/div/span[@dd_name="出版社"]/a//text()')
Modified var:.. publishing_company_name_xpath = ['南海出版公司']
17:42:43.144740 line        69                 if publishing_company_name_xpath:
17:42:43.148737 line        70                     publishing_company_name = ''.join(publishing_company_name_xpath)
Modified var:.. publishing_company_name = '南海出版公司'
17:42:43.151737 line        71                     print('出版社：',publishing_company_name)
17:42:43.155732 line        76                 publish_date_xpath = tree.xpath('//*[@id="product_info"]/div/span//text()')
Modified var:.. publish_date_xpath = ['作者:〔日〕', '村上春树', ' 著 , ', '施小炜', ' 译', '出版社:', '南海出版公司', '出版时间:2012年02月\xa0']
17:42:43.164727 line        78                 if publish_date_xpath:
17:42:43.168725 line        79                     for pub_list in publish_date_xpath:
Modified var:.. pub_list = '作者:〔日〕'
17:42:43.172725 line        80                         if "出版时间" in pub_list:
17:42:43.186714 line        79                     for pub_list in publish_date_xpath:
Modified var:.. pub_list = '村上春树'
17:42:43.190712 line        80                         if "出版时间" in pub_list:
17:42:43.196709 line        79                     for pub_list in publish_date_xpath:
Modified var:.. pub_list = ' 著 , '
17:42:43.199707 line        80                         if "出版时间" in pub_list:
17:42:43.204704 line        79                     for pub_list in publish_date_xpath:
Modified var:.. pub_list = '施小炜'
17:42:43.207702 line        80                         if "出版时间" in pub_list:
17:42:43.213698 line        79                     for pub_list in publish_date_xpath:
Modified var:.. pub_list = ' 译'
17:42:43.219695 line        80                         if "出版时间" in pub_list:
17:42:43.227691 line        79                     for pub_list in publish_date_xpath:
Modified var:.. pub_list = '出版社:'
17:42:43.232688 line        80                         if "出版时间" in pub_list:
17:42:43.238686 line        79                     for pub_list in publish_date_xpath:
Modified var:.. pub_list = '南海出版公司'
17:42:43.245681 line        80                         if "出版时间" in pub_list:
17:42:43.275664 line        79                     for pub_list in publish_date_xpath:
Modified var:.. pub_list = '出版时间:2012年02月\xa0'
17:42:43.283659 line        80                         if "出版时间" in pub_list:
17:42:43.290655 line        81                             publish_date = pub_list.split('出版时间:')[-1].split('\xa0')[0]
Modified var:.. publish_date = '2012年02月'
17:42:43.300649 line        82                             print('出版时间:',publish_date)
17:42:43.313642 line        79                     for pub_list in publish_date_xpath:
17:42:43.318638 line        87                 price_xpath = tree.xpath('//*[@id="pc-price"]/div/div/p/text()')
Modified var:.. price_xpath = ['\n                    ', '\n                    ', '\n                ', '29.50']
17:42:43.324636 line        88                 if price_xpath:
17:42:43.332631 line        89                     price = price_xpath[-1]
Modified var:.. price = '29.50'
17:42:43.336630 line        90                     print('价格：',price)
17:42:43.340627 line        95                 isbn_no_xpath = tree.xpath('//*[@id="detail_all"]/div/ul/li/text()')
Modified var:.. isbn_no_xpath = ['开 本：32开', '纸 张：胶版纸', '包 装：精装', '是否套装：否', '国际标准书号ISBN：9787544248372']
17:42:43.346622 line        96                 if isbn_no_xpath:
17:42:43.350620 line        97                     for isbn_no_li in isbn_no_xpath:
Modified var:.. isbn_no_li = '开 本：32开'
17:42:43.352618 line        98                         if "ISBN" in isbn_no_li:
17:42:43.356616 line        97                     for isbn_no_li in isbn_no_xpath:
Modified var:.. isbn_no_li = '纸 张：胶版纸'
17:42:43.360615 line        98                         if "ISBN" in isbn_no_li:
17:42:43.364612 line        97                     for isbn_no_li in isbn_no_xpath:
Modified var:.. isbn_no_li = '包 装：精装'
17:42:43.367611 line        98                         if "ISBN" in isbn_no_li:
17:42:43.371608 line        97                     for isbn_no_li in isbn_no_xpath:
Modified var:.. isbn_no_li = '是否套装：否'
17:42:43.373606 line        98                         if "ISBN" in isbn_no_li:
17:42:43.379604 line        97                     for isbn_no_li in isbn_no_xpath:
Modified var:.. isbn_no_li = '国际标准书号ISBN：9787544248372'
17:42:43.382606 line        98                         if "ISBN" in isbn_no_li:
17:42:43.386600 line        99                             isbn_new_no = isbn_no_li.split('国际标准书号ISBN：')[-1]
Modified var:.. isbn_new_no = '9787544248372'
17:42:43.389598 line       100                             print('ISBN号:',isbn_new_no)
17:42:43.394596 line        97                     for isbn_no_li in isbn_no_xpath:
17:42:43.398593 line       106                 introduce_str = ''.join(tree.xpath('//*[@id="detail"]/div[@id="content"]/div[@class="descrip"]//text()'))
Modified var:.. introduce_str = '映入眼帘的，是都市的身姿。\n透过在夜空中高翔的飞鸟的眼睛，我们从天上俯瞰着这光景。\n都市望去仿佛一头巨大的活物，遵循其自身的原理运转。\n我们的视线选取尤为辉煌灿烂的一角，静静地降落……'
17:42:43.404590 line       108                 pre = re.compile('>(.*)<')
17:42:43.408587 line       109                 retouve_str = ''.join(pre.findall(introduce_str))
17:42:43.412584 line       111                 if retouve_str:
17:42:43.416583 line       114                     content_introduce = introduce_str.strip()
Modified var:.. content_introduce = '映入眼帘的，是都市的身姿。\n透过在夜空中高翔的飞鸟的眼睛，我们从天上俯瞰着这光景。\n都市望去仿佛一头巨大的活物，遵循其自身的原理运转。\n我们的视线选取尤为辉煌灿烂的一角，静静地降落……'
17:42:43.419581 line       115                 print('内容简介:', content_introduce)
17:42:43.422579 line       121                 author_introduce_str = ''.join(
17:42:43.425577 line       122                     tree.xpath('//*[@id="detail"]/div[@id="authorIntroduction"]/div[@class="descrip"]//text()'))
Modified var:.. author_introduce_str = '村上春树\n生于1949年。29岁开始写作，处女作《且听风吟》获日本群像新人奖。1987年问世...次登场，每个人怀有的秘密与孤独逐一展现。本书描写的现象，不是梦境，不是隐喻，正是我们眼前的现实。'
17:42:43.432574 line       124                 retouve_str = ''.join(pre.findall(author_introduce_str))
17:42:43.436572 line       125                 if retouve_str:
17:42:43.438570 line       128                     author_introduce = author_introduce_str.strip()
Modified var:.. author_introduce = '村上春树\n生于1949年。29岁开始写作，处女作《且听风吟》获日本群像新人奖。1987年问世...次登场，每个人怀有的秘密与孤独逐一展现。本书描写的现象，不是梦境，不是隐喻，正是我们眼前的现实。'
17:42:43.441568 line       129                 print('书名作者简介:', author_introduce)
17:42:43.446565 line       134                 abstract_info_span = tree.xpath('//*[@id="detail"]/div[@id="abstract"]/div[@class="descrip"]//text()')
Modified var:.. abstract_info_span = ['\n\t', ' \n', '\n', '\n\t', '关于村上春树↓', '↓', '\...能做的唯有悄悄坐在一旁。这才是村上春树独特的主题、旋律与哲学。《每日新闻》\n', '\xa0']
17:42:43.452561 line       135                 abstract_info = ''.join(abstract_info_span).strip()
Modified var:.. abstract_info = '关于村上春树↓↓\xa0 \n\n\n\t《袭击面包店》 \xa0村上春树反思之作：当你饥肠辘...的悲哀，他人无法拭去，能做的唯有悄悄坐在一旁。这才是村上春树独特的主题、旋律与哲学。《每日新闻》'
17:42:43.456559 line       136                 print('编辑推荐：',abstract_info)
17:42:43.464555 line       138                 abstract_info_pic = ''.join(tree.xpath('//*[@id="detail"]/div[@id="abstract"]/div[@class="descrip"]//*/@src'))
Modified var:.. abstract_info_pic = 'http://img38.ddimg.cn/imgother/201411/28_1/201411281556321938.jpg'
17:42:43.472552 line       139                 print('编辑推荐长图：', abstract_info_pic)
17:42:43.477549 line       144                 feature_pic = ''.join(tree.xpath('//*[@id="detail"]/div[@id="feature"]/div[@class="descrip"]//*/@src'))
17:42:43.484547 line       145                 if not feature_pic:
17:42:43.487541 line       146                     feature_pic = ''.join(
17:42:43.490539 line       147                         tree.xpath('//*[@id="detail"]/div[@id="feature"]/div[@class="descrip"]//*/@data-original'))
17:42:43.497536 line       148                 print('产品特色长图：', feature_pic)
17:42:43.500534 line       153                 attachImage = ''.join(tree.xpath('//*[@id="detail"]/div[@id="attachImage"]/div[@class="descrip"]//*/img/@data-original'))
Modified var:.. attachImage = 'http://img32.ddimg.cn/imgother/201401/27_0/20140127154317732.jpg'
17:42:43.505531 line       154                 if not attachImage:
17:42:43.512532 line       158                 print('书摘插画：', attachImage)
17:42:43.516524 line       167                 """
Modified var:.. tbook_sql = " REPLACE INTO `t_book` \n                      ..._b_1.jpg',now())\n            \n                "
17:42:43.518525 line       169                 sefl.sql_cursor.query(tbook_sql)
17:42:43.527521 line        31         for link in hrefs:
Modified var:.. link = ('f51e7e2812b011eba9b5507b9d245e55', 'http://pro...http://img3m5.ddimg.cn/21/11/25301055-1_b_3.jpg')
17:42:43.531517 line        33             print('')
17:42:43.535514 line        34             printDarkBlue(f"开始读取详情数据，加载缓存。。。。。\n",FOREGROUND_BLUE)
17:42:43.537512 line        35             url = f'{link[1]}'
Modified var:.. url = 'http://product.dangdang.com/25301055.html'
17:42:43.540511 line        36             try:
17:42:43.545509 line        38                 chrome_opts = webdriver.ChromeOptions()
Modified var:.. chrome_opts = <selenium.webdriver.chrome.options.Options object at 0x000001BB6F6D2948>
17:42:43.548509 line        39                 chrome_opts.add_argument("--headless")
17:42:43.560502 line        41                 browser = webdriver.Chrome(options=chrome_opts)
Modified var:.. browser = <selenium.webdriver.chrome.webdriver.WebDriver (session="f11126ef1d9b2cdc698bf401d50b0b6d")>
17:42:53.510810 line        43                 browser.get(url)
17:42:59.676713 line        44                 out_html = browser.page_source
Modified var:.. out_html = '<html><head><script async="" src="http://nt-dow...amp;random_id=0.7576380003154897"></body></html>'
17:42:59.747672 line        46                 tree = html.fromstring(out_html)
Modified var:.. tree = <Element html at 0x1bb6f6be9f8>
17:42:59.761663 line        51                 product_title_xpath = tree.xpath('//*[@id="product_info"]/div/h1/text()')
Modified var:.. product_title_xpath = ['\n                    ', '\n                                        1Q84（套装全3册）2018版    ']
17:42:59.768659 line        52                 product_title = ''.join(product_title_xpath).strip()
Modified var:.. product_title = '1Q84（套装全3册）2018版'
17:42:59.772663 line        53                 print('书本名称：',product_title)
17:42:59.777662 line        59                 product_author_xpath = tree.xpath('//*[@id="product_info"]/div/span[@dd_name="作者"]/a//text()')
Modified var:.. product_author_xpath = ['村上春树', '新经典']
17:42:59.782658 line        61                 if product_author_xpath:
17:42:59.786656 line        62                         product_author = ' '.join(product_author_xpath)
Modified var:.. product_author = '村上春树 新经典'
17:42:59.789655 line        63                         print('作者：',product_author)
17:42:59.796650 line        68                 publishing_company_name_xpath = tree.xpath('//*[@id="product_info"]/div/span[@dd_name="出版社"]/a//text()')
17:42:59.803646 line        69                 if publishing_company_name_xpath:
17:42:59.806645 line        70                     publishing_company_name = ''.join(publishing_company_name_xpath)
17:42:59.816640 line        71                     print('出版社：',publishing_company_name)
17:42:59.820636 line        76                 publish_date_xpath = tree.xpath('//*[@id="product_info"]/div/span//text()')
Modified var:.. publish_date_xpath = ['作者:（日）', '村上春树', ' 著，', '新经典', ' 出品', '出版社:', '南海出版公司', '出版时间:2018年07月\xa0']
17:42:59.832630 line        78                 if publish_date_xpath:
17:42:59.838627 line        79                     for pub_list in publish_date_xpath:
Modified var:.. pub_list = '作者:（日）'
17:42:59.843623 line        80                         if "出版时间" in pub_list:
17:42:59.849625 line        79                     for pub_list in publish_date_xpath:
Modified var:.. pub_list = '村上春树'
17:42:59.854617 line        80                         if "出版时间" in pub_list:
17:42:59.860614 line        79                     for pub_list in publish_date_xpath:
Modified var:.. pub_list = ' 著，'
17:42:59.865616 line        80                         if "出版时间" in pub_list:
17:42:59.869609 line        79                     for pub_list in publish_date_xpath:
Modified var:.. pub_list = '新经典'
17:42:59.873608 line        80                         if "出版时间" in pub_list:
17:42:59.879605 line        79                     for pub_list in publish_date_xpath:
Modified var:.. pub_list = ' 出品'
17:42:59.883602 line        80                         if "出版时间" in pub_list:
17:42:59.890597 line        79                     for pub_list in publish_date_xpath:
Modified var:.. pub_list = '出版社:'
17:42:59.917582 line        80                         if "出版时间" in pub_list:
17:42:59.923578 line        79                     for pub_list in publish_date_xpath:
Modified var:.. pub_list = '南海出版公司'
17:42:59.932577 line        80                         if "出版时间" in pub_list:
17:42:59.939569 line        79                     for pub_list in publish_date_xpath:
Modified var:.. pub_list = '出版时间:2018年07月\xa0'
17:42:59.944569 line        80                         if "出版时间" in pub_list:
17:42:59.950562 line        81                             publish_date = pub_list.split('出版时间:')[-1].split('\xa0')[0]
Modified var:.. publish_date = '2018年07月'
17:42:59.954560 line        82                             print('出版时间:',publish_date)
17:42:59.958558 line        79                     for pub_list in publish_date_xpath:
17:42:59.963556 line        87                 price_xpath = tree.xpath('//*[@id="pc-price"]/div/div/p/text()')
Modified var:.. price_xpath = ['\n                    ', '\n                    ', '\n                ', '148.80']
17:42:59.975549 line        88                 if price_xpath:
17:42:59.990540 line        89                     price = price_xpath[-1]
Modified var:.. price = '148.80'
17:42:59.997545 line        90                     print('价格：',price)
17:43:00.004533 line        95                 isbn_no_xpath = tree.xpath('//*[@id="detail_all"]/div/ul/li/text()')
Modified var:.. isbn_no_xpath = ['开 本：32开', '纸 张：胶版纸', '包 装：精装', '是否套装：否', '国际标准书号ISBN：9787544264099']
17:43:00.016535 line        96                 if isbn_no_xpath:
17:43:00.021523 line        97                     for isbn_no_li in isbn_no_xpath:
Modified var:.. isbn_no_li = '开 本：32开'
17:43:00.024520 line        98                         if "ISBN" in isbn_no_li:
17:43:00.031519 line        97                     for isbn_no_li in isbn_no_xpath:
Modified var:.. isbn_no_li = '纸 张：胶版纸'
17:43:00.035515 line        98                         if "ISBN" in isbn_no_li:
17:43:00.038513 line        97                     for isbn_no_li in isbn_no_xpath:
Modified var:.. isbn_no_li = '包 装：精装'
17:43:00.043509 line        98                         if "ISBN" in isbn_no_li:
17:43:00.048507 line        97                     for isbn_no_li in isbn_no_xpath:
Modified var:.. isbn_no_li = '是否套装：否'
17:43:00.052504 line        98                         if "ISBN" in isbn_no_li:
17:43:00.057502 line        97                     for isbn_no_li in isbn_no_xpath:
Modified var:.. isbn_no_li = '国际标准书号ISBN：9787544264099'
17:43:00.060501 line        98                         if "ISBN" in isbn_no_li:
17:43:00.065497 line        99                             isbn_new_no = isbn_no_li.split('国际标准书号ISBN：')[-1]
Modified var:.. isbn_new_no = '9787544264099'
17:43:00.068495 line       100                             print('ISBN号:',isbn_new_no)
17:43:00.075491 line        97                     for isbn_no_li in isbn_no_xpath:
17:43:00.078489 line       106                 introduce_str = ''.join(tree.xpath('//*[@id="detail"]/div[@id="content"]/div[@class="descrip"]//text()'))
Modified var:.. introduce_str = '《1Q84（套装全3册）》是村上春树长篇小说代表作，包括《1Q84》系列第 1部、第二部、第三...代的世态立体地写出，成为独有的“综合小说”，超越纯文学的类型，在当今时代的空气中嵌入人类的生命。'
17:43:00.085486 line       108                 pre = re.compile('>(.*)<')
17:43:00.090482 line       109                 retouve_str = ''.join(pre.findall(introduce_str))
17:43:00.094480 line       111                 if retouve_str:
17:43:00.099478 line       114                     content_introduce = introduce_str.strip()
Modified var:.. content_introduce = '《1Q84（套装全3册）》是村上春树长篇小说代表作，包括《1Q84》系列第 1部、第二部、第三...代的世态立体地写出，成为独有的“综合小说”，超越纯文学的类型，在当今时代的空气中嵌入人类的生命。'
17:43:00.103475 line       115                 print('内容简介:', content_introduce)
17:43:00.108472 line       121                 author_introduce_str = ''.join(
17:43:00.112470 line       122                     tree.xpath('//*[@id="detail"]/div[@id="authorIntroduction"]/div[@class="descrip"]//text()'))
Modified var:.. author_introduce_str = '村上春树，日本作家。生于1949年。29岁开始写作，处女作《且听风吟》获日本群像新人奖。198...当我谈跑步时，我谈些什么》《天黑以后》《没有色彩的多崎作和他的巡礼之年》《我的职业是小说家》等。'
17:43:00.121464 line       124                 retouve_str = ''.join(pre.findall(author_introduce_str))
17:43:00.125463 line       125                 if retouve_str:
17:43:00.130459 line       128                     author_introduce = author_introduce_str.strip()
Modified var:.. author_introduce = '村上春树，日本作家。生于1949年。29岁开始写作，处女作《且听风吟》获日本群像新人奖。198...当我谈跑步时，我谈些什么》《天黑以后》《没有色彩的多崎作和他的巡礼之年》《我的职业是小说家》等。'
17:43:00.135457 line       129                 print('书名作者简介:', author_introduce)
17:43:00.139454 line       134                 abstract_info_span = tree.xpath('//*[@id="detail"]/div[@id="abstract"]/div[@class="descrip"]//text()')
Modified var:.. abstract_info_span = ['★村上春树创作40年高峰之作，一套命运之书、时代之书、绝爱之书', '\n', '★被誉为新...售100万册纪录', '\n', '★知名设计师设计绝美收藏版套装，赠精美套盒', '\xa0']
17:43:00.151447 line       135                 abstract_info = ''.join(abstract_info_span).strip()
Modified var:.. abstract_info = '★村上春树创作40年高峰之作，一套命运之书、时代之书、绝爱之书\n★被誉为新千年日本文学的里程...销榜年度榜单首位，曾创上市12天销售100万册纪录\n★知名设计师设计绝美收藏版套装，赠精美套盒'
17:43:00.155445 line       136                 print('编辑推荐：',abstract_info)
17:43:00.160444 line       138                 abstract_info_pic = ''.join(tree.xpath('//*[@id="detail"]/div[@id="abstract"]/div[@class="descrip"]//*/@src'))
Modified var:.. abstract_info_pic = ''
17:43:00.167438 line       139                 print('编辑推荐长图：', abstract_info_pic)
17:43:00.173435 line       144                 feature_pic = ''.join(tree.xpath('//*[@id="detail"]/div[@id="feature"]/div[@class="descrip"]//*/@src'))
Modified var:.. feature_pic = 'http://img53.ddimg.cn/99999990003743333.jpg'
17:43:00.181431 line       145                 if not feature_pic:
17:43:00.187427 line       148                 print('产品特色长图：', feature_pic)
17:43:00.193426 line       153                 attachImage = ''.join(tree.xpath('//*[@id="detail"]/div[@id="attachImage"]/div[@class="descrip"]//*/img/@data-original'))
Modified var:.. attachImage = 'http://img56.ddimg.cn/99999990003173326.jpg'
17:43:00.203417 line       154                 if not attachImage:
17:43:00.210414 line       158                 print('书摘插画：', attachImage)
17:43:00.215411 line       167                 """
Modified var:.. tbook_sql = " REPLACE INTO `t_book` \n                      ..._b_3.jpg',now())\n            \n                "
17:43:00.219409 line       169                 sefl.sql_cursor.query(tbook_sql)
17:43:00.241395 line        31         for link in hrefs:
Modified var:.. link = ('f521183c12b011eba9b5507b9d245e55', 'http://pro...http://img3m9.ddimg.cn/73/16/25239529-1_b_4.jpg')
17:43:00.246393 line        33             print('')
17:43:00.252390 line        34             printDarkBlue(f"开始读取详情数据，加载缓存。。。。。\n",FOREGROUND_BLUE)
17:43:00.255389 line        35             url = f'{link[1]}'
Modified var:.. url = 'http://product.dangdang.com/25239529.html'
17:43:00.259386 line        36             try:
17:43:00.264385 line        38                 chrome_opts = webdriver.ChromeOptions()
Modified var:.. chrome_opts = <selenium.webdriver.chrome.options.Options object at 0x000001BB6F6D2708>
17:43:00.268381 line        39                 chrome_opts.add_argument("--headless")
17:43:00.272378 line        41                 browser = webdriver.Chrome(options=chrome_opts)
Modified var:.. browser = <selenium.webdriver.chrome.webdriver.WebDriver (session="6f90b0e62469f4af7c0954af74e76fcb")>
17:43:04.245315 line        43                 browser.get(url)
17:43:28.736663 line        44                 out_html = browser.page_source
Modified var:.. out_html = '<html><head><script async="" src="http://nt-dow...p;random_id=0.014604316676143592"></body></html>'
17:43:28.771654 line        46                 tree = html.fromstring(out_html)
Modified var:.. tree = <Element html at 0x1bb6f6d6368>
17:43:28.787632 line        51                 product_title_xpath = tree.xpath('//*[@id="product_info"]/div/h1/text()')
Modified var:.. product_title_xpath = ['\n                    ', '\n                  ...威的森林（2018年新版，村上春树的残酷青春物语，现象级的超级畅销书，三十周年纪念版）    ']
17:43:28.795640 line        52                 product_title = ''.join(product_title_xpath).strip()
Modified var:.. product_title = '挪威的森林（2018年新版，村上春树的残酷青春物语，现象级的超级畅销书，三十周年纪念版）'
17:43:28.799625 line        53                 print('书本名称：',product_title)
17:43:28.802636 line        59                 product_author_xpath = tree.xpath('//*[@id="product_info"]/div/span[@dd_name="作者"]/a//text()')
Modified var:.. product_author_xpath = ['村上春树', '林少华']
17:43:28.809632 line        61                 if product_author_xpath:
17:43:28.814636 line        62                         product_author = ' '.join(product_author_xpath)
Modified var:.. product_author = '村上春树 林少华'
17:43:28.818615 line        63                         print('作者：',product_author)
17:43:28.821613 line        68                 publishing_company_name_xpath = tree.xpath('//*[@id="product_info"]/div/span[@dd_name="出版社"]/a//text()')
Modified var:.. publishing_company_name_xpath = ['上海译文出版社']
17:43:28.830620 line        69                 if publishing_company_name_xpath:
17:43:28.834604 line        70                     publishing_company_name = ''.join(publishing_company_name_xpath)
Modified var:.. publishing_company_name = '上海译文出版社'
17:43:28.837616 line        71                     print('出版社：',publishing_company_name)
17:43:28.841600 line        76                 publish_date_xpath = tree.xpath('//*[@id="product_info"]/div/span//text()')
Modified var:.. publish_date_xpath = ['作者:【日】', '村上春树', ' ', '林少华', ' 译', '出版社:', '上海译文出版社', '出版时间:2018年03月\xa0']
17:43:28.848610 line        78                 if publish_date_xpath:
17:43:28.852593 line        79                     for pub_list in publish_date_xpath:
Modified var:.. pub_list = '作者:【日】'
17:43:28.854595 line        80                         if "出版时间" in pub_list:
17:43:28.859592 line        79                     for pub_list in publish_date_xpath:
Modified var:.. pub_list = '村上春树'
17:43:28.863588 line        80                         if "出版时间" in pub_list:
17:43:28.866601 line        79                     for pub_list in publish_date_xpath:
Modified var:.. pub_list = ' '
17:43:28.869586 line        80                         if "出版时间" in pub_list:
17:43:28.874583 line        79                     for pub_list in publish_date_xpath:
Modified var:.. pub_list = '林少华'
17:43:28.878578 line        80                         if "出版时间" in pub_list:
17:43:28.883590 line        79                     for pub_list in publish_date_xpath:
Modified var:.. pub_list = ' 译'
17:43:28.886576 line        80                         if "出版时间" in pub_list:
17:43:28.890571 line        79                     for pub_list in publish_date_xpath:
Modified var:.. pub_list = '出版社:'
17:43:28.893585 line        80                         if "出版时间" in pub_list:
17:43:28.897582 line        79                     for pub_list in publish_date_xpath:
Modified var:.. pub_list = '上海译文出版社'
17:43:28.900581 line        80                         if "出版时间" in pub_list:
17:43:28.904565 line        79                     for pub_list in publish_date_xpath:
Modified var:.. pub_list = '出版时间:2018年03月\xa0'
17:43:28.907564 line        80                         if "出版时间" in pub_list:
17:43:28.912559 line        81                             publish_date = pub_list.split('出版时间:')[-1].split('\xa0')[0]
Modified var:.. publish_date = '2018年03月'
17:43:28.916556 line        82                             print('出版时间:',publish_date)
17:43:28.921554 line        79                     for pub_list in publish_date_xpath:
17:43:28.925553 line        87                 price_xpath = tree.xpath('//*[@id="pc-price"]/div/div/p/text()')
Modified var:.. price_xpath = ['\n                    ', '\n                    ', '\n                ', '35.30']
17:43:28.933550 line        88                 if price_xpath:
17:43:28.937561 line        89                     price = price_xpath[-1]
Modified var:.. price = '35.30'
17:43:28.942558 line        90                     print('价格：',price)
17:43:28.947564 line        95                 isbn_no_xpath = tree.xpath('//*[@id="detail_all"]/div/ul/li/text()')
Modified var:.. isbn_no_xpath = ['开 本：32开', '纸 张：胶版纸', '包 装：平装-胶订', '是否套装：否', '国际标准书号ISBN：9787532776771']
17:43:28.952551 line        96                 if isbn_no_xpath:
17:43:28.956536 line        97                     for isbn_no_li in isbn_no_xpath:
Modified var:.. isbn_no_li = '开 本：32开'
17:43:28.960547 line        98                         if "ISBN" in isbn_no_li:
17:43:28.965529 line        97                     for isbn_no_li in isbn_no_xpath:
Modified var:.. isbn_no_li = '纸 张：胶版纸'
17:43:28.968529 line        98                         if "ISBN" in isbn_no_li:
17:43:28.972527 line        97                     for isbn_no_li in isbn_no_xpath:
Modified var:.. isbn_no_li = '包 装：平装-胶订'
17:43:28.975524 line        98                         if "ISBN" in isbn_no_li:
17:43:28.980521 line        97                     for isbn_no_li in isbn_no_xpath:
Modified var:.. isbn_no_li = '是否套装：否'
17:43:28.983518 line        98                         if "ISBN" in isbn_no_li:
17:43:28.987530 line        97                     for isbn_no_li in isbn_no_xpath:
Modified var:.. isbn_no_li = '国际标准书号ISBN：9787532776771'
17:43:28.991517 line        98                         if "ISBN" in isbn_no_li:
17:43:28.996511 line        99                             isbn_new_no = isbn_no_li.split('国际标准书号ISBN：')[-1]
Modified var:.. isbn_new_no = '9787532776771'
17:43:28.999524 line       100                             print('ISBN号:',isbn_new_no)
17:43:29.004521 line        97                     for isbn_no_li in isbn_no_xpath:
17:43:29.009505 line       106                 introduce_str = ''.join(tree.xpath('//*[@id="detail"]/div[@id="content"]/div[@class="descrip"]//text()'))
Modified var:.. introduce_str = '《挪威的森林》是日本作家村上春树所著的一部长篇爱情小说，影响了几代读者的青春名作。故事讲述主角...世后，该小说在年轻人中引起共鸣，风靡不息。上海译文出版社于2018年2月，推出该书的全新纪念版。'
17:43:29.020496 line       108                 pre = re.compile('>(.*)<')
17:43:29.023495 line       109                 retouve_str = ''.join(pre.findall(introduce_str))
17:43:29.031506 line       111                 if retouve_str:
17:43:29.033504 line       114                     content_introduce = introduce_str.strip()
Modified var:.. content_introduce = '《挪威的森林》是日本作家村上春树所著的一部长篇爱情小说，影响了几代读者的青春名作。故事讲述主角...世后，该小说在年轻人中引起共鸣，风靡不息。上海译文出版社于2018年2月，推出该书的全新纪念版。'
17:43:29.036491 line       115                 print('内容简介:', content_introduce)
17:43:29.041486 line       121                 author_introduce_str = ''.join(
17:43:29.046482 line       122                     tree.xpath('//*[@id="detail"]/div[@id="authorIntroduction"]/div[@class="descrip"]//text()'))
Modified var:.. author_introduce_str = '村上春树，当代日本小说家。29岁开始写作，第一部作品《且听风吟》即获得日本群像新人赏，1987...战后阴郁沉重的文字气息。被称作第一个纯正的“二战后时期作家”，并誉为日本1980年代的文学旗手。'
17:43:29.054492 line       124                 retouve_str = ''.join(pre.findall(author_introduce_str))
17:43:29.058476 line       125                 if retouve_str:
17:43:29.061488 line       128                     author_introduce = author_introduce_str.strip()
Modified var:.. author_introduce = '村上春树，当代日本小说家。29岁开始写作，第一部作品《且听风吟》即获得日本群像新人赏，1987...战后阴郁沉重的文字气息。被称作第一个纯正的“二战后时期作家”，并誉为日本1980年代的文学旗手。'
17:43:29.065472 line       129                 print('书名作者简介:', author_introduce)
17:43:29.069469 line       134                 abstract_info_span = tree.xpath('//*[@id="detail"]/div[@id="abstract"]/div[@class="descrip"]//text()')
Modified var:.. abstract_info_span = ['    2018年上海译文新版《挪威的森林》，村上春树著名小说，不朽的青春文学名作。', '...在两个少女间的徘徊。彻头彻尾的现实笔法，特有的感伤和孤独气氛，回顾逝去的风景。', '\xa0']
17:43:29.104451 line       135                 abstract_info = ''.join(abstract_info_span).strip()
Modified var:.. abstract_info = '2018年上海译文新版《挪威的森林》，村上春树著名小说，不朽的青春文学名作。\n    村上春...。离乡背井的大学生在两个少女间的徘徊。彻头彻尾的现实笔法，特有的感伤和孤独气氛，回顾逝去的风景。'
17:43:29.113444 line       136                 print('编辑推荐：',abstract_info)
17:43:29.117442 line       138                 abstract_info_pic = ''.join(tree.xpath('//*[@id="detail"]/div[@id="abstract"]/div[@class="descrip"]//*/@src'))
17:43:29.125437 line       139                 print('编辑推荐长图：', abstract_info_pic)
17:43:29.128437 line       144                 feature_pic = ''.join(tree.xpath('//*[@id="detail"]/div[@id="feature"]/div[@class="descrip"]//*/@src'))
Modified var:.. feature_pic = 'http://img59.ddimg.cn/99999990003396039.jpg'
17:43:29.134433 line       145                 if not feature_pic:
17:43:29.140431 line       148                 print('产品特色长图：', feature_pic)
17:43:29.147425 line       153                 attachImage = ''.join(tree.xpath('//*[@id="detail"]/div[@id="attachImage"]/div[@class="descrip"]//*/img/@data-original'))
Modified var:.. attachImage = ''
17:43:29.153422 line       154                 if not attachImage:
17:43:29.156421 line       155                     attachImage = ''.join(tree.xpath(
17:43:29.160417 line       156                     '//*[@id="detail"]/div[@id="attachImage"]/div[@class="descrip"]//*/img/@src'))
17:43:29.167413 line       158                 print('书摘插画：', attachImage)
17:43:29.169412 line       167                 """
Modified var:.. tbook_sql = " REPLACE INTO `t_book` \n                      ..._b_4.jpg',now())\n            \n                "
17:43:29.172410 line       169                 sefl.sql_cursor.query(tbook_sql)
17:43:29.201394 line        31         for link in hrefs:
Modified var:.. link = ('f523a32b12b011eba9b5507b9d245e55', 'http://pro...http://img3m2.ddimg.cn/43/12/25309492-1_b_2.jpg')
17:43:29.203394 line        33             print('')
17:43:29.208391 line        34             printDarkBlue(f"开始读取详情数据，加载缓存。。。。。\n",FOREGROUND_BLUE)
17:43:29.212387 line        35             url = f'{link[1]}'
Modified var:.. url = 'http://product.dangdang.com/25309492.html'
17:43:29.221382 line        36             try:
17:43:29.225380 line        38                 chrome_opts = webdriver.ChromeOptions()
Modified var:.. chrome_opts = <selenium.webdriver.chrome.options.Options object at 0x000001BB6F6C3D08>
17:43:29.231377 line        39                 chrome_opts.add_argument("--headless")
17:43:29.235374 line        41                 browser = webdriver.Chrome(options=chrome_opts)
Modified var:.. browser = <selenium.webdriver.chrome.webdriver.WebDriver (session="f14f4e9916759132310c58c261fe1674")>
17:43:33.431357 line        43                 browser.get(url)
17:43:49.021399 line        44                 out_html = browser.page_source
Modified var:.. out_html = '<html><head><script async="" src="http://nt-dow...              </div>\n            </body></html>'
17:43:49.054394 line        46                 tree = html.fromstring(out_html)
Modified var:.. tree = <Element html at 0x1bb6f6c2908>
17:43:49.068385 line        51                 product_title_xpath = tree.xpath('//*[@id="product_info"]/div/h1/text()')
Modified var:.. product_title_xpath = ['\n                    ', '\n                                        海边的卡夫卡（2018年新版，村上春树畅销名作）    ']
17:43:49.075370 line        52                 product_title = ''.join(product_title_xpath).strip()
Modified var:.. product_title = '海边的卡夫卡（2018年新版，村上春树畅销名作）'
17:43:49.079366 line        53                 print('书本名称：',product_title)
17:43:49.083377 line        59                 product_author_xpath = tree.xpath('//*[@id="product_info"]/div/span[@dd_name="作者"]/a//text()')
Modified var:.. product_author_xpath = ['村上春树']
17:43:49.088374 line        61                 if product_author_xpath:
17:43:49.093357 line        62                         product_author = ' '.join(product_author_xpath)
Modified var:.. product_author = '村上春树'
17:43:49.097371 line        63                         print('作者：',product_author)
17:43:49.101353 line        68                 publishing_company_name_xpath = tree.xpath('//*[@id="product_info"]/div/span[@dd_name="出版社"]/a//text()')
17:43:49.109349 line        69                 if publishing_company_name_xpath:
17:43:49.113346 line        70                     publishing_company_name = ''.join(publishing_company_name_xpath)
17:43:49.116358 line        71                     print('出版社：',publishing_company_name)
17:43:49.119357 line        76                 publish_date_xpath = tree.xpath('//*[@id="product_info"]/div/span//text()')
Modified var:.. publish_date_xpath = ['作者:', '村上春树', '出版社:', '上海译文出版社', '出版时间:2018年07月\xa0']
17:43:49.125341 line        78                 if publish_date_xpath:
17:43:49.129351 line        79                     for pub_list in publish_date_xpath:
Modified var:.. pub_list = '作者:'
17:43:49.132334 line        80                         if "出版时间" in pub_list:
17:43:49.135334 line        79                     for pub_list in publish_date_xpath:
Modified var:.. pub_list = '村上春树'
17:43:49.138346 line        80                         if "出版时间" in pub_list:
17:43:49.146328 line        79                     for pub_list in publish_date_xpath:
Modified var:.. pub_list = '出版社:'
17:43:49.149327 line        80                         if "出版时间" in pub_list:
17:43:49.153334 line        79                     for pub_list in publish_date_xpath:
Modified var:.. pub_list = '上海译文出版社'
17:43:49.155336 line        80                         if "出版时间" in pub_list:
17:43:49.160333 line        79                     for pub_list in publish_date_xpath:
Modified var:.. pub_list = '出版时间:2018年07月\xa0'
17:43:49.163332 line        80                         if "出版时间" in pub_list:
17:43:49.167329 line        81                             publish_date = pub_list.split('出版时间:')[-1].split('\xa0')[0]
Modified var:.. publish_date = '2018年07月'
17:43:49.169328 line        82                             print('出版时间:',publish_date)
17:43:49.175314 line        79                     for pub_list in publish_date_xpath:
17:43:49.178309 line        87                 price_xpath = tree.xpath('//*[@id="pc-price"]/div/div/p/text()')
Modified var:.. price_xpath = ['\n                    ', '\n                    ', '\n                ', '54.80']
17:43:49.183320 line        88                 if price_xpath:
17:43:49.187318 line        89                     price = price_xpath[-1]
Modified var:.. price = '54.80'
17:43:49.190301 line        90                     print('价格：',price)
17:43:49.195299 line        95                 isbn_no_xpath = tree.xpath('//*[@id="detail_all"]/div/ul/li/text()')
Modified var:.. isbn_no_xpath = ['开 本：32开', '纸 张：纯质纸', '包 装：平装-胶订', '是否套装：否', '国际标准书号ISBN：9787532777617']
17:43:49.201294 line        96                 if isbn_no_xpath:
17:43:49.205306 line        97                     for isbn_no_li in isbn_no_xpath:
Modified var:.. isbn_no_li = '开 本：32开'
17:43:49.209293 line        98                         if "ISBN" in isbn_no_li:
17:43:49.214289 line        97                     for isbn_no_li in isbn_no_xpath:
Modified var:.. isbn_no_li = '纸 张：纯质纸'
17:43:49.217301 line        98                         if "ISBN" in isbn_no_li:
17:43:49.221298 line        97                     for isbn_no_li in isbn_no_xpath:
Modified var:.. isbn_no_li = '包 装：平装-胶订'
17:43:49.225285 line        98                         if "ISBN" in isbn_no_li:
17:43:49.230294 line        97                     for isbn_no_li in isbn_no_xpath:
Modified var:.. isbn_no_li = '是否套装：否'
17:43:49.233292 line        98                         if "ISBN" in isbn_no_li:
17:43:49.237289 line        97                     for isbn_no_li in isbn_no_xpath:
Modified var:.. isbn_no_li = '国际标准书号ISBN：9787532777617'
17:43:49.241289 line        98                         if "ISBN" in isbn_no_li:
17:43:49.245271 line        99                             isbn_new_no = isbn_no_li.split('国际标准书号ISBN：')[-1]
Modified var:.. isbn_new_no = '9787532777617'
17:43:49.248270 line       100                             print('ISBN号:',isbn_new_no)
17:43:49.252281 line        97                     for isbn_no_li in isbn_no_xpath:
17:43:49.255279 line       106                 introduce_str = ''.join(tree.xpath('//*[@id="detail"]/div[@id="content"]/div[@class="descrip"]//text()'))
Modified var:.. introduce_str = '本书是村上春树仅次于《挪威的森林》的重要长篇小说，以其独特风格的两条平行线展开。一条平行线是少...次作了修订。因上一个平装本封面已经10年未变，故第三次更换本书封面设计，使这部名作焕发新的活力。'
17:43:49.266257 line       108                 pre = re.compile('>(.*)<')
17:43:49.270257 line       109                 retouve_str = ''.join(pre.findall(introduce_str))
17:43:49.272256 line       111                 if retouve_str:
17:43:49.279251 line       114                     content_introduce = introduce_str.strip()
Modified var:.. content_introduce = '本书是村上春树仅次于《挪威的森林》的重要长篇小说，以其独特风格的两条平行线展开。一条平行线是少...次作了修订。因上一个平装本封面已经10年未变，故第三次更换本书封面设计，使这部名作焕发新的活力。'
17:43:49.284252 line       115                 print('内容简介:', content_introduce)
17:43:49.287248 line       121                 author_introduce_str = ''.join(
17:43:49.292244 line       122                     tree.xpath('//*[@id="detail"]/div[@id="authorIntroduction"]/div[@class="descrip"]//text()'))
17:43:49.302251 line       124                 retouve_str = ''.join(pre.findall(author_introduce_str))
17:43:49.305235 line       125                 if retouve_str:
17:43:49.310248 line       128                     author_introduce = author_introduce_str.strip()
17:43:49.316245 line       129                 print('书名作者简介:', author_introduce)
17:43:49.319229 line       134                 abstract_info_span = tree.xpath('//*[@id="detail"]/div[@id="abstract"]/div[@class="descrip"]//text()')
Modified var:.. abstract_info_span = ['1. 作家号召力。村上春树是*受我国读者喜爱的外国作家之一。', '2. 经典作品脍炙人口。连续畅销16年，发行量逾百万册。', '\xa0']
17:43:49.333219 line       135                 abstract_info = ''.join(abstract_info_span).strip()
Modified var:.. abstract_info = '1. 作家号召力。村上春树是*受我国读者喜爱的外国作家之一。2. 经典作品脍炙人口。连续畅销16年，发行量逾百万册。'
17:43:49.337217 line       136                 print('编辑推荐：',abstract_info)
17:43:49.347212 line       138                 abstract_info_pic = ''.join(tree.xpath('//*[@id="detail"]/div[@id="abstract"]/div[@class="descrip"]//*/@src'))
17:43:49.354207 line       139                 print('编辑推荐长图：', abstract_info_pic)
17:43:49.358205 line       144                 feature_pic = ''.join(tree.xpath('//*[@id="detail"]/div[@id="feature"]/div[@class="descrip"]//*/@src'))
Modified var:.. feature_pic = 'http://img54.ddimg.cn/99999990003395994.jpg'
17:43:49.365202 line       145                 if not feature_pic:
17:43:49.369201 line       148                 print('产品特色长图：', feature_pic)
17:43:49.372199 line       153                 attachImage = ''.join(tree.xpath('//*[@id="detail"]/div[@id="attachImage"]/div[@class="descrip"]//*/img/@data-original'))
17:43:49.378194 line       154                 if not attachImage:
17:43:49.381194 line       155                     attachImage = ''.join(tree.xpath(
17:43:49.384190 line       156                     '//*[@id="detail"]/div[@id="attachImage"]/div[@class="descrip"]//*/img/@src'))
17:43:49.389188 line       158                 print('书摘插画：', attachImage)
17:43:49.394186 line       167                 """
Modified var:.. tbook_sql = " REPLACE INTO `t_book` \n                      ..._b_2.jpg',now())\n            \n                "
17:43:49.397183 line       169                 sefl.sql_cursor.query(tbook_sql)
17:43:49.418189 line        31         for link in hrefs:
Modified var:.. link = ('f526362c12b011eba9b5507b9d245e55', 'http://pro...'http://img3m7.ddimg.cn/39/6/23774097-1_b_9.jpg')
17:43:49.421170 line        33             print('')
17:43:49.427166 line        34             printDarkBlue(f"开始读取详情数据，加载缓存。。。。。\n",FOREGROUND_BLUE)
17:43:49.430163 line        35             url = f'{link[1]}'
Modified var:.. url = 'http://product.dangdang.com/23774097.html'
17:43:49.433164 line        36             try:
17:43:49.436162 line        38                 chrome_opts = webdriver.ChromeOptions()
Modified var:.. chrome_opts = <selenium.webdriver.chrome.options.Options object at 0x000001BB6F6E9FC8>
17:43:49.440159 line        39                 chrome_opts.add_argument("--headless")
17:43:49.445157 line        41                 browser = webdriver.Chrome(options=chrome_opts)
Modified var:.. browser = <selenium.webdriver.chrome.webdriver.WebDriver (session="34b055efa44e021bb16405d2ae5f9b4b")>
17:43:53.302916 line        43                 browser.get(url)
17:44:00.894956 line        44                 out_html = browser.page_source
Modified var:.. out_html = '<html><head><script async="" src="http://nt-dow...amp;random_id=0.7677978474091345"></body></html>'
17:44:00.951921 line        46                 tree = html.fromstring(out_html)
Modified var:.. tree = <Element html at 0x1bb6f6e8d68>
17:44:00.967912 line        51                 product_title_xpath = tree.xpath('//*[@id="product_info"]/div/h1/text()')
Modified var:.. product_title_xpath = ['\n                    ', '\n                                        当我谈跑步时，我谈些什么（2015典藏版）    ']
17:44:00.974910 line        52                 product_title = ''.join(product_title_xpath).strip()
Modified var:.. product_title = '当我谈跑步时，我谈些什么（2015典藏版）'
17:44:00.979905 line        53                 print('书本名称：',product_title)
17:44:00.983903 line        59                 product_author_xpath = tree.xpath('//*[@id="product_info"]/div/span[@dd_name="作者"]/a//text()')
Modified var:.. product_author_xpath = ['村上春树', '施小炜', '新经典']
17:44:00.988900 line        61                 if product_author_xpath:
17:44:00.994897 line        62                         product_author = ' '.join(product_author_xpath)
Modified var:.. product_author = '村上春树 施小炜 新经典'
17:44:00.998895 line        63                         print('作者：',product_author)
17:44:01.002892 line        68                 publishing_company_name_xpath = tree.xpath('//*[@id="product_info"]/div/span[@dd_name="出版社"]/a//text()')
Modified var:.. publishing_company_name_xpath = ['南海出版公司']
17:44:01.008895 line        69                 if publishing_company_name_xpath:
17:44:01.013887 line        70                     publishing_company_name = ''.join(publishing_company_name_xpath)
Modified var:.. publishing_company_name = '南海出版公司'
17:44:01.015884 line        71                     print('出版社：',publishing_company_name)
17:44:01.019882 line        76                 publish_date_xpath = tree.xpath('//*[@id="product_info"]/div/span//text()')
Modified var:.. publish_date_xpath = ['作者:〔日〕', '村上春树', ' 著  著，', '施小炜', ' 译，', '新经典', ' 出品', '出版社:', '南海出版公司', '出版时间:2015年10月\xa0']
17:44:01.028878 line        78                 if publish_date_xpath:
17:44:01.032875 line        79                     for pub_list in publish_date_xpath:
Modified var:.. pub_list = '作者:〔日〕'
17:44:01.035873 line        80                         if "出版时间" in pub_list:
17:44:01.041870 line        79                     for pub_list in publish_date_xpath:
Modified var:.. pub_list = '村上春树'
17:44:01.045869 line        80                         if "出版时间" in pub_list:
17:44:01.049866 line        79                     for pub_list in publish_date_xpath:
Modified var:.. pub_list = ' 著  著，'
17:44:01.053864 line        80                         if "出版时间" in pub_list:
17:44:01.058861 line        79                     for pub_list in publish_date_xpath:
Modified var:.. pub_list = '施小炜'
17:44:01.062858 line        80                         if "出版时间" in pub_list:
17:44:01.066856 line        79                     for pub_list in publish_date_xpath:
Modified var:.. pub_list = ' 译，'
17:44:01.069853 line        80                         if "出版时间" in pub_list:
17:44:01.076849 line        79                     for pub_list in publish_date_xpath:
Modified var:.. pub_list = '新经典'
17:44:01.080849 line        80                         if "出版时间" in pub_list:
17:44:01.085845 line        79                     for pub_list in publish_date_xpath:
Modified var:.. pub_list = ' 出品'
17:44:01.092841 line        80                         if "出版时间" in pub_list:
17:44:01.097837 line        79                     for pub_list in publish_date_xpath:
Modified var:.. pub_list = '出版社:'
17:44:01.100836 line        80                         if "出版时间" in pub_list:
17:44:01.103834 line        79                     for pub_list in publish_date_xpath:
Modified var:.. pub_list = '南海出版公司'
17:44:01.109832 line        80                         if "出版时间" in pub_list:
17:44:01.114827 line        79                     for pub_list in publish_date_xpath:
Modified var:.. pub_list = '出版时间:2015年10月\xa0'
17:44:01.117826 line        80                         if "出版时间" in pub_list:
17:44:01.120826 line        81                             publish_date = pub_list.split('出版时间:')[-1].split('\xa0')[0]
Modified var:.. publish_date = '2015年10月'
17:44:01.125821 line        82                             print('出版时间:',publish_date)
17:44:01.129820 line        79                     for pub_list in publish_date_xpath:
17:44:01.132818 line        87                 price_xpath = tree.xpath('//*[@id="pc-price"]/div/div/p/text()')
Modified var:.. price_xpath = ['\n                    ', '\n                    ', '\n                ', '36.00']
17:44:01.138816 line        88                 if price_xpath:
17:44:01.147810 line        89                     price = price_xpath[-1]
Modified var:.. price = '36.00'
17:44:01.151810 line        90                     print('价格：',price)
17:44:01.159804 line        95                 isbn_no_xpath = tree.xpath('//*[@id="detail_all"]/div/ul/li/text()')
Modified var:.. isbn_no_xpath = ['开 本：32开', '纸 张：纯质纸', '包 装：精装', '是否套装：否', '国际标准书号ISBN：9787544278843']
17:44:01.167799 line        96                 if isbn_no_xpath:
17:44:01.171796 line        97                     for isbn_no_li in isbn_no_xpath:
Modified var:.. isbn_no_li = '开 本：32开'
17:44:01.181790 line        98                         if "ISBN" in isbn_no_li:
17:44:01.185788 line        97                     for isbn_no_li in isbn_no_xpath:
Modified var:.. isbn_no_li = '纸 张：纯质纸'
17:44:01.188786 line        98                         if "ISBN" in isbn_no_li:
17:44:01.198781 line        97                     for isbn_no_li in isbn_no_xpath:
Modified var:.. isbn_no_li = '包 装：精装'
17:44:01.202780 line        98                         if "ISBN" in isbn_no_li:
17:44:01.209777 line        97                     for isbn_no_li in isbn_no_xpath:
Modified var:.. isbn_no_li = '是否套装：否'
17:44:01.215776 line        98                         if "ISBN" in isbn_no_li:
17:44:01.219722 line        97                     for isbn_no_li in isbn_no_xpath:
Modified var:.. isbn_no_li = '国际标准书号ISBN：9787544278843'
17:44:01.229698 line        98                         if "ISBN" in isbn_no_li:
17:44:01.234696 line        99                             isbn_new_no = isbn_no_li.split('国际标准书号ISBN：')[-1]
Modified var:.. isbn_new_no = '9787544278843'
17:44:01.238694 line       100                             print('ISBN号:',isbn_new_no)
17:44:01.247688 line        97                     for isbn_no_li in isbn_no_xpath:
17:44:01.254686 line       106                 introduce_str = ''.join(tree.xpath('//*[@id="detail"]/div[@id="content"]/div[@class="descrip"]//text()'))
Modified var:.. introduce_str = '《当我谈跑步时，我谈些什么》是村上春树*受欢迎的随笔集。开始作家生涯之际，村上春树也开始长跑。...在自己手中。他将这些年来在路上一面奔跑，一面思索的东西集结成书，诚实地书写跑步，诚实地书写人生。'
17:44:01.278670 line       108                 pre = re.compile('>(.*)<')
17:44:01.286668 line       109                 retouve_str = ''.join(pre.findall(introduce_str))
17:44:01.299659 line       111                 if retouve_str:
17:44:01.303657 line       114                     content_introduce = introduce_str.strip()
Modified var:.. content_introduce = '《当我谈跑步时，我谈些什么》是村上春树*受欢迎的随笔集。开始作家生涯之际，村上春树也开始长跑。...在自己手中。他将这些年来在路上一面奔跑，一面思索的东西集结成书，诚实地书写跑步，诚实地书写人生。'
17:44:01.317650 line       115                 print('内容简介:', content_introduce)
17:44:01.329642 line       121                 author_introduce_str = ''.join(
17:44:01.336637 line       122                     tree.xpath('//*[@id="detail"]/div[@id="authorIntroduction"]/div[@class="descrip"]//text()'))
Modified var:.. author_introduce_str = '村上春树日本著名作家。生于1949年。29岁开始写作，处女作《且听风吟》获日本群像新人奖。19...00万册，创日本文学史上的最快突破100万册的纪录。写作之余，热衷翻译英语文学、跑步、爵士乐等。'
17:44:01.353627 line       124                 retouve_str = ''.join(pre.findall(author_introduce_str))
17:44:01.363624 line       125                 if retouve_str:
17:44:01.367619 line       128                     author_introduce = author_introduce_str.strip()
Modified var:.. author_introduce = '村上春树日本著名作家。生于1949年。29岁开始写作，处女作《且听风吟》获日本群像新人奖。19...00万册，创日本文学史上的最快突破100万册的纪录。写作之余，热衷翻译英语文学、跑步、爵士乐等。'
17:44:01.376616 line       129                 print('书名作者简介:', author_introduce)
17:44:01.386609 line       134                 abstract_info_span = tree.xpath('//*[@id="detail"]/div[@id="abstract"]/div[@class="descrip"]//text()')
Modified var:.. abstract_info_span = ['\n', '\xa0★村上春树诚实地书写跑步，诚实地书写人生!', '\n', '\xa0★...，而磨难可以选择。积极地选择磨难，就是将人生的主动权握在自己手中。——村上春树', '\xa0']
17:44:01.401601 line       135                 abstract_info = ''.join(abstract_info_span).strip()
Modified var:.. abstract_info = '★村上春树诚实地书写跑步，诚实地书写人生!\n\xa0★内地销量突破30万册 ,令无数人爱上跑...a0★痛楚难以避免，而磨难可以选择。积极地选择磨难，就是将人生的主动权握在自己手中。——村上春树'
17:44:01.408598 line       136                 print('编辑推荐：',abstract_info)
17:44:01.414594 line       138                 abstract_info_pic = ''.join(tree.xpath('//*[@id="detail"]/div[@id="abstract"]/div[@class="descrip"]//*/@src'))
Modified var:.. abstract_info_pic = 'http://img54.ddimg.cn/99999990000297044.jpg'
17:44:01.420589 line       139                 print('编辑推荐长图：', abstract_info_pic)
17:44:01.428585 line       144                 feature_pic = ''.join(tree.xpath('//*[@id="detail"]/div[@id="feature"]/div[@class="descrip"]//*/@src'))
Modified var:.. feature_pic = 'http://img54.ddimg.cn/99999990076527164.jpg'
17:44:01.434580 line       145                 if not feature_pic:
17:44:01.438578 line       148                 print('产品特色长图：', feature_pic)
17:44:01.444575 line       153                 attachImage = ''.join(tree.xpath('//*[@id="detail"]/div[@id="attachImage"]/div[@class="descrip"]//*/img/@data-original'))
Modified var:.. attachImage = 'http://img33.ddimg.cn/imgother/201509/15_1/201509151618371453.jpg'
17:44:01.453571 line       154                 if not attachImage:
17:44:01.465562 line       158                 print('书摘插画：', attachImage)
17:44:01.469560 line       167                 """
Modified var:.. tbook_sql = " REPLACE INTO `t_book` \n                      ..._b_9.jpg',now())\n            \n                "
17:44:01.476561 line       169                 sefl.sql_cursor.query(tbook_sql)
17:44:01.488549 line        31         for link in hrefs:
Modified var:.. link = ('f528ba0112b011eba9b5507b9d245e55', 'http://pro...http://img3m9.ddimg.cn/50/19/25309499-1_b_3.jpg')
17:44:01.493548 line        33             print('')
17:44:01.499544 line        34             printDarkBlue(f"开始读取详情数据，加载缓存。。。。。\n",FOREGROUND_BLUE)
17:44:01.502542 line        35             url = f'{link[1]}'
Modified var:.. url = 'http://product.dangdang.com/25309499.html'
17:44:01.507539 line        36             try:
17:44:01.513537 line        38                 chrome_opts = webdriver.ChromeOptions()
Modified var:.. chrome_opts = <selenium.webdriver.chrome.options.Options object at 0x000001BB6F6CEB08>
17:44:01.517532 line        39                 chrome_opts.add_argument("--headless")
17:44:01.521531 line        41                 browser = webdriver.Chrome(options=chrome_opts)
Modified var:.. browser = <selenium.webdriver.chrome.webdriver.WebDriver (session="3921f64ecc85b020442171b579077075")>
17:44:06.003264 line        43                 browser.get(url)
17:44:12.971211 line        44                 out_html = browser.page_source
Modified var:.. out_html = '<html><head><script async="" src="http://nt-dow...amp;random_id=0.4079049776069059"></body></html>'
17:44:13.028182 line        46                 tree = html.fromstring(out_html)
Modified var:.. tree = <Element html at 0x1bb6f6df818>
17:44:13.048675 line        51                 product_title_xpath = tree.xpath('//*[@id="product_info"]/div/h1/text()')
Modified var:.. product_title_xpath = ['\n                    ', '\n                                        舞！舞！舞！（2018年新版，村上春树畅销名作）    ']
17:44:13.055669 line        52                 product_title = ''.join(product_title_xpath).strip()
Modified var:.. product_title = '舞！舞！舞！（2018年新版，村上春树畅销名作）'
17:44:13.063665 line        53                 print('书本名称：',product_title)
17:44:13.067663 line        59                 product_author_xpath = tree.xpath('//*[@id="product_info"]/div/span[@dd_name="作者"]/a//text()')
Modified var:.. product_author_xpath = ['村上春树']
17:44:13.078656 line        61                 if product_author_xpath:
17:44:13.083654 line        62                         product_author = ' '.join(product_author_xpath)
Modified var:.. product_author = '村上春树'
17:44:13.087651 line        63                         print('作者：',product_author)
17:44:13.096647 line        68                 publishing_company_name_xpath = tree.xpath('//*[@id="product_info"]/div/span[@dd_name="出版社"]/a//text()')
Modified var:.. publishing_company_name_xpath = ['上海译文出版社']
17:44:13.101642 line        69                 if publishing_company_name_xpath:
17:44:13.113637 line        70                     publishing_company_name = ''.join(publishing_company_name_xpath)
Modified var:.. publishing_company_name = '上海译文出版社'
17:44:13.116636 line        71                     print('出版社：',publishing_company_name)
17:44:13.121633 line        76                 publish_date_xpath = tree.xpath('//*[@id="product_info"]/div/span//text()')
Modified var:.. publish_date_xpath = ['作者:', '村上春树', '出版社:', '上海译文出版社', '出版时间:2018年07月\xa0']
17:44:13.131627 line        78                 if publish_date_xpath:
17:44:13.135624 line        79                     for pub_list in publish_date_xpath:
Modified var:.. pub_list = '作者:'
17:44:13.144619 line        80                         if "出版时间" in pub_list:
17:44:13.149615 line        79                     for pub_list in publish_date_xpath:
Modified var:.. pub_list = '村上春树'
17:44:13.153614 line        80                         if "出版时间" in pub_list:
17:44:13.159610 line        79                     for pub_list in publish_date_xpath:
Modified var:.. pub_list = '出版社:'
17:44:13.164608 line        80                         if "出版时间" in pub_list:
17:44:13.169609 line        79                     for pub_list in publish_date_xpath:
Modified var:.. pub_list = '上海译文出版社'
17:44:13.175601 line        80                         if "出版时间" in pub_list:
17:44:13.183597 line        79                     for pub_list in publish_date_xpath:
Modified var:.. pub_list = '出版时间:2018年07月\xa0'
17:44:13.186597 line        80                         if "出版时间" in pub_list:
17:44:13.197589 line        81                             publish_date = pub_list.split('出版时间:')[-1].split('\xa0')[0]
Modified var:.. publish_date = '2018年07月'
17:44:13.202586 line        82                             print('出版时间:',publish_date)
17:44:13.208586 line        79                     for pub_list in publish_date_xpath:
17:44:13.215580 line        87                 price_xpath = tree.xpath('//*[@id="pc-price"]/div/div/p/text()')
Modified var:.. price_xpath = ['\n                    ', '\n                    ', '\n                ', '48.30']
17:44:13.236568 line        88                 if price_xpath:
17:44:13.270547 line        89                     price = price_xpath[-1]
Modified var:.. price = '48.30'
17:44:13.297531 line        90                     print('价格：',price)
17:44:13.312523 line        95                 isbn_no_xpath = tree.xpath('//*[@id="detail_all"]/div/ul/li/text()')
Modified var:.. isbn_no_xpath = ['开 本：32开', '纸 张：纯质纸', '包 装：平装-胶订', '是否套装：否', '国际标准书号ISBN：9787532777600']
17:44:13.330514 line        96                 if isbn_no_xpath:
17:44:13.345504 line        97                     for isbn_no_li in isbn_no_xpath:
Modified var:.. isbn_no_li = '开 本：32开'
17:44:13.354498 line        98                         if "ISBN" in isbn_no_li:
17:44:13.404471 line        97                     for isbn_no_li in isbn_no_xpath:
Modified var:.. isbn_no_li = '纸 张：纯质纸'
17:44:13.418462 line        98                         if "ISBN" in isbn_no_li:
17:44:13.434454 line        97                     for isbn_no_li in isbn_no_xpath:
Modified var:.. isbn_no_li = '包 装：平装-胶订'
17:44:13.446446 line        98                         if "ISBN" in isbn_no_li:
17:44:13.465435 line        97                     for isbn_no_li in isbn_no_xpath:
Modified var:.. isbn_no_li = '是否套装：否'
17:44:13.480429 line        98                         if "ISBN" in isbn_no_li:
17:44:13.487424 line        97                     for isbn_no_li in isbn_no_xpath:
Modified var:.. isbn_no_li = '国际标准书号ISBN：9787532777600'
17:44:13.500416 line        98                         if "ISBN" in isbn_no_li:
17:44:13.529400 line        99                             isbn_new_no = isbn_no_li.split('国际标准书号ISBN：')[-1]
Modified var:.. isbn_new_no = '9787532777600'
17:44:13.536395 line       100                             print('ISBN号:',isbn_new_no)
17:44:13.553386 line        97                     for isbn_no_li in isbn_no_xpath:
17:44:13.566378 line       106                 introduce_str = ''.join(tree.xpath('//*[@id="detail"]/div[@id="content"]/div[@class="descrip"]//text()'))
Modified var:.. introduce_str = '本书是村上春树的长篇小说，以其独特风格的两条平行线展开。一条是主人公的同学五反田成了电影明星，...次作了修订。因上一个平装本封面已经10年未变，故第三次更换本书封面设计，使这部名作焕发新的活力。'
17:44:13.581371 line       108                 pre = re.compile('>(.*)<')
17:44:13.599358 line       109                 retouve_str = ''.join(pre.findall(introduce_str))
17:44:13.613350 line       111                 if retouve_str:
17:44:13.618348 line       114                     content_introduce = introduce_str.strip()
Modified var:.. content_introduce = '本书是村上春树的长篇小说，以其独特风格的两条平行线展开。一条是主人公的同学五反田成了电影明星，...次作了修订。因上一个平装本封面已经10年未变，故第三次更换本书封面设计，使这部名作焕发新的活力。'
17:44:13.634339 line       115                 print('内容简介:', content_introduce)
17:44:13.653328 line       121                 author_introduce_str = ''.join(
17:44:13.666377 line       122                     tree.xpath('//*[@id="detail"]/div[@id="authorIntroduction"]/div[@class="descrip"]//text()'))
Modified var:.. author_introduce_str = '\xa0村上春树，当代日本小说家。29岁开始写作，第一部作品《且听风吟》即获得日本群像新人赏，...战后阴郁沉重的文字气息。被称作第一个纯正的“二战后时期作家”，并誉为日本1980年代的文学旗手。'
17:44:13.681414 line       124                 retouve_str = ''.join(pre.findall(author_introduce_str))
17:44:13.685446 line       125                 if retouve_str:
17:44:13.691439 line       128                     author_introduce = author_introduce_str.strip()
Modified var:.. author_introduce = '村上春树，当代日本小说家。29岁开始写作，第一部作品《且听风吟》即获得日本群像新人赏，1987...战后阴郁沉重的文字气息。被称作第一个纯正的“二战后时期作家”，并誉为日本1980年代的文学旗手。'
17:44:13.695947 line       129                 print('书名作者简介:', author_introduce)
17:44:13.701943 line       134                 abstract_info_span = tree.xpath('//*[@id="detail"]/div[@id="abstract"]/div[@class="descrip"]//text()')
Modified var:.. abstract_info_span = ['1. 作家号召力。村上春树是*受我国读者喜爱的外国作家之一。', '2. 经典作品脍炙人口。经典作品脍炙人口。连续畅销17年，发行三十余万册。\xa0']
17:44:13.716446 line       135                 abstract_info = ''.join(abstract_info_span).strip()
Modified var:.. abstract_info = '1. 作家号召力。村上春树是*受我国读者喜爱的外国作家之一。2. 经典作品脍炙人口。经典作品脍炙人口。连续畅销17年，发行三十余万册。'
17:44:13.720446 line       136                 print('编辑推荐：',abstract_info)
17:44:13.727441 line       138                 abstract_info_pic = ''.join(tree.xpath('//*[@id="detail"]/div[@id="abstract"]/div[@class="descrip"]//*/@src'))
Modified var:.. abstract_info_pic = ''
17:44:13.733437 line       139                 print('编辑推荐长图：', abstract_info_pic)
17:44:13.737436 line       144                 feature_pic = ''.join(tree.xpath('//*[@id="detail"]/div[@id="feature"]/div[@class="descrip"]//*/@src'))
Modified var:.. feature_pic = 'http://img56.ddimg.cn/99999990003396006.jpg'
17:44:13.748427 line       145                 if not feature_pic:
17:44:13.753425 line       148                 print('产品特色长图：', feature_pic)
17:44:13.759425 line       153                 attachImage = ''.join(tree.xpath('//*[@id="detail"]/div[@id="attachImage"]/div[@class="descrip"]//*/img/@data-original'))
Modified var:.. attachImage = ''
17:44:13.766420 line       154                 if not attachImage:
17:44:13.770417 line       155                     attachImage = ''.join(tree.xpath(
17:44:13.779411 line       156                     '//*[@id="detail"]/div[@id="attachImage"]/div[@class="descrip"]//*/img/@src'))
17:44:13.784406 line       158                 print('书摘插画：', attachImage)
17:44:13.787408 line       167                 """
Modified var:.. tbook_sql = " REPLACE INTO `t_book` \n                      ..._b_3.jpg',now())\n            \n                "
17:44:13.794409 line       169                 sefl.sql_cursor.query(tbook_sql)
17:44:13.807395 line        31         for link in hrefs:
Modified var:.. link = ('f52b46bc12b011eba9b5507b9d245e55', 'http://pro...http://img3m6.ddimg.cn/47/16/25309496-1_b_2.jpg')
17:44:13.810394 line        33             print('')
17:44:13.814390 line        34             printDarkBlue(f"开始读取详情数据，加载缓存。。。。。\n",FOREGROUND_BLUE)
17:44:13.817389 line        35             url = f'{link[1]}'
Modified var:.. url = 'http://product.dangdang.com/25309496.html'
17:44:13.820387 line        36             try:
17:44:13.827384 line        38                 chrome_opts = webdriver.ChromeOptions()
Modified var:.. chrome_opts = <selenium.webdriver.chrome.options.Options object at 0x000001BB6F6EDE88>
17:44:13.830381 line        39                 chrome_opts.add_argument("--headless")
17:44:13.834380 line        41                 browser = webdriver.Chrome(options=chrome_opts)
Modified var:.. browser = <selenium.webdriver.chrome.webdriver.WebDriver (session="527d8df044310008f81c04547ba94708")>
17:44:25.279548 line        43                 browser.get(url)
17:44:41.444304 line        44                 out_html = browser.page_source
Modified var:.. out_html = '<html><head><script async="" src="http://nt-dow...mp;random_id=0.08022946211526794"></body></html>'
17:44:41.481283 line        46                 tree = html.fromstring(out_html)
Modified var:.. tree = <Element html at 0x1bb6f6fff48>
17:44:41.495290 line        51                 product_title_xpath = tree.xpath('//*[@id="product_info"]/div/h1/text()')
Modified var:.. product_title_xpath = ['\n                    ', '\n                  ...                世界尽头与冷酷仙境（2018年新版，村上春树畅销名作）    ']
17:44:41.501286 line        52                 product_title = ''.join(product_title_xpath).strip()
Modified var:.. product_title = '世界尽头与冷酷仙境（2018年新版，村上春树畅销名作）'
17:44:41.505269 line        53                 print('书本名称：',product_title)
17:44:41.510268 line        59                 product_author_xpath = tree.xpath('//*[@id="product_info"]/div/span[@dd_name="作者"]/a//text()')
17:44:41.514263 line        61                 if product_author_xpath:
17:44:41.517261 line        62                         product_author = ' '.join(product_author_xpath)
17:44:41.520261 line        63                         print('作者：',product_author)
17:44:41.523261 line        68                 publishing_company_name_xpath = tree.xpath('//*[@id="product_info"]/div/span[@dd_name="出版社"]/a//text()')
17:44:41.529262 line        69                 if publishing_company_name_xpath:
17:44:41.532278 line        70                     publishing_company_name = ''.join(publishing_company_name_xpath)
17:44:41.535265 line        71                     print('出版社：',publishing_company_name)
17:44:41.538250 line        76                 publish_date_xpath = tree.xpath('//*[@id="product_info"]/div/span//text()')
17:44:41.545271 line        78                 if publish_date_xpath:
17:44:41.547258 line        79                     for pub_list in publish_date_xpath:
Modified var:.. pub_list = '作者:'
17:44:41.550242 line        80                         if "出版时间" in pub_list:
17:44:41.554240 line        79                     for pub_list in publish_date_xpath:
Modified var:.. pub_list = '村上春树'
17:44:41.559238 line        80                         if "出版时间" in pub_list:
17:44:41.563234 line        79                     for pub_list in publish_date_xpath:
Modified var:.. pub_list = '出版社:'
17:44:41.566233 line        80                         if "出版时间" in pub_list:
17:44:41.569232 line        79                     for pub_list in publish_date_xpath:
Modified var:.. pub_list = '上海译文出版社'
17:44:41.574231 line        80                         if "出版时间" in pub_list:
17:44:41.578229 line        79                     for pub_list in publish_date_xpath:
Modified var:.. pub_list = '出版时间:2018年07月\xa0'
17:44:41.581240 line        80                         if "出版时间" in pub_list:
17:44:41.585237 line        81                             publish_date = pub_list.split('出版时间:')[-1].split('\xa0')[0]
17:44:41.589221 line        82                             print('出版时间:',publish_date)
17:44:41.593220 line        79                     for pub_list in publish_date_xpath:
17:44:41.596218 line        87                 price_xpath = tree.xpath('//*[@id="pc-price"]/div/div/p/text()')
17:44:41.601213 line        88                 if price_xpath:
17:44:41.603211 line        89                     price = price_xpath[-1]
17:44:41.607225 line        90                     print('价格：',price)
17:44:41.610209 line        95                 isbn_no_xpath = tree.xpath('//*[@id="detail_all"]/div/ul/li/text()')
Modified var:.. isbn_no_xpath = ['开 本：32开', '纸 张：纯质纸', '包 装：平装-胶订', '是否套装：否', '国际标准书号ISBN：9787532777624']
17:44:41.615205 line        96                 if isbn_no_xpath:
17:44:41.619218 line        97                     for isbn_no_li in isbn_no_xpath:
Modified var:.. isbn_no_li = '开 本：32开'
17:44:41.622209 line        98                         if "ISBN" in isbn_no_li:
17:44:41.627199 line        97                     for isbn_no_li in isbn_no_xpath:
Modified var:.. isbn_no_li = '纸 张：纯质纸'
17:44:41.629212 line        98                         if "ISBN" in isbn_no_li:
17:44:41.633195 line        97                     for isbn_no_li in isbn_no_xpath:
Modified var:.. isbn_no_li = '包 装：平装-胶订'
17:44:41.636208 line        98                         if "ISBN" in isbn_no_li:
17:44:41.641193 line        97                     for isbn_no_li in isbn_no_xpath:
Modified var:.. isbn_no_li = '是否套装：否'
17:44:41.645188 line        98                         if "ISBN" in isbn_no_li:
17:44:41.649188 line        97                     for isbn_no_li in isbn_no_xpath:
Modified var:.. isbn_no_li = '国际标准书号ISBN：9787532777624'
17:44:41.651186 line        98                         if "ISBN" in isbn_no_li:
17:44:41.655182 line        99                             isbn_new_no = isbn_no_li.split('国际标准书号ISBN：')[-1]
Modified var:.. isbn_new_no = '9787532777624'
17:44:41.660180 line       100                             print('ISBN号:',isbn_new_no)
17:44:41.664202 line        97                     for isbn_no_li in isbn_no_xpath:
17:44:41.667200 line       106                 introduce_str = ''.join(tree.xpath('//*[@id="detail"]/div[@id="content"]/div[@class="descrip"]//text()'))
Modified var:.. introduce_str = '本书是村上春树*典型的平行线长篇小说，其他平行线小说发展到后来，两条平行线会交汇到一起，本书的...次作了修订。因上一个平装本封面已经10年未变，故第三次更换本书封面设计，使这部名作焕发新的活力。'
17:44:41.674174 line       108                 pre = re.compile('>(.*)<')
17:44:41.678185 line       109                 retouve_str = ''.join(pre.findall(introduce_str))
17:44:41.681167 line       111                 if retouve_str:
17:44:41.684169 line       114                     content_introduce = introduce_str.strip()
Modified var:.. content_introduce = '本书是村上春树*典型的平行线长篇小说，其他平行线小说发展到后来，两条平行线会交汇到一起，本书的...次作了修订。因上一个平装本封面已经10年未变，故第三次更换本书封面设计，使这部名作焕发新的活力。'
17:44:41.686180 line       115                 print('内容简介:', content_introduce)
17:44:41.690165 line       121                 author_introduce_str = ''.join(
17:44:41.694164 line       122                     tree.xpath('//*[@id="detail"]/div[@id="authorIntroduction"]/div[@class="descrip"]//text()'))
17:44:41.698157 line       124                 retouve_str = ''.join(pre.findall(author_introduce_str))
17:44:41.701170 line       125                 if retouve_str:
17:44:41.704156 line       128                     author_introduce = author_introduce_str.strip()
17:44:41.710152 line       129                 print('书名作者简介:', author_introduce)
17:44:41.713170 line       134                 abstract_info_span = tree.xpath('//*[@id="detail"]/div[@id="abstract"]/div[@class="descrip"]//text()')
17:44:41.720146 line       135                 abstract_info = ''.join(abstract_info_span).strip()
17:44:41.723146 line       136                 print('编辑推荐：',abstract_info)
17:44:41.726143 line       138                 abstract_info_pic = ''.join(tree.xpath('//*[@id="detail"]/div[@id="abstract"]/div[@class="descrip"]//*/@src'))
17:44:41.731153 line       139                 print('编辑推荐长图：', abstract_info_pic)
17:44:41.734153 line       144                 feature_pic = ''.join(tree.xpath('//*[@id="detail"]/div[@id="feature"]/div[@class="descrip"]//*/@src'))
Modified var:.. feature_pic = 'http://img50.ddimg.cn/99999990003396030.jpg'
17:44:41.739135 line       145                 if not feature_pic:
17:44:41.744133 line       148                 print('产品特色长图：', feature_pic)
17:44:41.747131 line       153                 attachImage = ''.join(tree.xpath('//*[@id="detail"]/div[@id="attachImage"]/div[@class="descrip"]//*/img/@data-original'))
17:44:41.751129 line       154                 if not attachImage:
17:44:41.757313 line       155                     attachImage = ''.join(tree.xpath(
17:44:41.761309 line       156                     '//*[@id="detail"]/div[@id="attachImage"]/div[@class="descrip"]//*/img/@src'))
17:44:41.766307 line       158                 print('书摘插画：', attachImage)
17:44:41.769306 line       167                 """
Modified var:.. tbook_sql = " REPLACE INTO `t_book` \n                      ..._b_2.jpg',now())\n            \n                "
17:44:41.772307 line       169                 sefl.sql_cursor.query(tbook_sql)
17:44:41.782320 line        31         for link in hrefs:
Modified var:.. link = ('f52db97a12b011eba9b5507b9d245e55', 'http://pro...http://img3m7.ddimg.cn/75/23/25303287-1_b_3.jpg')
17:44:41.785320 line        33             print('')
17:44:41.791293 line        34             printDarkBlue(f"开始读取详情数据，加载缓存。。。。。\n",FOREGROUND_BLUE)
17:44:41.794290 line        35             url = f'{link[1]}'
Modified var:.. url = 'http://product.dangdang.com/25303287.html'
17:44:41.797287 line        36             try:
17:44:41.801285 line        38                 chrome_opts = webdriver.ChromeOptions()
Modified var:.. chrome_opts = <selenium.webdriver.chrome.options.Options object at 0x000001BB6F6DEB08>
17:44:41.804287 line        39                 chrome_opts.add_argument("--headless")
17:44:41.808281 line        41                 browser = webdriver.Chrome(options=chrome_opts)
Modified var:.. browser = <selenium.webdriver.chrome.webdriver.WebDriver (session="695810cb7860db2f96facacf1a440e4d")>
17:44:45.643092 line        43                 browser.get(url)
17:45:01.020699 line        44                 out_html = browser.page_source
Modified var:.. out_html = '<html><head><script async="" src="http://nt-dow...mp;random_id=0.09006100041448417"></body></html>'
17:45:01.061665 line        46                 tree = html.fromstring(out_html)
Modified var:.. tree = <Element html at 0x1bb6f6b9cc8>
17:45:01.078668 line        51                 product_title_xpath = tree.xpath('//*[@id="product_info"]/div/h1/text()')
Modified var:.. product_title_xpath = ['\n                    ', '\n                                        且听风吟（2018年新版，村上春树的处女作）    ']
17:45:01.086651 line        52                 product_title = ''.join(product_title_xpath).strip()
Modified var:.. product_title = '且听风吟（2018年新版，村上春树的处女作）'
17:45:01.091647 line        53                 print('书本名称：',product_title)
17:45:01.096647 line        59                 product_author_xpath = tree.xpath('//*[@id="product_info"]/div/span[@dd_name="作者"]/a//text()')
Modified var:.. product_author_xpath = ['村上春树', '林少华']
17:45:01.101655 line        61                 if product_author_xpath:
17:45:01.109637 line        62                         product_author = ' '.join(product_author_xpath)
Modified var:.. product_author = '村上春树 林少华'
17:45:01.113635 line        63                         print('作者：',product_author)
17:45:01.117632 line        68                 publishing_company_name_xpath = tree.xpath('//*[@id="product_info"]/div/span[@dd_name="出版社"]/a//text()')
17:45:01.126629 line        69                 if publishing_company_name_xpath:
17:45:01.129626 line        70                     publishing_company_name = ''.join(publishing_company_name_xpath)
17:45:01.132625 line        71                     print('出版社：',publishing_company_name)
17:45:01.135623 line        76                 publish_date_xpath = tree.xpath('//*[@id="product_info"]/div/span//text()')
Modified var:.. publish_date_xpath = ['作者:[日]', '村上春树', ' 著 ', '林少华', ' 译', '出版社:', '上海译文出版社', '出版时间:2018年06月\xa0']
17:45:01.144616 line        78                 if publish_date_xpath:
17:45:01.148615 line        79                     for pub_list in publish_date_xpath:
Modified var:.. pub_list = '作者:[日]'
17:45:01.151613 line        80                         if "出版时间" in pub_list:
17:45:01.156609 line        79                     for pub_list in publish_date_xpath:
Modified var:.. pub_list = '村上春树'
17:45:01.160608 line        80                         if "出版时间" in pub_list:
17:45:01.164606 line        79                     for pub_list in publish_date_xpath:
Modified var:.. pub_list = ' 著 '
17:45:01.166606 line        80                         if "出版时间" in pub_list:
17:45:01.172601 line        79                     for pub_list in publish_date_xpath:
Modified var:.. pub_list = '林少华'
17:45:01.175602 line        80                         if "出版时间" in pub_list:
17:45:01.179595 line        79                     for pub_list in publish_date_xpath:
Modified var:.. pub_list = ' 译'
17:45:01.182593 line        80                         if "出版时间" in pub_list:
17:45:01.186591 line        79                     for pub_list in publish_date_xpath:
Modified var:.. pub_list = '出版社:'
17:45:01.192591 line        80                         if "出版时间" in pub_list:
17:45:01.195587 line        79                     for pub_list in publish_date_xpath:
Modified var:.. pub_list = '上海译文出版社'
17:45:01.198586 line        80                         if "出版时间" in pub_list:
17:45:01.202583 line        79                     for pub_list in publish_date_xpath:
Modified var:.. pub_list = '出版时间:2018年06月\xa0'
17:45:01.207580 line        80                         if "出版时间" in pub_list:
17:45:01.211578 line        81                             publish_date = pub_list.split('出版时间:')[-1].split('\xa0')[0]
Modified var:.. publish_date = '2018年06月'
17:45:01.214576 line        82                             print('出版时间:',publish_date)
17:45:01.218574 line        79                     for pub_list in publish_date_xpath:
17:45:01.222572 line        87                 price_xpath = tree.xpath('//*[@id="pc-price"]/div/div/p/text()')
Modified var:.. price_xpath = ['\n                    ', '\n                    ', '\n                ', '26.00']
17:45:01.228568 line        88                 if price_xpath:
17:45:01.232566 line        89                     price = price_xpath[-1]
Modified var:.. price = '26.00'
17:45:01.235563 line        90                     print('价格：',price)
17:45:01.242560 line        95                 isbn_no_xpath = tree.xpath('//*[@id="detail_all"]/div/ul/li/text()')
Modified var:.. isbn_no_xpath = ['开 本：32开', '纸 张：胶版纸', '包 装：平装-胶订', '是否套装：否', '国际标准书号ISBN：9787532777631']
17:45:01.247557 line        96                 if isbn_no_xpath:
17:45:01.250555 line        97                     for isbn_no_li in isbn_no_xpath:
Modified var:.. isbn_no_li = '开 本：32开'
17:45:01.255555 line        98                         if "ISBN" in isbn_no_li:
17:45:01.259551 line        97                     for isbn_no_li in isbn_no_xpath:
Modified var:.. isbn_no_li = '纸 张：胶版纸'
17:45:01.262549 line        98                         if "ISBN" in isbn_no_li:
17:45:01.266546 line        97                     for isbn_no_li in isbn_no_xpath:
Modified var:.. isbn_no_li = '包 装：平装-胶订'
17:45:01.268544 line        98                         if "ISBN" in isbn_no_li:
17:45:01.274543 line        97                     for isbn_no_li in isbn_no_xpath:
Modified var:.. isbn_no_li = '是否套装：否'
17:45:01.277539 line        98                         if "ISBN" in isbn_no_li:
17:45:01.281538 line        97                     for isbn_no_li in isbn_no_xpath:
Modified var:.. isbn_no_li = '国际标准书号ISBN：9787532777631'
17:45:01.284535 line        98                         if "ISBN" in isbn_no_li:
17:45:01.290534 line        99                             isbn_new_no = isbn_no_li.split('国际标准书号ISBN：')[-1]
Modified var:.. isbn_new_no = '9787532777631'
17:45:01.293532 line       100                             print('ISBN号:',isbn_new_no)
17:45:01.297529 line        97                     for isbn_no_li in isbn_no_xpath:
17:45:01.300528 line       106                 introduce_str = ''.join(tree.xpath('//*[@id="detail"]/div[@id="content"]/div[@class="descrip"]//text()'))
Modified var:.. introduce_str = '\xa0本书是村上春树的处女作，与后来的《1973年的弹子球》《寻羊冒险记》合称“鼠的三部曲”...次作了修订。因上一个平装本封面已经10年未变，故第三次更换本书封面设计，使这部名作焕发新的活力。'
17:45:01.308523 line       108                 pre = re.compile('>(.*)<')
17:45:01.312520 line       109                 retouve_str = ''.join(pre.findall(introduce_str))
17:45:01.314518 line       111                 if retouve_str:
17:45:01.317518 line       114                     content_introduce = introduce_str.strip()
Modified var:.. content_introduce = '本书是村上春树的处女作，与后来的《1973年的弹子球》《寻羊冒险记》合称“鼠的三部曲”，描写一...次作了修订。因上一个平装本封面已经10年未变，故第三次更换本书封面设计，使这部名作焕发新的活力。'
17:45:01.322515 line       115                 print('内容简介:', content_introduce)
17:45:01.327511 line       121                 author_introduce_str = ''.join(
17:45:01.330510 line       122                     tree.xpath('//*[@id="detail"]/div[@id="authorIntroduction"]/div[@class="descrip"]//text()'))
Modified var:.. author_introduce_str = '村上春树，当代日本小说家。29岁开始写作，第一部作品《且听风吟》即获得日本群像新人赏，1987...战后阴郁沉重的文字气息。被称作第一个纯正的“二战后时期作家”，并誉为日本1980年代的文学旗手。'
17:45:01.334507 line       124                 retouve_str = ''.join(pre.findall(author_introduce_str))
17:45:01.339506 line       125                 if retouve_str:
17:45:01.343502 line       128                     author_introduce = author_introduce_str.strip()
17:45:01.345500 line       129                 print('书名作者简介:', author_introduce)
17:45:01.348499 line       134                 abstract_info_span = tree.xpath('//*[@id="detail"]/div[@id="abstract"]/div[@class="descrip"]//text()')
Modified var:.. abstract_info_span = ['1. 作家号召力。村上春树是*受我国读者喜爱的外国作家之一。', '2. 经典作品脍炙人口。连续畅销18年，发行量逾百万册。', '\xa0']
17:45:01.357496 line       135                 abstract_info = ''.join(abstract_info_span).strip()
Modified var:.. abstract_info = '1. 作家号召力。村上春树是*受我国读者喜爱的外国作家之一。2. 经典作品脍炙人口。连续畅销18年，发行量逾百万册。'
17:45:01.362491 line       136                 print('编辑推荐：',abstract_info)
17:45:01.366491 line       138                 abstract_info_pic = ''.join(tree.xpath('//*[@id="detail"]/div[@id="abstract"]/div[@class="descrip"]//*/@src'))
17:45:01.372501 line       139                 print('编辑推荐长图：', abstract_info_pic)
17:45:01.375485 line       144                 feature_pic = ''.join(tree.xpath('//*[@id="detail"]/div[@id="feature"]/div[@class="descrip"]//*/@src'))
Modified var:.. feature_pic = 'http://img57.ddimg.cn/99999990003396007.jpg'
17:45:01.380501 line       145                 if not feature_pic:
17:45:01.384493 line       148                 print('产品特色长图：', feature_pic)
17:45:01.389478 line       153                 attachImage = ''.join(tree.xpath('//*[@id="detail"]/div[@id="attachImage"]/div[@class="descrip"]//*/img/@data-original'))
17:45:01.395472 line       154                 if not attachImage:
17:45:01.397472 line       155                     attachImage = ''.join(tree.xpath(
17:45:01.400469 line       156                     '//*[@id="detail"]/div[@id="attachImage"]/div[@class="descrip"]//*/img/@src'))
17:45:01.406467 line       158                 print('书摘插画：', attachImage)
17:45:01.410468 line       167                 """
Modified var:.. tbook_sql = " REPLACE INTO `t_book` \n                      ..._b_3.jpg',now())\n            \n                "
17:45:01.414462 line       169                 sefl.sql_cursor.query(tbook_sql)
17:45:01.425455 line        31         for link in hrefs:
Modified var:.. link = ('f530841d12b011eba9b5507b9d245e55', 'http://pro...ttp://img3m8.ddimg.cn/42/10/25228608-1_b_20.jpg')
17:45:01.428453 line        33             print('')
17:45:01.431452 line        34             printDarkBlue(f"开始读取详情数据，加载缓存。。。。。\n",FOREGROUND_BLUE)
17:45:01.434450 line        35             url = f'{link[1]}'
Modified var:.. url = 'http://product.dangdang.com/25228608.html'
17:45:01.437449 line        36             try:
17:45:01.443446 line        38                 chrome_opts = webdriver.ChromeOptions()
Modified var:.. chrome_opts = <selenium.webdriver.chrome.options.Options object at 0x000001BB6F6F5DC8>
17:45:01.446443 line        39                 chrome_opts.add_argument("--headless")
17:45:01.450441 line        41                 browser = webdriver.Chrome(options=chrome_opts)
Modified var:.. browser = <selenium.webdriver.chrome.webdriver.WebDriver (session="133f630a32182bfa65bdb3645a90d2ae")>
17:45:05.379697 line        43                 browser.get(url)
17:45:12.718337 line        44                 out_html = browser.page_source
Modified var:.. out_html = '<html><head><script async="" src="http://nt-dow...&amp;random_id=0.650096781810654"></body></html>'
17:45:12.767294 line        46                 tree = html.fromstring(out_html)
Modified var:.. tree = <Element html at 0x1bb6f6d6368>
17:45:12.786282 line        51                 product_title_xpath = tree.xpath('//*[@id="product_info"]/div/h1/text()')
Modified var:.. product_title_xpath = ['\n                    ', '\n                  ...    刺杀骑士团长：村上春树暌违7年新长篇，林少华激赏翻译，书名又译骑士团长杀人事件    ']
17:45:12.795276 line        52                 product_title = ''.join(product_title_xpath).strip()
Modified var:.. product_title = '刺杀骑士团长：村上春树暌违7年新长篇，林少华激赏翻译，书名又译骑士团长杀人事件'
17:45:12.801273 line        53                 print('书本名称：',product_title)
17:45:12.808271 line        59                 product_author_xpath = tree.xpath('//*[@id="product_info"]/div/span[@dd_name="作者"]/a//text()')
17:45:12.815266 line        61                 if product_author_xpath:
17:45:12.818265 line        62                         product_author = ' '.join(product_author_xpath)
17:45:12.824261 line        63                         print('作者：',product_author)
17:45:12.828258 line        68                 publishing_company_name_xpath = tree.xpath('//*[@id="product_info"]/div/span[@dd_name="出版社"]/a//text()')
17:45:12.835254 line        69                 if publishing_company_name_xpath:
17:45:12.845249 line        70                     publishing_company_name = ''.join(publishing_company_name_xpath)
17:45:12.849246 line        71                     print('出版社：',publishing_company_name)
17:45:12.854244 line        76                 publish_date_xpath = tree.xpath('//*[@id="product_info"]/div/span//text()')
Modified var:.. publish_date_xpath = ['作者:[日]', '村上春树', ' 著，', '林少华', ' 译', '出版社:', '上海译文出版社', '出版时间:2018年03月\xa0']
17:45:12.862239 line        78                 if publish_date_xpath:
17:45:12.867235 line        79                     for pub_list in publish_date_xpath:
Modified var:.. pub_list = '作者:[日]'
17:45:12.875232 line        80                         if "出版时间" in pub_list:
17:45:12.882227 line        79                     for pub_list in publish_date_xpath:
Modified var:.. pub_list = '村上春树'
17:45:12.889225 line        80                         if "出版时间" in pub_list:
17:45:12.897219 line        79                     for pub_list in publish_date_xpath:
Modified var:.. pub_list = ' 著，'
17:45:12.901216 line        80                         if "出版时间" in pub_list:
17:45:12.910212 line        79                     for pub_list in publish_date_xpath:
Modified var:.. pub_list = '林少华'
17:45:12.913209 line        80                         if "出版时间" in pub_list:
17:45:12.916209 line        79                     for pub_list in publish_date_xpath:
Modified var:.. pub_list = ' 译'
17:45:12.922207 line        80                         if "出版时间" in pub_list:
17:45:12.928201 line        79                     for pub_list in publish_date_xpath:
Modified var:.. pub_list = '出版社:'
17:45:12.932200 line        80                         if "出版时间" in pub_list:
17:45:12.935197 line        79                     for pub_list in publish_date_xpath:
Modified var:.. pub_list = '上海译文出版社'
17:45:12.939196 line        80                         if "出版时间" in pub_list:
17:45:12.944192 line        79                     for pub_list in publish_date_xpath:
Modified var:.. pub_list = '出版时间:2018年03月\xa0'
17:45:12.947190 line        80                         if "出版时间" in pub_list:
17:45:12.951189 line        81                             publish_date = pub_list.split('出版时间:')[-1].split('\xa0')[0]
Modified var:.. publish_date = '2018年03月'
17:45:12.958184 line        82                             print('出版时间:',publish_date)
17:45:12.963181 line        79                     for pub_list in publish_date_xpath:
17:45:12.966178 line        87                 price_xpath = tree.xpath('//*[@id="pc-price"]/div/div/p/text()')
Modified var:.. price_xpath = ['\n                    ', '\n                    ', '\n                ', '78.40']
17:45:12.971176 line        88                 if price_xpath:
17:45:12.976175 line        89                     price = price_xpath[-1]
Modified var:.. price = '78.40'
17:45:12.979171 line        90                     print('价格：',price)
17:45:12.983169 line        95                 isbn_no_xpath = tree.xpath('//*[@id="detail_all"]/div/ul/li/text()')
Modified var:.. isbn_no_xpath = ['开 本：32开', '纸 张：胶版纸', '包 装：平装-胶订', '是否套装：是', '国际标准书号ISBN：9787532776580']
17:45:12.993166 line        96                 if isbn_no_xpath:
17:45:12.997163 line        97                     for isbn_no_li in isbn_no_xpath:
Modified var:.. isbn_no_li = '开 本：32开'
17:45:13.000161 line        98                         if "ISBN" in isbn_no_li:
17:45:13.006158 line        97                     for isbn_no_li in isbn_no_xpath:
Modified var:.. isbn_no_li = '纸 张：胶版纸'
17:45:13.009156 line        98                         if "ISBN" in isbn_no_li:
17:45:13.013153 line        97                     for isbn_no_li in isbn_no_xpath:
Modified var:.. isbn_no_li = '包 装：平装-胶订'
17:45:13.018151 line        98                         if "ISBN" in isbn_no_li:
17:45:13.029142 line        97                     for isbn_no_li in isbn_no_xpath:
Modified var:.. isbn_no_li = '是否套装：是'
17:45:13.033141 line        98                         if "ISBN" in isbn_no_li:
17:45:13.046132 line        97                     for isbn_no_li in isbn_no_xpath:
Modified var:.. isbn_no_li = '国际标准书号ISBN：9787532776580'
17:45:13.049132 line        98                         if "ISBN" in isbn_no_li:
17:45:13.063125 line        99                             isbn_new_no = isbn_no_li.split('国际标准书号ISBN：')[-1]
Modified var:.. isbn_new_no = '9787532776580'
17:45:13.067125 line       100                             print('ISBN号:',isbn_new_no)
17:45:13.078118 line        97                     for isbn_no_li in isbn_no_xpath:
17:45:13.081114 line       106                 introduce_str = ''.join(tree.xpath('//*[@id="detail"]/div[@id="content"]/div[@class="descrip"]//text()'))
Modified var:.. introduce_str = '“我”36岁，美术科班出身，原本爱好抽象画，多年来为了养家糊口成为专业肖像画家。结婚六周年纪念...”与“长面人”、现实世界与隐喻世界……村上春树用他擅长的层层剥开的写法，将读者步步引入奇妙之境。'
17:45:13.091119 line       108                 pre = re.compile('>(.*)<')
17:45:13.096106 line       109                 retouve_str = ''.join(pre.findall(introduce_str))
17:45:13.100104 line       111                 if retouve_str:
17:45:13.110099 line       114                     content_introduce = introduce_str.strip()
Modified var:.. content_introduce = '“我”36岁，美术科班出身，原本爱好抽象画，多年来为了养家糊口成为专业肖像画家。结婚六周年纪念...”与“长面人”、现实世界与隐喻世界……村上春树用他擅长的层层剥开的写法，将读者步步引入奇妙之境。'
17:45:13.115095 line       115                 print('内容简介:', content_introduce)
17:45:13.124089 line       121                 author_introduce_str = ''.join(
17:45:13.130086 line       122                     tree.xpath('//*[@id="detail"]/div[@id="authorIntroduction"]/div[@class="descrip"]//text()'))
Modified var:.. author_introduce_str = '村上春树（MURAKAMI HARUKI）1949年生于京都。毕业于早稻田大学第一文学部。19...小说奖、2009年（以色列）耶路撒冷文学奖、2011年加泰罗尼亚国际奖、2016年安徒生文学奖。'
17:45:13.136081 line       124                 retouve_str = ''.join(pre.findall(author_introduce_str))
17:45:13.144078 line       125                 if retouve_str:
17:45:13.147076 line       128                     author_introduce = author_introduce_str.strip()
Modified var:.. author_introduce = '村上春树（MURAKAMI HARUKI）1949年生于京都。毕业于早稻田大学第一文学部。19...小说奖、2009年（以色列）耶路撒冷文学奖、2011年加泰罗尼亚国际奖、2016年安徒生文学奖。'
17:45:13.150074 line       129                 print('书名作者简介:', author_introduce)
17:45:13.158070 line       134                 abstract_info_span = tree.xpath('//*[@id="detail"]/div[@id="abstract"]/div[@class="descrip"]//text()')
Modified var:.. abstract_info_span = ['\n', '\n', '\n', '\n', '\n《刺杀骑士团长》是村上春树七年磨一剑的突...也是我*次让家庭生活出现在我的小说里。 ”——村上春树', '又名《骑士团长杀人事件》\xa0']
17:45:13.164067 line       135                 abstract_info = ''.join(abstract_info_span).strip()
Modified var:.. abstract_info = '《刺杀骑士团长》是村上春树七年磨一剑的突破之作。一幅藏匿于阁楼的惊世画作串起战争年代挥之不去的...现在我的结局里。这也是我*次让家庭生活出现在我的小说里。 ”——村上春树又名《骑士团长杀人事件》'
17:45:13.169064 line       136                 print('编辑推荐：',abstract_info)
17:45:13.177059 line       138                 abstract_info_pic = ''.join(tree.xpath('//*[@id="detail"]/div[@id="abstract"]/div[@class="descrip"]//*/@src'))
Modified var:.. abstract_info_pic = 'http://media1.ddimg.cn/2018/2/5/2018020510215227861.mp4'
17:45:13.184054 line       139                 print('编辑推荐长图：', abstract_info_pic)
17:45:13.192050 line       144                 feature_pic = ''.join(tree.xpath('//*[@id="detail"]/div[@id="feature"]/div[@class="descrip"]//*/@src'))
Modified var:.. feature_pic = 'http://img54.ddimg.cn/99999990002569454.jpg'
17:45:13.197046 line       145                 if not feature_pic:
17:45:13.201045 line       148                 print('产品特色长图：', feature_pic)
17:45:13.205044 line       153                 attachImage = ''.join(tree.xpath('//*[@id="detail"]/div[@id="attachImage"]/div[@class="descrip"]//*/img/@data-original'))
17:45:13.211038 line       154                 if not attachImage:
17:45:13.215037 line       155                     attachImage = ''.join(tree.xpath(
17:45:13.218035 line       156                     '//*[@id="detail"]/div[@id="attachImage"]/div[@class="descrip"]//*/img/@src'))
17:45:13.233026 line       158                 print('书摘插画：', attachImage)
17:45:13.240025 line       167                 """
Modified var:.. tbook_sql = " REPLACE INTO `t_book` \n                      ...b_20.jpg',now())\n            \n                "
17:45:13.247020 line       169                 sefl.sql_cursor.query(tbook_sql)
17:45:13.259012 line        31         for link in hrefs:
Modified var:.. link = ('f533b98a12b011eba9b5507b9d245e55', 'http://pro...http://img3m2.ddimg.cn/44/14/28547882-1_b_3.jpg')
17:45:13.264011 line        33             print('')
17:45:13.269006 line        34             printDarkBlue(f"开始读取详情数据，加载缓存。。。。。\n",FOREGROUND_BLUE)
17:45:13.276002 line        35             url = f'{link[1]}'
Modified var:.. url = 'http://product.dangdang.com/28547882.html'
17:45:13.279001 line        36             try:
17:45:13.283997 line        38                 chrome_opts = webdriver.ChromeOptions()
Modified var:.. chrome_opts = <selenium.webdriver.chrome.options.Options object at 0x000001BB6F6FDB88>
17:45:13.291993 line        39                 chrome_opts.add_argument("--headless")
17:45:13.297989 line        41                 browser = webdriver.Chrome(options=chrome_opts)
Modified var:.. browser = <selenium.webdriver.chrome.webdriver.WebDriver (session="d47e10e8f7d4b239952b4769a3e713e1")>
17:45:17.181444 line        43                 browser.get(url)
17:45:28.133560 line        44                 out_html = browser.page_source
Modified var:.. out_html = '<html><head><script async="" src="http://nt-dow...mp;random_id=0.08350366808702847"></body></html>'
17:45:28.176535 line        46                 tree = html.fromstring(out_html)
Modified var:.. tree = <Element html at 0x1bb6f6f8e08>
17:45:28.194523 line        51                 product_title_xpath = tree.xpath('//*[@id="product_info"]/div/h1/text()')
Modified var:.. product_title_xpath = ['\n                    ', '\n                  ...   在轮下（村上春树爱不释手的读物，他的文字最符合年轻人向往的“诗和远方”的气质。）    ']
17:45:28.200520 line        52                 product_title = ''.join(product_title_xpath).strip()
Modified var:.. product_title = '在轮下（村上春树爱不释手的读物，他的文字最符合年轻人向往的“诗和远方”的气质。）'
17:45:28.205520 line        53                 print('书本名称：',product_title)
17:45:28.210515 line        59                 product_author_xpath = tree.xpath('//*[@id="product_info"]/div/span[@dd_name="作者"]/a//text()')
Modified var:.. product_author_xpath = ['赫尔曼·黑塞', '张文明', '知书达礼']
17:45:28.215511 line        61                 if product_author_xpath:
17:45:28.220510 line        62                         product_author = ' '.join(product_author_xpath)
Modified var:.. product_author = '赫尔曼·黑塞 张文明 知书达礼'
17:45:28.224508 line        63                         print('作者：',product_author)
17:45:28.229504 line        68                 publishing_company_name_xpath = tree.xpath('//*[@id="product_info"]/div/span[@dd_name="出版社"]/a//text()')
Modified var:.. publishing_company_name_xpath = ['台海出版社']
17:45:28.234501 line        69                 if publishing_company_name_xpath:
17:45:28.241497 line        70                     publishing_company_name = ''.join(publishing_company_name_xpath)
Modified var:.. publishing_company_name = '台海出版社'
17:45:28.244497 line        71                     print('出版社：',publishing_company_name)
17:45:28.248494 line        76                 publish_date_xpath = tree.xpath('//*[@id="product_info"]/div/span//text()')
Modified var:.. publish_date_xpath = ['作者:(德) ', '赫尔曼·黑塞', '著 ', '张文明', '译 ', '知书达礼', ' 出品', '出版社:', '台海出版社', '出版时间:2020年05月\xa0']
17:45:28.255490 line        78                 if publish_date_xpath:
17:45:28.261489 line        79                     for pub_list in publish_date_xpath:
Modified var:.. pub_list = '作者:(德) '
17:45:28.264484 line        80                         if "出版时间" in pub_list:
17:45:28.267482 line        79                     for pub_list in publish_date_xpath:
Modified var:.. pub_list = '赫尔曼·黑塞'
17:45:28.277477 line        80                         if "出版时间" in pub_list:
17:45:28.284473 line        79                     for pub_list in publish_date_xpath:
Modified var:.. pub_list = '著 '
17:45:28.295466 line        80                         if "出版时间" in pub_list:
17:45:28.309459 line        79                     for pub_list in publish_date_xpath:
Modified var:.. pub_list = '张文明'
17:45:28.312456 line        80                         if "出版时间" in pub_list:
17:45:28.316454 line        79                     for pub_list in publish_date_xpath:
Modified var:.. pub_list = '译 '
17:45:28.322452 line        80                         if "出版时间" in pub_list:
17:45:28.327448 line        79                     for pub_list in publish_date_xpath:
Modified var:.. pub_list = '知书达礼'
17:45:28.330446 line        80                         if "出版时间" in pub_list:
17:45:28.334444 line        79                     for pub_list in publish_date_xpath:
Modified var:.. pub_list = ' 出品'
17:45:28.338444 line        80                         if "出版时间" in pub_list:
17:45:28.343438 line        79                     for pub_list in publish_date_xpath:
Modified var:.. pub_list = '出版社:'
17:45:28.346436 line        80                         if "出版时间" in pub_list:
17:45:28.350435 line        79                     for pub_list in publish_date_xpath:
Modified var:.. pub_list = '台海出版社'
17:45:28.360431 line        80                         if "出版时间" in pub_list:
17:45:28.364427 line        79                     for pub_list in publish_date_xpath:
Modified var:.. pub_list = '出版时间:2020年05月\xa0'
17:45:28.367425 line        80                         if "出版时间" in pub_list:
17:45:28.375422 line        81                             publish_date = pub_list.split('出版时间:')[-1].split('\xa0')[0]
Modified var:.. publish_date = '2020年05月'
17:45:28.379418 line        82                             print('出版时间:',publish_date)
17:45:28.383417 line        79                     for pub_list in publish_date_xpath:
17:45:28.389414 line        87                 price_xpath = tree.xpath('//*[@id="pc-price"]/div/div/p/text()')
Modified var:.. price_xpath = ['\n                    ', '\n                    ', '\n                ', '9.90']
17:45:28.396408 line        88                 if price_xpath:
17:45:28.400406 line        89                     price = price_xpath[-1]
Modified var:.. price = '9.90'
17:45:28.405406 line        90                     print('价格：',price)
17:45:28.410400 line        95                 isbn_no_xpath = tree.xpath('//*[@id="detail_all"]/div/ul/li/text()')
Modified var:.. isbn_no_xpath = ['开 本：32开', '纸 张：胶版纸', '包 装：平装-胶订', '是否套装：否', '国际标准书号ISBN：9787516825662']
17:45:28.416399 line        96                 if isbn_no_xpath:
17:45:28.423394 line        97                     for isbn_no_li in isbn_no_xpath:
Modified var:.. isbn_no_li = '开 本：32开'
17:45:28.427392 line        98                         if "ISBN" in isbn_no_li:
17:45:28.430390 line        97                     for isbn_no_li in isbn_no_xpath:
Modified var:.. isbn_no_li = '纸 张：胶版纸'
17:45:28.433388 line        98                         if "ISBN" in isbn_no_li:
17:45:28.441385 line        97                     for isbn_no_li in isbn_no_xpath:
Modified var:.. isbn_no_li = '包 装：平装-胶订'
17:45:28.444381 line        98                         if "ISBN" in isbn_no_li:
17:45:28.448378 line        97                     for isbn_no_li in isbn_no_xpath:
Modified var:.. isbn_no_li = '是否套装：否'
17:45:28.450377 line        98                         if "ISBN" in isbn_no_li:
17:45:28.457375 line        97                     for isbn_no_li in isbn_no_xpath:
Modified var:.. isbn_no_li = '国际标准书号ISBN：9787516825662'
17:45:28.460372 line        98                         if "ISBN" in isbn_no_li:
17:45:28.463372 line        99                             isbn_new_no = isbn_no_li.split('国际标准书号ISBN：')[-1]
Modified var:.. isbn_new_no = '9787516825662'
17:45:28.466368 line       100                             print('ISBN号:',isbn_new_no)
17:45:28.476364 line        97                     for isbn_no_li in isbn_no_xpath:
17:45:28.479361 line       106                 introduce_str = ''.join(tree.xpath('//*[@id="detail"]/div[@id="content"]/div[@class="descrip"]//text()'))
Modified var:.. introduce_str = '这是一部控诉德国旧的教育制度的小说，具有浓厚的自传色彩。\n\xa0\n故事的主角，名叫汉斯，...业，只得返回家乡当钳工为生。\n社会的歧视与生活的失意，使汉斯觉得仿佛跌在无情而庞大的车轮下……'
17:45:28.484359 line       108                 pre = re.compile('>(.*)<')
17:45:28.490355 line       109                 retouve_str = ''.join(pre.findall(introduce_str))
17:45:28.493355 line       111                 if retouve_str:
17:45:28.495351 line       114                     content_introduce = introduce_str.strip()
Modified var:.. content_introduce = '这是一部控诉德国旧的教育制度的小说，具有浓厚的自传色彩。\n\xa0\n故事的主角，名叫汉斯，...业，只得返回家乡当钳工为生。\n社会的歧视与生活的失意，使汉斯觉得仿佛跌在无情而庞大的车轮下……'
17:45:28.498350 line       115                 print('内容简介:', content_introduce)
17:45:28.506348 line       121                 author_introduce_str = ''.join(
17:45:28.510343 line       122                     tree.xpath('//*[@id="detail"]/div[@id="authorIntroduction"]/div[@class="descrip"]//text()'))
Modified var:.. author_introduce_str = '\xa0 \xa0 \xa0 \xa0赫尔曼·黑塞，德国作家，诗人。出生在德国，1919年迁居...、隐逸的诗人。作品多以小市民生活为题材，表现对过去时代的留恋，也反映了同时期人们的一些绝望心情。'
17:45:28.515341 line       124                 retouve_str = ''.join(pre.findall(author_introduce_str))
17:45:28.521339 line       125                 if retouve_str:
17:45:28.525337 line       128                     author_introduce = author_introduce_str.strip()
Modified var:.. author_introduce = '赫尔曼·黑塞，德国作家，诗人。出生在德国，1919年迁居瑞士，1923年46岁入瑞士籍。黑塞一...、隐逸的诗人。作品多以小市民生活为题材，表现对过去时代的留恋，也反映了同时期人们的一些绝望心情。'
17:45:28.528334 line       129                 print('书名作者简介:', author_introduce)
17:45:28.532332 line       134                 abstract_info_span = tree.xpath('//*[@id="detail"]/div[@id="abstract"]/div[@class="descrip"]//text()')
Modified var:.. abstract_info_span = ['赫尔曼·黑塞，德国作家、诗人、评论家', '\n', '曾被雨果称为“德国浪漫派*后一位骑士...它们一方面具有高度的创意和深刻的洞见，一方面象征古典的人道理想和高尚的风格。”', '\xa0']
17:45:28.540327 line       135                 abstract_info = ''.join(abstract_info_span).strip()
Modified var:.. abstract_info = '赫尔曼·黑塞，德国作家、诗人、评论家\n曾被雨果称为“德国浪漫派*后一位骑士”\n一个狂揽多项...些灵思盎然的作品，它们一方面具有高度的创意和深刻的洞见，一方面象征古典的人道理想和高尚的风格。”'
17:45:28.544324 line       136                 print('编辑推荐：',abstract_info)
17:45:28.548322 line       138                 abstract_info_pic = ''.join(tree.xpath('//*[@id="detail"]/div[@id="abstract"]/div[@class="descrip"]//*/@src'))
Modified var:.. abstract_info_pic = ''
17:45:28.558317 line       139                 print('编辑推荐长图：', abstract_info_pic)
17:45:28.562315 line       144                 feature_pic = ''.join(tree.xpath('//*[@id="detail"]/div[@id="feature"]/div[@class="descrip"]//*/@src'))
Modified var:.. feature_pic = 'http://img57.ddimg.cn/99999990146328647.jpg'
17:45:28.568310 line       145                 if not feature_pic:
17:45:28.572309 line       148                 print('产品特色长图：', feature_pic)
17:45:28.575306 line       153                 attachImage = ''.join(tree.xpath('//*[@id="detail"]/div[@id="attachImage"]/div[@class="descrip"]//*/img/@data-original'))
17:45:28.581302 line       154                 if not attachImage:
17:45:28.583302 line       155                     attachImage = ''.join(tree.xpath(
17:45:28.591299 line       156                     '//*[@id="detail"]/div[@id="attachImage"]/div[@class="descrip"]//*/img/@src'))
17:45:28.597293 line       158                 print('书摘插画：', attachImage)
17:45:28.600292 line       167                 """
Modified var:.. tbook_sql = " REPLACE INTO `t_book` \n                      ..._b_3.jpg',now())\n            \n                "
17:45:28.604291 line       169                 sefl.sql_cursor.query(tbook_sql)
17:45:28.614283 line        31         for link in hrefs:
Modified var:.. link = ('f53713e712b011eba9b5507b9d245e55', 'http://pro...http://img3m8.ddimg.cn/76/20/23346058-1_b_7.jpg')
17:45:28.617283 line        33             print('')
17:45:28.623281 line        34             printDarkBlue(f"开始读取详情数据，加载缓存。。。。。\n",FOREGROUND_BLUE)
17:45:28.628277 line        35             url = f'{link[1]}'
Modified var:.. url = 'http://product.dangdang.com/23346058.html'
17:45:28.631274 line        36             try:
17:45:28.635272 line        38                 chrome_opts = webdriver.ChromeOptions()
Modified var:.. chrome_opts = <selenium.webdriver.chrome.options.Options object at 0x000001BB6F6ED1C8>
17:45:28.640269 line        39                 chrome_opts.add_argument("--headless")
17:45:28.644268 line        41                 browser = webdriver.Chrome(options=chrome_opts)
Modified var:.. browser = <selenium.webdriver.chrome.webdriver.WebDriver (session="a001bdaf140d52c2e5db17ca2a219c2e")>
17:45:32.729056 line        43                 browser.get(url)
17:45:50.519835 line        44                 out_html = browser.page_source
Modified var:.. out_html = '<html><head><script async="" src="http://nt-dow...amp;random_id=0.7436607390890149"></body></html>'
17:45:50.555815 line        46                 tree = html.fromstring(out_html)
Modified var:.. tree = <Element html at 0x1bb6f7560e8>
17:45:50.571805 line        51                 product_title_xpath = tree.xpath('//*[@id="product_info"]/div/h1/text()')
Modified var:.. product_title_xpath = ['\n                    ', '\n                                        没有色彩的多崎作和他的巡礼之年    ']
17:45:50.579800 line        52                 product_title = ''.join(product_title_xpath).strip()
Modified var:.. product_title = '没有色彩的多崎作和他的巡礼之年'
17:45:50.583797 line        53                 print('书本名称：',product_title)
17:45:50.592792 line        59                 product_author_xpath = tree.xpath('//*[@id="product_info"]/div/span[@dd_name="作者"]/a//text()')
Modified var:.. product_author_xpath = ['村上春树', '新经典']
17:45:50.599802 line        61                 if product_author_xpath:
17:45:50.604786 line        62                         product_author = ' '.join(product_author_xpath)
Modified var:.. product_author = '村上春树 新经典'
17:45:50.608783 line        63                         print('作者：',product_author)
17:45:50.612782 line        68                 publishing_company_name_xpath = tree.xpath('//*[@id="product_info"]/div/span[@dd_name="出版社"]/a//text()')
Modified var:.. publishing_company_name_xpath = ['南海出版公司']
17:45:50.619777 line        69                 if publishing_company_name_xpath:
17:45:50.623774 line        70                     publishing_company_name = ''.join(publishing_company_name_xpath)
Modified var:.. publishing_company_name = '南海出版公司'
17:45:50.626772 line        71                     print('出版社：',publishing_company_name)
17:45:50.629773 line        76                 publish_date_xpath = tree.xpath('//*[@id="product_info"]/div/span//text()')
Modified var:.. publish_date_xpath = ['作者:(日)', '村上春树', ' 著，', '新经典', ' 出品', '出版社:', '南海出版公司', '出版时间:2013年10月\xa0']
17:45:50.637769 line        78                 if publish_date_xpath:
17:45:50.642763 line        79                     for pub_list in publish_date_xpath:
Modified var:.. pub_list = '作者:(日)'
17:45:50.645761 line        80                         if "出版时间" in pub_list:
17:45:50.649761 line        79                     for pub_list in publish_date_xpath:
Modified var:.. pub_list = '村上春树'
17:45:50.653757 line        80                         if "出版时间" in pub_list:
17:45:50.657757 line        79                     for pub_list in publish_date_xpath:
Modified var:.. pub_list = ' 著，'
17:45:50.660753 line        80                         if "出版时间" in pub_list:
17:45:50.664750 line        79                     for pub_list in publish_date_xpath:
Modified var:.. pub_list = '新经典'
17:45:50.666764 line        80                         if "出版时间" in pub_list:
17:45:50.674747 line        79                     for pub_list in publish_date_xpath:
Modified var:.. pub_list = ' 出品'
17:45:50.677743 line        80                         if "出版时间" in pub_list:
17:45:50.680757 line        79                     for pub_list in publish_date_xpath:
Modified var:.. pub_list = '出版社:'
17:45:50.683740 line        80                         if "出版时间" in pub_list:
17:45:50.687738 line        79                     for pub_list in publish_date_xpath:
Modified var:.. pub_list = '南海出版公司'
17:45:50.691761 line        80                         if "出版时间" in pub_list:
17:45:50.695759 line        79                     for pub_list in publish_date_xpath:
Modified var:.. pub_list = '出版时间:2013年10月\xa0'
17:45:50.698734 line        80                         if "出版时间" in pub_list:
17:45:50.705730 line        81                             publish_date = pub_list.split('出版时间:')[-1].split('\xa0')[0]
Modified var:.. publish_date = '2013年10月'
17:45:50.708725 line        82                             print('出版时间:',publish_date)
17:45:50.712723 line        79                     for pub_list in publish_date_xpath:
17:45:50.716722 line        87                 price_xpath = tree.xpath('//*[@id="pc-price"]/div/div/p/text()')
Modified var:.. price_xpath = ['\n                    ', '\n                    ', '\n                ', '39.50']
17:45:50.726715 line        88                 if price_xpath:
17:45:50.730713 line        89                     price = price_xpath[-1]
Modified var:.. price = '39.50'
17:45:50.742707 line        90                     print('价格：',price)
17:45:50.748703 line        95                 isbn_no_xpath = tree.xpath('//*[@id="detail_all"]/div/ul/li/text()')
Modified var:.. isbn_no_xpath = ['开 本：大32开', '纸 张：胶版纸', '包 装：精装', '是否套装：否', '国际标准书号ISBN：9787544268417']
17:45:50.759696 line        96                 if isbn_no_xpath:
17:45:50.764693 line        97                     for isbn_no_li in isbn_no_xpath:
Modified var:.. isbn_no_li = '开 本：大32开'
17:45:50.767692 line        98                         if "ISBN" in isbn_no_li:
17:45:50.772689 line        97                     for isbn_no_li in isbn_no_xpath:
Modified var:.. isbn_no_li = '纸 张：胶版纸'
17:45:50.776686 line        98                         if "ISBN" in isbn_no_li:
17:45:50.779684 line        97                     for isbn_no_li in isbn_no_xpath:
Modified var:.. isbn_no_li = '包 装：精装'
17:45:50.782684 line        98                         if "ISBN" in isbn_no_li:
17:45:50.791678 line        97                     for isbn_no_li in isbn_no_xpath:
Modified var:.. isbn_no_li = '是否套装：否'
17:45:50.794677 line        98                         if "ISBN" in isbn_no_li:
17:45:50.797675 line        97                     for isbn_no_li in isbn_no_xpath:
Modified var:.. isbn_no_li = '国际标准书号ISBN：9787544268417'
17:45:50.802674 line        98                         if "ISBN" in isbn_no_li:
17:45:50.807674 line        99                             isbn_new_no = isbn_no_li.split('国际标准书号ISBN：')[-1]
Modified var:.. isbn_new_no = '9787544268417'
17:45:50.810668 line       100                             print('ISBN号:',isbn_new_no)
17:45:50.814665 line        97                     for isbn_no_li in isbn_no_xpath:
17:45:50.817663 line       106                 introduce_str = ''.join(tree.xpath('//*[@id="detail"]/div[@id="content"]/div[@class="descrip"]//text()'))
Modified var:.. introduce_str = '\u3000\u3000《没有色彩的多崎作和他的巡礼之年》是村上春树*长篇小说，也是他所有作品...块拼图集齐，谜底揭开，十六年前的秘密、十六年间发生的变化，以及十六年后的结局，都令人震惊、伤感。'
17:45:50.826657 line       108                 pre = re.compile('>(.*)<')
17:45:50.830655 line       109                 retouve_str = ''.join(pre.findall(introduce_str))
17:45:50.832654 line       111                 if retouve_str:
17:45:50.837653 line       114                     content_introduce = introduce_str.strip()
Modified var:.. content_introduce = '《没有色彩的多崎作和他的巡礼之年》是村上春树*长篇小说，也是他所有作品中“*不一样”的小说，被...块拼图集齐，谜底揭开，十六年前的秘密、十六年间发生的变化，以及十六年后的结局，都令人震惊、伤感。'
17:45:50.841649 line       115                 print('内容简介:', content_introduce)
17:45:50.845647 line       121                 author_introduce_str = ''.join(
17:45:50.847646 line       122                     tree.xpath('//*[@id="detail"]/div[@id="authorIntroduction"]/div[@class="descrip"]//text()'))
Modified var:.. author_introduce_str = '\u3000\u3000村上春树\u3000\u3000日本著名作家。生于1949年。29岁开...《老师的提包》、《1Q84》、《当我谈跑步时，我谈些什么》、《无比芜杂的心绪》、《天黑以后》等。'
17:45:50.854870 line       124                 retouve_str = ''.join(pre.findall(author_introduce_str))
17:45:50.859867 line       125                 if retouve_str:
17:45:50.862865 line       128                     author_introduce = author_introduce_str.strip()
Modified var:.. author_introduce = '村上春树\u3000\u3000日本著名作家。生于1949年。29岁开始写作，处女作《且听风吟...《老师的提包》、《1Q84》、《当我谈跑步时，我谈些什么》、《无比芜杂的心绪》、《天黑以后》等。'
17:45:50.865863 line       129                 print('书名作者简介:', author_introduce)
17:45:50.870863 line       134                 abstract_info_span = tree.xpath('//*[@id="detail"]/div[@id="abstract"]/div[@class="descrip"]//text()')
Modified var:.. abstract_info_span = [' ', ' ', '\n', ' ', '关于村上春树', '↓', '↓', '\n', ...成长，伤痛就得大一点，伤口就得深一点。村上春树', '\n', ' ', ' ', '\xa0']
17:45:50.879855 line       135                 abstract_info = ''.join(abstract_info_span).strip()
Modified var:.. abstract_info = '关于村上春树↓↓\n 《袭击面包店》\xa0村上春树反思之作：当你饥肠辘辘的时候，你*想做些什...想隐藏它忘却它把心门关起来。这是一个成长的故事。要成长，伤痛就得大一点，伤口就得深一点。村上春树'
17:45:50.883854 line       136                 print('编辑推荐：',abstract_info)
17:45:50.888852 line       138                 abstract_info_pic = ''.join(tree.xpath('//*[@id="detail"]/div[@id="abstract"]/div[@class="descrip"]//*/@src'))
Modified var:.. abstract_info_pic = 'http://img32.ddimg.cn/imgother/201411/27_1/201411271429351972.jpg'
17:45:50.894846 line       139                 print('编辑推荐长图：', abstract_info_pic)
17:45:50.897845 line       144                 feature_pic = ''.join(tree.xpath('//*[@id="detail"]/div[@id="feature"]/div[@class="descrip"]//*/@src'))
Modified var:.. feature_pic = ''
17:45:50.906841 line       145                 if not feature_pic:
17:45:50.910839 line       146                     feature_pic = ''.join(
17:45:50.913838 line       147                         tree.xpath('//*[@id="detail"]/div[@id="feature"]/div[@class="descrip"]//*/@data-original'))
17:45:50.920833 line       148                 print('产品特色长图：', feature_pic)
17:45:50.924830 line       153                 attachImage = ''.join(tree.xpath('//*[@id="detail"]/div[@id="attachImage"]/div[@class="descrip"]//*/img/@data-original'))
Modified var:.. attachImage = 'http://img38.ddimg.cn/imgother1/76/20/23346058_1265030.jpg'
17:45:50.928826 line       154                 if not attachImage:
17:45:50.932826 line       158                 print('书摘插画：', attachImage)
17:45:50.937824 line       167                 """
Modified var:.. tbook_sql = " REPLACE INTO `t_book` \n                      ..._b_7.jpg',now())\n            \n                "
17:45:50.940821 line       169                 sefl.sql_cursor.query(tbook_sql)
17:45:50.950814 line        31         for link in hrefs:
Modified var:.. link = ('f53a3bfb12b011eba9b5507b9d245e55', 'http://pro...http://img3m2.ddimg.cn/53/22/25309502-1_b_2.jpg')
17:45:50.954816 line        33             print('')
17:45:50.959810 line        34             printDarkBlue(f"开始读取详情数据，加载缓存。。。。。\n",FOREGROUND_BLUE)
17:45:50.961808 line        35             url = f'{link[1]}'
Modified var:.. url = 'http://product.dangdang.com/25309502.html'
17:45:50.964807 line        36             try:
17:45:50.968805 line        38                 chrome_opts = webdriver.ChromeOptions()
Modified var:.. chrome_opts = <selenium.webdriver.chrome.options.Options object at 0x000001BB6F711F48>
17:45:50.972803 line        39                 chrome_opts.add_argument("--headless")
17:45:50.977801 line        41                 browser = webdriver.Chrome(options=chrome_opts)
Modified var:.. browser = <selenium.webdriver.chrome.webdriver.WebDriver (session="4335c2b37e16e6b20f862be422f43cbb")>
17:45:55.611653 line        43                 browser.get(url)
17:46:09.277194 line        44                 out_html = browser.page_source
Modified var:.. out_html = '<html><head><script async="" src="http://nt-dow...mp;random_id=0.42744149242526275"></body></html>'
17:46:09.311175 line        46                 tree = html.fromstring(out_html)
Modified var:.. tree = <Element html at 0x1bb6f6ff868>
17:46:09.329165 line        51                 product_title_xpath = tree.xpath('//*[@id="product_info"]/div/h1/text()')
Modified var:.. product_title_xpath = ['\n                    ', '\n                                        寻羊冒险记（2018年新版，村上春树畅销名作）    ']
17:46:09.336161 line        52                 product_title = ''.join(product_title_xpath).strip()
Modified var:.. product_title = '寻羊冒险记（2018年新版，村上春树畅销名作）'
17:46:09.342158 line        53                 print('书本名称：',product_title)
17:46:09.346155 line        59                 product_author_xpath = tree.xpath('//*[@id="product_info"]/div/span[@dd_name="作者"]/a//text()')
Modified var:.. product_author_xpath = ['村上春树']
17:46:09.350152 line        61                 if product_author_xpath:
17:46:09.360147 line        62                         product_author = ' '.join(product_author_xpath)
Modified var:.. product_author = '村上春树'
17:46:09.364144 line        63                         print('作者：',product_author)
17:46:09.368142 line        68                 publishing_company_name_xpath = tree.xpath('//*[@id="product_info"]/div/span[@dd_name="出版社"]/a//text()')
Modified var:.. publishing_company_name_xpath = ['上海译文出版社']
17:46:09.376138 line        69                 if publishing_company_name_xpath:
17:46:09.380136 line        70                     publishing_company_name = ''.join(publishing_company_name_xpath)
Modified var:.. publishing_company_name = '上海译文出版社'
17:46:09.383134 line        71                     print('出版社：',publishing_company_name)
17:46:09.393128 line        76                 publish_date_xpath = tree.xpath('//*[@id="product_info"]/div/span//text()')
Modified var:.. publish_date_xpath = ['作者:', '村上春树', '出版社:', '上海译文出版社', '出版时间:2018年07月\xa0']
17:46:09.398126 line        78                 if publish_date_xpath:
17:46:09.403123 line        79                     for pub_list in publish_date_xpath:
Modified var:.. pub_list = '作者:'
17:46:09.408119 line        80                         if "出版时间" in pub_list:
17:46:09.411117 line        79                     for pub_list in publish_date_xpath:
Modified var:.. pub_list = '村上春树'
17:46:09.414116 line        80                         if "出版时间" in pub_list:
17:46:09.420113 line        79                     for pub_list in publish_date_xpath:
Modified var:.. pub_list = '出版社:'
17:46:09.426108 line        80                         if "出版时间" in pub_list:
17:46:09.429109 line        79                     for pub_list in publish_date_xpath:
Modified var:.. pub_list = '上海译文出版社'
17:46:09.432106 line        80                         if "出版时间" in pub_list:
17:46:09.439102 line        79                     for pub_list in publish_date_xpath:
Modified var:.. pub_list = '出版时间:2018年07月\xa0'
17:46:09.442100 line        80                         if "出版时间" in pub_list:
17:46:09.446097 line        81                             publish_date = pub_list.split('出版时间:')[-1].split('\xa0')[0]
Modified var:.. publish_date = '2018年07月'
17:46:09.449095 line        82                             print('出版时间:',publish_date)
17:46:09.457093 line        79                     for pub_list in publish_date_xpath:
17:46:09.460091 line        87                 price_xpath = tree.xpath('//*[@id="pc-price"]/div/div/p/text()')
Modified var:.. price_xpath = ['\n                    ', '\n                    ', '\n                ', '41.80']
17:46:09.465086 line        88                 if price_xpath:
17:46:09.474082 line        89                     price = price_xpath[-1]
Modified var:.. price = '41.80'
17:46:09.477079 line        90                     print('价格：',price)
17:46:09.481077 line        95                 isbn_no_xpath = tree.xpath('//*[@id="detail_all"]/div/ul/li/text()')
Modified var:.. isbn_no_xpath = ['开 本：32开', '纸 张：纯质纸', '包 装：平装-胶订', '是否套装：否', '国际标准书号ISBN：9787532777594']
17:46:09.488073 line        96                 if isbn_no_xpath:
17:46:09.492072 line        97                     for isbn_no_li in isbn_no_xpath:
Modified var:.. isbn_no_li = '开 本：32开'
17:46:09.495069 line        98                         if "ISBN" in isbn_no_li:
17:46:09.499069 line        97                     for isbn_no_li in isbn_no_xpath:
Modified var:.. isbn_no_li = '纸 张：纯质纸'
17:46:09.506063 line        98                         if "ISBN" in isbn_no_li:
17:46:09.510062 line        97                     for isbn_no_li in isbn_no_xpath:
Modified var:.. isbn_no_li = '包 装：平装-胶订'
17:46:09.513058 line        98                         if "ISBN" in isbn_no_li:
17:46:09.517056 line        97                     for isbn_no_li in isbn_no_xpath:
Modified var:.. isbn_no_li = '是否套装：否'
17:46:09.522054 line        98                         if "ISBN" in isbn_no_li:
17:46:09.527051 line        97                     for isbn_no_li in isbn_no_xpath:
Modified var:.. isbn_no_li = '国际标准书号ISBN：9787532777594'
17:46:09.529049 line        98                         if "ISBN" in isbn_no_li:
17:46:09.533048 line        99                             isbn_new_no = isbn_no_li.split('国际标准书号ISBN：')[-1]
Modified var:.. isbn_new_no = '9787532777594'
17:46:09.540045 line       100                             print('ISBN号:',isbn_new_no)
17:46:09.545041 line        97                     for isbn_no_li in isbn_no_xpath:
17:46:09.548039 line       106                 introduce_str = ''.join(tree.xpath('//*[@id="detail"]/div[@id="content"]/div[@class="descrip"]//text()'))
Modified var:.. introduce_str = '本书与《且听风吟》《1973年的弹子球》合称“鼠的三部曲”，是村上春树的第三部作品，也是*部大...次作了修订。因上一个平装本封面已经10年未变，故第三次更换本书封面设计，使这部名作焕发新的活力。'
17:46:09.559038 line       108                 pre = re.compile('>(.*)<')
17:46:09.562031 line       109                 retouve_str = ''.join(pre.findall(introduce_str))
17:46:09.565030 line       111                 if retouve_str:
17:46:09.570027 line       114                     content_introduce = introduce_str.strip()
Modified var:.. content_introduce = '本书与《且听风吟》《1973年的弹子球》合称“鼠的三部曲”，是村上春树的第三部作品，也是*部大...次作了修订。因上一个平装本封面已经10年未变，故第三次更换本书封面设计，使这部名作焕发新的活力。'
17:46:09.573026 line       115                 print('内容简介:', content_introduce)
17:46:09.578023 line       121                 author_introduce_str = ''.join(
17:46:09.581021 line       122                     tree.xpath('//*[@id="detail"]/div[@id="authorIntroduction"]/div[@class="descrip"]//text()'))
Modified var:.. author_introduce_str = '\xa0村上春树，当代日本小说家。29岁开始写作，第一部作品《且听风吟》即获得日本群像新人赏，...战后阴郁沉重的文字气息。被称作第一个纯正的“二战后时期作家”，并誉为日本1980年代的文学旗手。'
17:46:09.592014 line       124                 retouve_str = ''.join(pre.findall(author_introduce_str))
17:46:09.596013 line       125                 if retouve_str:
17:46:09.599011 line       128                     author_introduce = author_introduce_str.strip()
Modified var:.. author_introduce = '村上春树，当代日本小说家。29岁开始写作，第一部作品《且听风吟》即获得日本群像新人赏，1987...战后阴郁沉重的文字气息。被称作第一个纯正的“二战后时期作家”，并誉为日本1980年代的文学旗手。'
17:46:09.603008 line       129                 print('书名作者简介:', author_introduce)
17:46:09.609004 line       134                 abstract_info_span = tree.xpath('//*[@id="detail"]/div[@id="abstract"]/div[@class="descrip"]//text()')
Modified var:.. abstract_info_span = ['1. 作家号召力。村上春树是*受我国读者喜爱的外国作家之一。', '2. 经典作品脍炙人口。连续畅销18年，发行二十余万册。', '\xa0']
17:46:09.617000 line       135                 abstract_info = ''.join(abstract_info_span).strip()
Modified var:.. abstract_info = '1. 作家号召力。村上春树是*受我国读者喜爱的外国作家之一。2. 经典作品脍炙人口。连续畅销18年，发行二十余万册。'
17:46:09.625994 line       136                 print('编辑推荐：',abstract_info)
17:46:09.629992 line       138                 abstract_info_pic = ''.join(tree.xpath('//*[@id="detail"]/div[@id="abstract"]/div[@class="descrip"]//*/@src'))
Modified var:.. abstract_info_pic = ''
17:46:09.637988 line       139                 print('编辑推荐长图：', abstract_info_pic)
17:46:09.641985 line       144                 feature_pic = ''.join(tree.xpath('//*[@id="detail"]/div[@id="feature"]/div[@class="descrip"]//*/@src'))
Modified var:.. feature_pic = 'http://img54.ddimg.cn/99999990003396004.jpg'
17:46:09.646982 line       145                 if not feature_pic:
17:46:09.654978 line       148                 print('产品特色长图：', feature_pic)
17:46:09.658976 line       153                 attachImage = ''.join(tree.xpath('//*[@id="detail"]/div[@id="attachImage"]/div[@class="descrip"]//*/img/@data-original'))
Modified var:.. attachImage = ''
17:46:09.663972 line       154                 if not attachImage:
17:46:09.670970 line       155                     attachImage = ''.join(tree.xpath(
17:46:09.674966 line       156                     '//*[@id="detail"]/div[@id="attachImage"]/div[@class="descrip"]//*/img/@src'))
17:46:09.679964 line       158                 print('书摘插画：', attachImage)
17:46:09.682962 line       167                 """
Modified var:.. tbook_sql = " REPLACE INTO `t_book` \n                      ..._b_2.jpg',now())\n            \n                "
17:46:09.687961 line       169                 sefl.sql_cursor.query(tbook_sql)
17:46:09.696953 line        31         for link in hrefs:
Modified var:.. link = ('f53de4cf12b011eba9b5507b9d245e55', 'http://pro...p://img3m0.ddimg.cn/45/1/25265340-1_b_15401.jpg')
17:46:09.699951 line        33             print('')
17:46:09.705949 line        34             printDarkBlue(f"开始读取详情数据，加载缓存。。。。。\n",FOREGROUND_BLUE)
17:46:09.708947 line        35             url = f'{link[1]}'
Modified var:.. url = 'http://product.dangdang.com/25265340.html'
17:46:09.710947 line        36             try:
17:46:09.715943 line        38                 chrome_opts = webdriver.ChromeOptions()
Modified var:.. chrome_opts = <selenium.webdriver.chrome.options.Options object at 0x000001BB6F754DC8>
17:46:09.719942 line        39                 chrome_opts.add_argument("--headless")
17:46:09.725937 line        41                 browser = webdriver.Chrome(options=chrome_opts)
Modified var:.. browser = <selenium.webdriver.chrome.webdriver.WebDriver (session="bc2137ee28a68c0b9aa06e1b1d5b3c4b")>
17:46:13.795582 line        43                 browser.get(url)
17:46:24.343947 line        44                 out_html = browser.page_source
Modified var:.. out_html = '<html><head><script async="" src="http://nt-dow...mp;random_id=0.16233198350495415"></body></html>'
17:46:24.389919 line        46                 tree = html.fromstring(out_html)
Modified var:.. tree = <Element html at 0x1bb6f70bf98>
17:46:24.406907 line        51                 product_title_xpath = tree.xpath('//*[@id="product_info"]/div/h1/text()')
Modified var:.. product_title_xpath = ['\n                    ', '\n                                        假如真有时光机（村上春树全新旅行随笔）    ']
17:46:24.412903 line        52                 product_title = ''.join(product_title_xpath).strip()
Modified var:.. product_title = '假如真有时光机（村上春树全新旅行随笔）'
17:46:24.417901 line        53                 print('书本名称：',product_title)
17:46:24.423896 line        59                 product_author_xpath = tree.xpath('//*[@id="product_info"]/div/span[@dd_name="作者"]/a//text()')
Modified var:.. product_author_xpath = ['村上春树', '新经典']
17:46:24.428894 line        61                 if product_author_xpath:
17:46:24.432891 line        62                         product_author = ' '.join(product_author_xpath)
Modified var:.. product_author = '村上春树 新经典'
17:46:24.438888 line        63                         print('作者：',product_author)
17:46:24.441886 line        68                 publishing_company_name_xpath = tree.xpath('//*[@id="product_info"]/div/span[@dd_name="出版社"]/a//text()')
Modified var:.. publishing_company_name_xpath = ['南海出版公司']
17:46:24.448884 line        69                 if publishing_company_name_xpath:
17:46:24.454880 line        70                     publishing_company_name = ''.join(publishing_company_name_xpath)
Modified var:.. publishing_company_name = '南海出版公司'
17:46:24.458878 line        71                     print('出版社：',publishing_company_name)
17:46:24.462876 line        76                 publish_date_xpath = tree.xpath('//*[@id="product_info"]/div/span//text()')
Modified var:.. publish_date_xpath = ['作者:（日）', '村上春树', ' 著，', '新经典', ' 出品', '出版社:', '南海出版公司', '出版时间:2018年05月\xa0']
17:46:24.473869 line        78                 if publish_date_xpath:
17:46:24.477867 line        79                     for pub_list in publish_date_xpath:
Modified var:.. pub_list = '作者:（日）'
17:46:24.480864 line        80                         if "出版时间" in pub_list:
17:46:24.485864 line        79                     for pub_list in publish_date_xpath:
Modified var:.. pub_list = '村上春树'
17:46:24.489860 line        80                         if "出版时间" in pub_list:
17:46:24.493857 line        79                     for pub_list in publish_date_xpath:
Modified var:.. pub_list = ' 著，'
17:46:24.496856 line        80                         if "出版时间" in pub_list:
17:46:24.504851 line        79                     for pub_list in publish_date_xpath:
Modified var:.. pub_list = '新经典'
17:46:24.507847 line        80                         if "出版时间" in pub_list:
17:46:24.511846 line        79                     for pub_list in publish_date_xpath:
Modified var:.. pub_list = ' 出品'
17:46:24.514846 line        80                         if "出版时间" in pub_list:
17:46:24.520841 line        79                     for pub_list in publish_date_xpath:
Modified var:.. pub_list = '出版社:'
17:46:24.524840 line        80                         if "出版时间" in pub_list:
17:46:24.527836 line        79                     for pub_list in publish_date_xpath:
Modified var:.. pub_list = '南海出版公司'
17:46:24.530837 line        80                         if "出版时间" in pub_list:
17:46:24.538831 line        79                     for pub_list in publish_date_xpath:
Modified var:.. pub_list = '出版时间:2018年05月\xa0'
17:46:24.541828 line        80                         if "出版时间" in pub_list:
17:46:24.545829 line        81                             publish_date = pub_list.split('出版时间:')[-1].split('\xa0')[0]
Modified var:.. publish_date = '2018年05月'
17:46:24.548826 line        82                             print('出版时间:',publish_date)
17:46:24.556822 line        79                     for pub_list in publish_date_xpath:
17:46:24.559822 line        87                 price_xpath = tree.xpath('//*[@id="pc-price"]/div/div/p/text()')
Modified var:.. price_xpath = ['\n                    ', '\n                    ', '\n                ', '49.00']
17:46:24.564817 line        88                 if price_xpath:
17:46:24.569813 line        89                     price = price_xpath[-1]
Modified var:.. price = '49.00'
17:46:24.572812 line        90                     print('价格：',price)
17:46:24.576811 line        95                 isbn_no_xpath = tree.xpath('//*[@id="detail_all"]/div/ul/li/text()')
Modified var:.. isbn_no_xpath = ['开 本：32开', '纸 张：胶版纸', '包 装：精装', '是否套装：否', '国际标准书号ISBN：9787544292498']
17:46:24.581806 line        96                 if isbn_no_xpath:
17:46:24.590802 line        97                     for isbn_no_li in isbn_no_xpath:
Modified var:.. isbn_no_li = '开 本：32开'
17:46:24.593799 line        98                         if "ISBN" in isbn_no_li:
17:46:24.597799 line        97                     for isbn_no_li in isbn_no_xpath:
Modified var:.. isbn_no_li = '纸 张：胶版纸'
17:46:24.601795 line        98                         if "ISBN" in isbn_no_li:
17:46:24.606793 line        97                     for isbn_no_li in isbn_no_xpath:
Modified var:.. isbn_no_li = '包 装：精装'
17:46:24.609791 line        98                         if "ISBN" in isbn_no_li:
17:46:24.613788 line        97                     for isbn_no_li in isbn_no_xpath:
Modified var:.. isbn_no_li = '是否套装：否'
17:46:24.620784 line        98                         if "ISBN" in isbn_no_li:
17:46:24.625781 line        97                     for isbn_no_li in isbn_no_xpath:
Modified var:.. isbn_no_li = '国际标准书号ISBN：9787544292498'
17:46:24.628781 line        98                         if "ISBN" in isbn_no_li:
17:46:24.641773 line        99                             isbn_new_no = isbn_no_li.split('国际标准书号ISBN：')[-1]
Modified var:.. isbn_new_no = '9787544292498'
17:46:24.644772 line       100                             print('ISBN号:',isbn_new_no)
17:46:24.649767 line        97                     for isbn_no_li in isbn_no_xpath:
17:46:24.659763 line       106                 introduce_str = ''.join(tree.xpath('//*[@id="detail"]/div[@id="content"]/div[@class="descrip"]//text()'))
Modified var:.. introduce_str = '《假如真有时光机》是村上春树周游世界各地，写下的妙趣横生的随笔集。\n在遍布苔藓的冰岛，邂逅没...托斯卡纳，我们跟随村上春树走遍七国十一地，仿佛乘上一台穿越现实的时光机，发现一个温暖有趣的世界。'
17:46:24.665758 line       108                 pre = re.compile('>(.*)<')
17:46:24.673753 line       109                 retouve_str = ''.join(pre.findall(introduce_str))
17:46:24.676751 line       111                 if retouve_str:
17:46:24.679751 line       114                     content_introduce = introduce_str.strip()
Modified var:.. content_introduce = '《假如真有时光机》是村上春树周游世界各地，写下的妙趣横生的随笔集。\n在遍布苔藓的冰岛，邂逅没...托斯卡纳，我们跟随村上春树走遍七国十一地，仿佛乘上一台穿越现实的时光机，发现一个温暖有趣的世界。'
17:46:24.682750 line       115                 print('内容简介:', content_introduce)
17:46:24.689746 line       121                 author_introduce_str = ''.join(
17:46:24.692745 line       122                     tree.xpath('//*[@id="detail"]/div[@id="authorIntroduction"]/div[@class="descrip"]//text()'))
Modified var:.. author_introduce_str = '村上春树，日本作家。生于1949年。29岁开始写作，处女作《且听风吟》获日本群像新人奖。198...当我谈跑步时，我谈些什么》《天黑以后》《没有色彩的多崎作和他的巡礼之年》《我的职业是小说家》等。'
17:46:24.696740 line       124                 retouve_str = ''.join(pre.findall(author_introduce_str))
17:46:24.704738 line       125                 if retouve_str:
17:46:24.707734 line       128                     author_introduce = author_introduce_str.strip()
Modified var:.. author_introduce = '村上春树，日本作家。生于1949年。29岁开始写作，处女作《且听风吟》获日本群像新人奖。198...当我谈跑步时，我谈些什么》《天黑以后》《没有色彩的多崎作和他的巡礼之年》《我的职业是小说家》等。'
17:46:24.710733 line       129                 print('书名作者简介:', author_introduce)
17:46:24.714732 line       134                 abstract_info_span = tree.xpath('//*[@id="detail"]/div[@id="abstract"]/div[@class="descrip"]//text()')
Modified var:.. abstract_info_span = ['\n', '\n  ', '\n', '\xa0', '\n', '\xa0', '\n',...目地回忆起沿途的景致，就像想起与恋人约会时走过的路线。——村上春树', '\n', '\xa0']
17:46:24.724724 line       135                 abstract_info = ''.join(abstract_info_span).strip()
Modified var:.. abstract_info = '村上春树全新旅行随笔隆重登场，与《当我谈跑步》《我的职业是小说家》并列为村上三大经典之作\n在...旅行写真\n我至今仍然能历历在目地回忆起沿途的景致，就像想起与恋人约会时走过的路线。——村上春树'
17:46:24.728721 line       136                 print('编辑推荐：',abstract_info)
17:46:24.732723 line       138                 abstract_info_pic = ''.join(tree.xpath('//*[@id="detail"]/div[@id="abstract"]/div[@class="descrip"]//*/@src'))
Modified var:.. abstract_info_pic = 'http://media1.ddimg.cn/2018/6/6/2018060620354928510.mp4'
17:46:24.744715 line       139                 print('编辑推荐长图：', abstract_info_pic)
17:46:24.748710 line       144                 feature_pic = ''.join(tree.xpath('//*[@id="detail"]/div[@id="feature"]/div[@class="descrip"]//*/@src'))
Modified var:.. feature_pic = 'http://img51.ddimg.cn/99999990076898211.jpg'
17:46:24.757707 line       145                 if not feature_pic:
17:46:24.761705 line       148                 print('产品特色长图：', feature_pic)
17:46:24.764701 line       153                 attachImage = ''.join(tree.xpath('//*[@id="detail"]/div[@id="attachImage"]/div[@class="descrip"]//*/img/@data-original'))
Modified var:.. attachImage = 'http://img58.ddimg.cn/99999990076898208.jpg'
17:46:24.771698 line       154                 if not attachImage:
17:46:24.775694 line       158                 print('书摘插画：', attachImage)
17:46:24.778696 line       167                 """
Modified var:.. tbook_sql = " REPLACE INTO `t_book` \n                      ...5401.jpg',now())\n            \n                "
17:46:24.781694 line       169                 sefl.sql_cursor.query(tbook_sql)
17:46:24.793688 line        31         for link in hrefs:
Modified var:.. link = ('f540c88612b011eba9b5507b9d245e55', 'http://pro...http://img3m1.ddimg.cn/27/29/23480451-1_b_1.jpg')
17:46:24.796683 line        33             print('')
17:46:24.801681 line        34             printDarkBlue(f"开始读取详情数据，加载缓存。。。。。\n",FOREGROUND_BLUE)
17:46:24.806678 line        35             url = f'{link[1]}'
Modified var:.. url = 'http://product.dangdang.com/23480451.html'
17:46:24.809676 line        36             try:
17:46:24.813674 line        38                 chrome_opts = webdriver.ChromeOptions()
Modified var:.. chrome_opts = <selenium.webdriver.chrome.options.Options object at 0x000001BB6F754A48>
17:46:24.816673 line        39                 chrome_opts.add_argument("--headless")
17:46:24.822668 line        41                 browser = webdriver.Chrome(options=chrome_opts)
Modified var:.. browser = <selenium.webdriver.chrome.webdriver.WebDriver (session="3e348cf4877e68c003969c860b3c5927")>
17:46:28.943648 line        43                 browser.get(url)
17:46:50.293493 line        44                 out_html = browser.page_source
Modified var:.. out_html = '<html><head><script async="" src="http://nt-dow...amp;random_id=0.7673095519396629"></body></html>'
17:46:50.355458 line        46                 tree = html.fromstring(out_html)
Modified var:.. tree = <Element html at 0x1bb6f6f8e08>
17:46:50.379442 line        51                 product_title_xpath = tree.xpath('//*[@id="product_info"]/div/h1/text()')
Modified var:.. product_title_xpath = ['\n                    ', '\n                                        国境以南 太阳以西（精装，村上春树经典作品）    ']
17:46:50.394434 line        52                 product_title = ''.join(product_title_xpath).strip()
Modified var:.. product_title = '国境以南 太阳以西（精装，村上春树经典作品）'
17:46:50.402432 line        53                 print('书本名称：',product_title)
17:46:50.408426 line        59                 product_author_xpath = tree.xpath('//*[@id="product_info"]/div/span[@dd_name="作者"]/a//text()')
Modified var:.. product_author_xpath = ['村上春树']
17:46:50.423417 line        61                 if product_author_xpath:
17:46:50.428415 line        62                         product_author = ' '.join(product_author_xpath)
Modified var:.. product_author = '村上春树'
17:46:50.441408 line        63                         print('作者：',product_author)
17:46:50.448403 line        68                 publishing_company_name_xpath = tree.xpath('//*[@id="product_info"]/div/span[@dd_name="出版社"]/a//text()')
Modified var:.. publishing_company_name_xpath = ['上海译文出版社']
17:46:50.462394 line        69                 if publishing_company_name_xpath:
17:46:50.474388 line        70                     publishing_company_name = ''.join(publishing_company_name_xpath)
Modified var:.. publishing_company_name = '上海译文出版社'
17:46:50.479386 line        71                     print('出版社：',publishing_company_name)
17:46:50.491379 line        76                 publish_date_xpath = tree.xpath('//*[@id="product_info"]/div/span//text()')
Modified var:.. publish_date_xpath = ['作者:', '村上春树', '出版社:', '上海译文出版社', '出版时间:2014年05月\xa0']
17:46:50.507368 line        78                 if publish_date_xpath:
17:46:50.513366 line        79                     for pub_list in publish_date_xpath:
Modified var:.. pub_list = '作者:'
17:46:50.521974 line        80                         if "出版时间" in pub_list:
17:46:50.527158 line        79                     for pub_list in publish_date_xpath:
Modified var:.. pub_list = '村上春树'
17:46:50.536155 line        80                         if "出版时间" in pub_list:
17:46:50.543149 line        79                     for pub_list in publish_date_xpath:
Modified var:.. pub_list = '出版社:'
17:46:50.547148 line        80                         if "出版时间" in pub_list:
17:46:50.559141 line        79                     for pub_list in publish_date_xpath:
Modified var:.. pub_list = '上海译文出版社'
17:46:50.563139 line        80                         if "出版时间" in pub_list:
17:46:50.572134 line        79                     for pub_list in publish_date_xpath:
Modified var:.. pub_list = '出版时间:2014年05月\xa0'
17:46:50.575133 line        80                         if "出版时间" in pub_list:
17:46:50.581128 line        81                             publish_date = pub_list.split('出版时间:')[-1].split('\xa0')[0]
Modified var:.. publish_date = '2014年05月'
17:46:50.596119 line        82                             print('出版时间:',publish_date)
17:46:50.607114 line        79                     for pub_list in publish_date_xpath:
17:46:50.611111 line        87                 price_xpath = tree.xpath('//*[@id="pc-price"]/div/div/p/text()')
Modified var:.. price_xpath = ['\n                    ', '\n                    ', '\n                ', '36.20']
17:46:50.624104 line        88                 if price_xpath:
17:46:50.628104 line        89                     price = price_xpath[-1]
Modified var:.. price = '36.20'
17:46:50.643093 line        90                     print('价格：',price)
17:46:50.656086 line        95                 isbn_no_xpath = tree.xpath('//*[@id="detail_all"]/div/ul/li/text()')
Modified var:.. isbn_no_xpath = ['开 本：16开', '纸 张：胶版纸', '包 装：精装', '是否套装：否', '国际标准书号ISBN：9787532765485']
17:46:50.662081 line        96                 if isbn_no_xpath:
17:46:50.674077 line        97                     for isbn_no_li in isbn_no_xpath:
Modified var:.. isbn_no_li = '开 本：16开'
17:46:50.678073 line        98                         if "ISBN" in isbn_no_li:
17:46:50.687069 line        97                     for isbn_no_li in isbn_no_xpath:
Modified var:.. isbn_no_li = '纸 张：胶版纸'
17:46:50.692065 line        98                         if "ISBN" in isbn_no_li:
17:46:50.696065 line        97                     for isbn_no_li in isbn_no_xpath:
Modified var:.. isbn_no_li = '包 装：精装'
17:46:50.705058 line        98                         if "ISBN" in isbn_no_li:
17:46:50.710056 line        97                     for isbn_no_li in isbn_no_xpath:
Modified var:.. isbn_no_li = '是否套装：否'
17:46:50.714054 line        98                         if "ISBN" in isbn_no_li:
17:46:50.743036 line        97                     for isbn_no_li in isbn_no_xpath:
Modified var:.. isbn_no_li = '国际标准书号ISBN：9787532765485'
17:46:50.761026 line        98                         if "ISBN" in isbn_no_li:
17:46:50.777017 line        99                             isbn_new_no = isbn_no_li.split('国际标准书号ISBN：')[-1]
Modified var:.. isbn_new_no = '9787532765485'
17:46:50.790009 line       100                             print('ISBN号:',isbn_new_no)
17:46:50.796006 line        97                     for isbn_no_li in isbn_no_xpath:
17:46:50.804001 line       106                 introduce_str = ''.join(tree.xpath('//*[@id="detail"]/div[@id="content"]/div[@class="descrip"]//text()'))
Modified var:.. introduce_str = ''
17:46:50.811996 line       108                 pre = re.compile('>(.*)<')
17:46:50.821993 line       109                 retouve_str = ''.join(pre.findall(introduce_str))
17:46:50.826988 line       111                 if retouve_str:
17:46:50.830986 line       114                     content_introduce = introduce_str.strip()
Modified var:.. content_introduce = ''
17:46:50.842978 line       115                 print('内容简介:', content_introduce)
17:46:50.847975 line       121                 author_introduce_str = ''.join(
17:46:50.853973 line       122                     tree.xpath('//*[@id="detail"]/div[@id="authorIntroduction"]/div[@class="descrip"]//text()'))
Modified var:.. author_introduce_str = ''
17:46:50.860969 line       124                 retouve_str = ''.join(pre.findall(author_introduce_str))
17:46:50.877959 line       125                 if retouve_str:
17:46:50.884955 line       128                     author_introduce = author_introduce_str.strip()
Modified var:.. author_introduce = ''
17:46:50.889953 line       129                 print('书名作者简介:', author_introduce)
17:46:50.894948 line       134                 abstract_info_span = tree.xpath('//*[@id="detail"]/div[@id="abstract"]/div[@class="descrip"]//text()')
Modified var:.. abstract_info_span = [' 村上春树**部中年情感小说。13年后的修订本。经典风格的装帧。具有收藏价值。', '\xa...没有女人的男人们', '》，现在购买即送海明威同名小说一本，送完即止', ' ', '\xa0']
17:46:50.910939 line       135                 abstract_info = ''.join(abstract_info_span).strip()
Modified var:.. abstract_info = '村上春树**部中年情感小说。13年后的修订本。经典风格的装帧。具有收藏价值。\xa0 相关推荐：  村上春树**短篇小说集《没有女人的男人们》，现在购买即送海明威同名小说一本，送完即止'
17:46:50.919944 line       136                 print('编辑推荐：',abstract_info)
17:46:50.926932 line       138                 abstract_info_pic = ''.join(tree.xpath('//*[@id="detail"]/div[@id="abstract"]/div[@class="descrip"]//*/@src'))
Modified var:.. abstract_info_pic = ''
17:46:50.942921 line       139                 print('编辑推荐长图：', abstract_info_pic)
17:46:50.947918 line       144                 feature_pic = ''.join(tree.xpath('//*[@id="detail"]/div[@id="feature"]/div[@class="descrip"]//*/@src'))
Modified var:.. feature_pic = ''
17:46:50.963910 line       145                 if not feature_pic:
17:46:50.971905 line       146                     feature_pic = ''.join(
17:46:50.976901 line       147                         tree.xpath('//*[@id="detail"]/div[@id="feature"]/div[@class="descrip"]//*/@data-original'))
17:46:50.990894 line       148                 print('产品特色长图：', feature_pic)
17:46:50.995890 line       153                 attachImage = ''.join(tree.xpath('//*[@id="detail"]/div[@id="attachImage"]/div[@class="descrip"]//*/img/@data-original'))
Modified var:.. attachImage = 'http://img53.ddimg.cn/99999990000242023.jpg'
17:46:51.005885 line       154                 if not attachImage:
17:46:51.011881 line       158                 print('书摘插画：', attachImage)
17:46:51.014881 line       167                 """
Modified var:.. tbook_sql = " REPLACE INTO `t_book` \n                      ..._b_1.jpg',now())\n            \n                "
17:46:51.023874 line       169                 sefl.sql_cursor.query(tbook_sql)
17:46:51.030871 line        31         for link in hrefs:
Modified var:.. link = ('f543c91012b011eba9b5507b9d245e55', 'http://pro...'http://img3m5.ddimg.cn/56/4/23761145-1_b_6.jpg')
17:46:51.036869 line        33             print('')
17:46:51.041864 line        34             printDarkBlue(f"开始读取详情数据，加载缓存。。。。。\n",FOREGROUND_BLUE)
17:46:51.045862 line        35             url = f'{link[1]}'
Modified var:.. url = 'http://product.dangdang.com/23761145.html'
17:46:51.050862 line        36             try:
17:46:51.056856 line        38                 chrome_opts = webdriver.ChromeOptions()
Modified var:.. chrome_opts = <selenium.webdriver.chrome.options.Options object at 0x000001BB6F75A048>
17:46:51.061852 line        39                 chrome_opts.add_argument("--headless")
17:46:51.067853 line        41                 browser = webdriver.Chrome(options=chrome_opts)
Modified var:.. browser = <selenium.webdriver.chrome.webdriver.WebDriver (session="00b8692902cc305e3120345cf82149cf")>
17:46:55.226227 line        43                 browser.get(url)
17:47:05.310337 line        44                 out_html = browser.page_source
Modified var:.. out_html = '<html><head><script async="" src="http://nt-dow...              </div>\n            </body></html>'
17:47:05.356290 line        46                 tree = html.fromstring(out_html)
Modified var:.. tree = <Element html at 0x1bb6f718638>
17:47:05.372283 line        51                 product_title_xpath = tree.xpath('//*[@id="product_info"]/div/h1/text()')
Modified var:.. product_title_xpath = ['\n                    ', '\n                  ...          人间失格（日本小说家太宰治代表作，190多万条好评的现象级畅销书）    ']
17:47:05.378293 line        52                 product_title = ''.join(product_title_xpath).strip()
Modified var:.. product_title = '人间失格（日本小说家太宰治代表作，190多万条好评的现象级畅销书）'
17:47:05.387275 line        53                 print('书本名称：',product_title)
17:47:05.391272 line        59                 product_author_xpath = tree.xpath('//*[@id="product_info"]/div/span[@dd_name="作者"]/a//text()')
Modified var:.. product_author_xpath = ['太宰治', '杨伟']
17:47:05.396268 line        61                 if product_author_xpath:
17:47:05.405265 line        62                         product_author = ' '.join(product_author_xpath)
Modified var:.. product_author = '太宰治 杨伟'
17:47:05.408261 line        63                         print('作者：',product_author)
17:47:05.412258 line        68                 publishing_company_name_xpath = tree.xpath('//*[@id="product_info"]/div/span[@dd_name="出版社"]/a//text()')
Modified var:.. publishing_company_name_xpath = ['作家出版社']
17:47:05.427250 line        69                 if publishing_company_name_xpath:
17:47:05.440244 line        70                     publishing_company_name = ''.join(publishing_company_name_xpath)
Modified var:.. publishing_company_name = '作家出版社'
17:47:05.447238 line        71                     print('出版社：',publishing_company_name)
17:47:05.456233 line        76                 publish_date_xpath = tree.xpath('//*[@id="product_info"]/div/span//text()')
Modified var:.. publish_date_xpath = ['作者:（日）', '太宰治', '\u3000著，', '杨伟', '\u3000译', '出版社:', '作家出版社', '出版时间:2015年08月\xa0']
17:47:05.461231 line        78                 if publish_date_xpath:
17:47:05.480219 line        79                     for pub_list in publish_date_xpath:
Modified var:.. pub_list = '作者:（日）'
17:47:05.486219 line        80                         if "出版时间" in pub_list:
17:47:05.490215 line        79                     for pub_list in publish_date_xpath:
Modified var:.. pub_list = '太宰治'
17:47:05.493214 line        80                         if "出版时间" in pub_list:
17:47:05.497212 line        79                     for pub_list in publish_date_xpath:
Modified var:.. pub_list = '\u3000著，'
17:47:05.504212 line        80                         if "出版时间" in pub_list:
17:47:05.508203 line        79                     for pub_list in publish_date_xpath:
Modified var:.. pub_list = '杨伟'
17:47:05.511202 line        80                         if "出版时间" in pub_list:
17:47:05.521197 line        79                     for pub_list in publish_date_xpath:
Modified var:.. pub_list = '\u3000译'
17:47:05.524194 line        80                         if "出版时间" in pub_list:
17:47:05.529191 line        79                     for pub_list in publish_date_xpath:
Modified var:.. pub_list = '出版社:'
17:47:05.534190 line        80                         if "出版时间" in pub_list:
17:47:05.539187 line        79                     for pub_list in publish_date_xpath:
Modified var:.. pub_list = '作家出版社'
17:47:05.542184 line        80                         if "出版时间" in pub_list:
17:47:05.546183 line        79                     for pub_list in publish_date_xpath:
Modified var:.. pub_list = '出版时间:2015年08月\xa0'
17:47:05.554178 line        80                         if "出版时间" in pub_list:
17:47:05.559175 line        81                             publish_date = pub_list.split('出版时间:')[-1].split('\xa0')[0]
Modified var:.. publish_date = '2015年08月'
17:47:05.562174 line        82                             print('出版时间:',publish_date)
17:47:05.567171 line        79                     for pub_list in publish_date_xpath:
17:47:05.572167 line        87                 price_xpath = tree.xpath('//*[@id="pc-price"]/div/div/p/text()')
Modified var:.. price_xpath = ['\n                    ', '\n                    ', '\n                ', '18.70']
17:47:05.576164 line        88                 if price_xpath:
17:47:05.580162 line        89                     price = price_xpath[-1]
Modified var:.. price = '18.70'
17:47:05.590157 line        90                     print('价格：',price)
17:47:05.594155 line        95                 isbn_no_xpath = tree.xpath('//*[@id="detail_all"]/div/ul/li/text()')
Modified var:.. isbn_no_xpath = ['开 本：32开', '纸 张：胶版纸', '包 装：平装-胶订', '是否套装：否', '国际标准书号ISBN：9787506380263', '丛书名：世界文学名著']
17:47:05.606148 line        96                 if isbn_no_xpath:
17:47:05.609146 line        97                     for isbn_no_li in isbn_no_xpath:
Modified var:.. isbn_no_li = '开 本：32开'
17:47:05.612143 line        98                         if "ISBN" in isbn_no_li:
17:47:05.621141 line        97                     for isbn_no_li in isbn_no_xpath:
Modified var:.. isbn_no_li = '纸 张：胶版纸'
17:47:05.624138 line        98                         if "ISBN" in isbn_no_li:
17:47:05.627136 line        97                     for isbn_no_li in isbn_no_xpath:
Modified var:.. isbn_no_li = '包 装：平装-胶订'
17:47:05.630134 line        98                         if "ISBN" in isbn_no_li:
17:47:05.640129 line        97                     for isbn_no_li in isbn_no_xpath:
Modified var:.. isbn_no_li = '是否套装：否'
17:47:05.643126 line        98                         if "ISBN" in isbn_no_li:
17:47:05.647124 line        97                     for isbn_no_li in isbn_no_xpath:
Modified var:.. isbn_no_li = '国际标准书号ISBN：9787506380263'
17:47:05.654121 line        98                         if "ISBN" in isbn_no_li:
17:47:05.658120 line        99                             isbn_new_no = isbn_no_li.split('国际标准书号ISBN：')[-1]
Modified var:.. isbn_new_no = '9787506380263'
17:47:05.661116 line       100                             print('ISBN号:',isbn_new_no)
17:47:05.664114 line        97                     for isbn_no_li in isbn_no_xpath:
Modified var:.. isbn_no_li = '丛书名：世界文学名著'
17:47:05.674109 line        98                         if "ISBN" in isbn_no_li:
17:47:05.678107 line        97                     for isbn_no_li in isbn_no_xpath:
17:47:05.680105 line       106                 introduce_str = ''.join(tree.xpath('//*[@id="detail"]/div[@id="content"]/div[@class="descrip"]//text()'))
Modified var:.. introduce_str = '\n\n\n\n\n\n\n\n胆小鬼连幸福都害怕，碰到棉花都会受伤\n\u3000\u300...可体会其内心深切的苦楚，完成本篇作品之后，太宰治终归还是选择了投水的方式，为自己划下*后的句点。'
17:47:05.688100 line       108                 pre = re.compile('>(.*)<')
17:47:05.692099 line       109                 retouve_str = ''.join(pre.findall(introduce_str))
17:47:05.695097 line       111                 if retouve_str:
17:47:05.702095 line       114                     content_introduce = introduce_str.strip()
Modified var:.. content_introduce = '胆小鬼连幸福都害怕，碰到棉花都会受伤\n\u3000\u3000人间失格，即丧失为人的资格。这...可体会其内心深切的苦楚，完成本篇作品之后，太宰治终归还是选择了投水的方式，为自己划下*后的句点。'
17:47:05.706091 line       115                 print('内容简介:', content_introduce)
17:47:05.710089 line       121                 author_introduce_str = ''.join(
17:47:05.713087 line       122                     tree.xpath('//*[@id="detail"]/div[@id="authorIntroduction"]/div[@class="descrip"]//text()'))
Modified var:.. author_introduce_str = '太宰治\n\u3000\u3000“私小说”领域的天才作家。与川端康成、三岛由纪夫齐名，被视为...作。其多数作品采用“私小说”的自我告白形式，充满了纯粹而敏锐的感受性，吸引着一代又一代的年轻人。'
17:47:05.722790 line       124                 retouve_str = ''.join(pre.findall(author_introduce_str))
17:47:05.726787 line       125                 if retouve_str:
17:47:05.729786 line       128                     author_introduce = author_introduce_str.strip()
Modified var:.. author_introduce = '太宰治\n\u3000\u3000“私小说”领域的天才作家。与川端康成、三岛由纪夫齐名，被视为...作。其多数作品采用“私小说”的自我告白形式，充满了纯粹而敏锐的感受性，吸引着一代又一代的年轻人。'
17:47:05.736787 line       129                 print('书名作者简介:', author_introduce)
17:47:05.740779 line       134                 abstract_info_span = tree.xpath('//*[@id="detail"]/div[@id="abstract"]/div[@class="descrip"]//text()')
Modified var:.. abstract_info_span = ['★ 太宰治灵魂深处无助的生命绝唱，同时也是村上春树绝望凄美的灵感源泉。', '\u3000\...span></div>\n</li>\n</ul>\n</div>\xa0', '显示全部信息']
17:47:05.746776 line       135                 abstract_info = ''.join(abstract_info_span).strip()
Modified var:.. abstract_info = '★ 太宰治灵魂深处无助的生命绝唱，同时也是村上春树绝望凄美的灵感源泉。\u3000\u3000...ng></span></div>\n</li>\n</ul>\n</div>\xa0显示全部信息'
17:47:05.756772 line       136                 print('编辑推荐：',abstract_info)
17:47:05.766767 line       138                 abstract_info_pic = ''.join(tree.xpath('//*[@id="detail"]/div[@id="abstract"]/div[@class="descrip"]//*/@src'))
17:47:05.772761 line       139                 print('编辑推荐长图：', abstract_info_pic)
17:47:05.775759 line       144                 feature_pic = ''.join(tree.xpath('//*[@id="detail"]/div[@id="feature"]/div[@class="descrip"]//*/@src'))
Modified var:.. feature_pic = 'http://img57.ddimg.cn/99999990003349837.jpg'
17:47:05.780756 line       145                 if not feature_pic:
17:47:05.787754 line       148                 print('产品特色长图：', feature_pic)
17:47:05.792751 line       153                 attachImage = ''.join(tree.xpath('//*[@id="detail"]/div[@id="attachImage"]/div[@class="descrip"]//*/img/@data-original'))
Modified var:.. attachImage = ''
17:47:05.797749 line       154                 if not attachImage:
17:47:05.807745 line       155                     attachImage = ''.join(tree.xpath(
17:47:05.812740 line       156                     '//*[@id="detail"]/div[@id="attachImage"]/div[@class="descrip"]//*/img/@src'))
17:47:05.843237 line       158                 print('书摘插画：', attachImage)
17:47:05.857229 line       167                 """
Modified var:.. tbook_sql = ' REPLACE INTO `t_book` \n                      ...b_6.jpg\',now())\n            \n                '
17:47:05.860226 line       169                 sefl.sql_cursor.query(tbook_sql)
17:47:05.888211 line        31         for link in hrefs:
Modified var:.. link = ('f546644a12b011eba9b5507b9d245e55', 'http://pro...http://img3m9.ddimg.cn/25/20/23599249-1_b_6.jpg')
17:47:05.893209 line        33             print('')
17:47:05.898206 line        34             printDarkBlue(f"开始读取详情数据，加载缓存。。。。。\n",FOREGROUND_BLUE)
17:47:05.905202 line        35             url = f'{link[1]}'
Modified var:.. url = 'http://product.dangdang.com/23599249.html'
17:47:05.911199 line        36             try:
17:47:05.924191 line        38                 chrome_opts = webdriver.ChromeOptions()
Modified var:.. chrome_opts = <selenium.webdriver.chrome.options.Options object at 0x000001BB6F75AE48>
17:47:05.928189 line        39                 chrome_opts.add_argument("--headless")
17:47:05.937184 line        41                 browser = webdriver.Chrome(options=chrome_opts)
Modified var:.. browser = <selenium.webdriver.chrome.webdriver.WebDriver (session="ef8c36d1ab5549a654b5ce49b52052d5")>
17:47:15.976401 line        43                 browser.get(url)
17:47:29.079410 line        44                 out_html = browser.page_source
Modified var:.. out_html = '<html><head><script async="" src="http://nt-dow...amp;random_id=0.8191575277523782"></body></html>'
17:47:29.118390 line        46                 tree = html.fromstring(out_html)
Modified var:.. tree = <Element html at 0x1bb6f6ff868>
17:47:29.135379 line        51                 product_title_xpath = tree.xpath('//*[@id="product_info"]/div/h1/text()')
Modified var:.. product_title_xpath = ['\n                    ', '\n                                        遇到百分之百的女孩（新版）（村上春树作品）    ']
17:47:29.142389 line        52                 product_title = ''.join(product_title_xpath).strip()
Modified var:.. product_title = '遇到百分之百的女孩（新版）（村上春树作品）'
17:47:29.146373 line        53                 print('书本名称：',product_title)
17:47:29.153368 line        59                 product_author_xpath = tree.xpath('//*[@id="product_info"]/div/span[@dd_name="作者"]/a//text()')
Modified var:.. product_author_xpath = ['村上春树', '林少华']
17:47:29.158363 line        61                 if product_author_xpath:
17:47:29.162377 line        62                         product_author = ' '.join(product_author_xpath)
Modified var:.. product_author = '村上春树 林少华'
17:47:29.166361 line        63                         print('作者：',product_author)
17:47:29.170360 line        68                 publishing_company_name_xpath = tree.xpath('//*[@id="product_info"]/div/span[@dd_name="出版社"]/a//text()')
Modified var:.. publishing_company_name_xpath = ['上海译文出版社']
17:47:29.176355 line        69                 if publishing_company_name_xpath:
17:47:29.186349 line        70                     publishing_company_name = ''.join(publishing_company_name_xpath)
Modified var:.. publishing_company_name = '上海译文出版社'
17:47:29.190347 line        71                     print('出版社：',publishing_company_name)
17:47:29.194344 line        76                 publish_date_xpath = tree.xpath('//*[@id="product_info"]/div/span//text()')
Modified var:.. publish_date_xpath = ['作者:（日）', '村上春树', '\u3000著，', '林少华', '\u3000译', '出版社:', '上海译文出版社', '出版时间:2014年09月\xa0']
17:47:29.203339 line        78                 if publish_date_xpath:
17:47:29.207351 line        79                     for pub_list in publish_date_xpath:
Modified var:.. pub_list = '作者:（日）'
17:47:29.211335 line        80                         if "出版时间" in pub_list:
17:47:29.220330 line        79                     for pub_list in publish_date_xpath:
Modified var:.. pub_list = '村上春树'
17:47:29.223328 line        80                         if "出版时间" in pub_list:
17:47:29.227325 line        79                     for pub_list in publish_date_xpath:
Modified var:.. pub_list = '\u3000著，'
17:47:29.233323 line        80                         if "出版时间" in pub_list:
17:47:29.237320 line        79                     for pub_list in publish_date_xpath:
Modified var:.. pub_list = '林少华'
17:47:29.240319 line        80                         if "出版时间" in pub_list:
17:47:29.244315 line        79                     for pub_list in publish_date_xpath:
Modified var:.. pub_list = '\u3000译'
17:47:29.249313 line        80                         if "出版时间" in pub_list:
17:47:29.253310 line        79                     for pub_list in publish_date_xpath:
Modified var:.. pub_list = '出版社:'
17:47:29.256308 line        80                         if "出版时间" in pub_list:
17:47:29.260306 line        79                     for pub_list in publish_date_xpath:
Modified var:.. pub_list = '上海译文出版社'
17:47:29.262304 line        80                         if "出版时间" in pub_list:
17:47:29.271301 line        79                     for pub_list in publish_date_xpath:
Modified var:.. pub_list = '出版时间:2014年09月\xa0'
17:47:29.274299 line        80                         if "出版时间" in pub_list:
17:47:29.279298 line        81                             publish_date = pub_list.split('出版时间:')[-1].split('\xa0')[0]
Modified var:.. publish_date = '2014年09月'
17:47:29.288291 line        82                             print('出版时间:',publish_date)
17:47:29.294288 line        79                     for pub_list in publish_date_xpath:
17:47:29.306281 line        87                 price_xpath = tree.xpath('//*[@id="pc-price"]/div/div/p/text()')
Modified var:.. price_xpath = ['\n                    ', '\n                    ', '\n                ', '18.60']
17:47:29.313275 line        88                 if price_xpath:
17:47:29.327269 line        89                     price = price_xpath[-1]
Modified var:.. price = '18.60'
17:47:29.337265 line        90                     print('价格：',price)
17:47:29.342260 line        95                 isbn_no_xpath = tree.xpath('//*[@id="detail_all"]/div/ul/li/text()')
Modified var:.. isbn_no_xpath = ['开 本：32开', '纸 张：胶版纸', '包 装：平装', '是否套装：否', '国际标准书号ISBN：9787532746002']
17:47:29.355255 line        96                 if isbn_no_xpath:
17:47:29.359249 line        97                     for isbn_no_li in isbn_no_xpath:
Modified var:.. isbn_no_li = '开 本：32开'
17:47:29.363248 line        98                         if "ISBN" in isbn_no_li:
17:47:29.373242 line        97                     for isbn_no_li in isbn_no_xpath:
Modified var:.. isbn_no_li = '纸 张：胶版纸'
17:47:29.376239 line        98                         if "ISBN" in isbn_no_li:
17:47:29.380238 line        97                     for isbn_no_li in isbn_no_xpath:
Modified var:.. isbn_no_li = '包 装：平装'
17:47:29.390233 line        98                         if "ISBN" in isbn_no_li:
17:47:29.394233 line        97                     for isbn_no_li in isbn_no_xpath:
Modified var:.. isbn_no_li = '是否套装：否'
17:47:29.397228 line        98                         if "ISBN" in isbn_no_li:
17:47:29.406223 line        97                     for isbn_no_li in isbn_no_xpath:
Modified var:.. isbn_no_li = '国际标准书号ISBN：9787532746002'
17:47:29.410221 line        98                         if "ISBN" in isbn_no_li:
17:47:29.421216 line        99                             isbn_new_no = isbn_no_li.split('国际标准书号ISBN：')[-1]
Modified var:.. isbn_new_no = '9787532746002'
17:47:29.425211 line       100                             print('ISBN号:',isbn_new_no)
17:47:29.429209 line        97                     for isbn_no_li in isbn_no_xpath:
17:47:29.439203 line       106                 introduce_str = ''.join(tree.xpath('//*[@id="detail"]/div[@id="content"]/div[@class="descrip"]//text()'))
Modified var:.. introduce_str = '《遇到百分百的女孩》为作者1983年的连载短篇小说集，共18篇，除一篇外，均是一二千字的超短篇...故事完整，有的注重感想，像一篇速写。其总的风格是有趣好玩又富有回味，是一本可读性很强的休闲读物。'
17:47:29.446199 line       108                 pre = re.compile('>(.*)<')
17:47:29.453195 line       109                 retouve_str = ''.join(pre.findall(introduce_str))
17:47:29.457195 line       111                 if retouve_str:
17:47:29.460192 line       114                     content_introduce = introduce_str.strip()
Modified var:.. content_introduce = '《遇到百分百的女孩》为作者1983年的连载短篇小说集，共18篇，除一篇外，均是一二千字的超短篇...故事完整，有的注重感想，像一篇速写。其总的风格是有趣好玩又富有回味，是一本可读性很强的休闲读物。'
17:47:29.471187 line       115                 print('内容简介:', content_introduce)
17:47:29.476182 line       121                 author_introduce_str = ''.join(
17:47:29.480181 line       122                     tree.xpath('//*[@id="detail"]/div[@id="authorIntroduction"]/div[@class="descrip"]//text()'))
Modified var:.. author_introduce_str = '村上春树(1949—)，日本著名作家。京都府人。毕业于早稻田大学文学部。1979年以处女作《且...行状录》、《海边的卡夫卡》、《天黑以后》等。作品被译介至三十多个国家和地区，在世界各地深具影响。'
17:47:29.490173 line       124                 retouve_str = ''.join(pre.findall(author_introduce_str))
17:47:29.495172 line       125                 if retouve_str:
17:47:29.504167 line       128                     author_introduce = author_introduce_str.strip()
Modified var:.. author_introduce = '村上春树(1949—)，日本著名作家。京都府人。毕业于早稻田大学文学部。1979年以处女作《且...行状录》、《海边的卡夫卡》、《天黑以后》等。作品被译介至三十多个国家和地区，在世界各地深具影响。'
17:47:29.508186 line       129                 print('书名作者简介:', author_introduce)
17:47:29.512162 line       134                 abstract_info_span = tree.xpath('//*[@id="detail"]/div[@id="abstract"]/div[@class="descrip"]//text()')
Modified var:.. abstract_info_span = []
17:47:29.526156 line       135                 abstract_info = ''.join(abstract_info_span).strip()
Modified var:.. abstract_info = ''
17:47:29.539148 line       136                 print('编辑推荐：',abstract_info)
17:47:29.544145 line       138                 abstract_info_pic = ''.join(tree.xpath('//*[@id="detail"]/div[@id="abstract"]/div[@class="descrip"]//*/@src'))
17:47:29.560135 line       139                 print('编辑推荐长图：', abstract_info_pic)
17:47:29.563135 line       144                 feature_pic = ''.join(tree.xpath('//*[@id="detail"]/div[@id="feature"]/div[@class="descrip"]//*/@src'))
Modified var:.. feature_pic = ''
17:47:29.573127 line       145                 if not feature_pic:
17:47:29.578125 line       146                     feature_pic = ''.join(
17:47:29.588121 line       147                         tree.xpath('//*[@id="detail"]/div[@id="feature"]/div[@class="descrip"]//*/@data-original'))
17:47:29.594117 line       148                 print('产品特色长图：', feature_pic)
17:47:29.600113 line       153                 attachImage = ''.join(tree.xpath('//*[@id="detail"]/div[@id="attachImage"]/div[@class="descrip"]//*/img/@data-original'))
17:47:29.607109 line       154                 if not attachImage:
17:47:29.611106 line       155                     attachImage = ''.join(tree.xpath(
17:47:29.622100 line       156                     '//*[@id="detail"]/div[@id="attachImage"]/div[@class="descrip"]//*/img/@src'))
17:47:29.627097 line       158                 print('书摘插画：', attachImage)
17:47:29.630095 line       167                 """
Modified var:.. tbook_sql = " REPLACE INTO `t_book` \n                      ..._b_6.jpg',now())\n            \n                "
17:47:29.639090 line       169                 sefl.sql_cursor.query(tbook_sql)
17:47:29.653082 line        31         for link in hrefs:
Modified var:.. link = ('f54917b912b011eba9b5507b9d245e55', 'http://pro...ttp://img3m9.ddimg.cn/67/31/24157849-1_b_11.jpg')
17:47:29.657078 line        33             print('')
17:47:29.661078 line        34             printDarkBlue(f"开始读取详情数据，加载缓存。。。。。\n",FOREGROUND_BLUE)
17:47:29.663075 line        35             url = f'{link[1]}'
Modified var:.. url = 'http://product.dangdang.com/24157849.html'
17:47:29.669073 line        36             try:
17:47:29.675069 line        38                 chrome_opts = webdriver.ChromeOptions()
Modified var:.. chrome_opts = <selenium.webdriver.chrome.options.Options object at 0x000001BB6F766F48>
17:47:29.678067 line        39                 chrome_opts.add_argument("--headless")
17:47:29.683067 line        41                 browser = webdriver.Chrome(options=chrome_opts)
Modified var:.. browser = <selenium.webdriver.chrome.webdriver.WebDriver (session="bd13f22f1a28820574039b916785c837")>
17:47:33.954317 line        43                 browser.get(url)
Source path:... D:\PycharmProjects\DDW\app\get_key_html.py
Starting var:.. self = <app.get_key_html.DdwBooks object at 0x000002176C766AC8>
Starting var:.. args = ()
Starting var:.. kwargs = {}
17:48:02.786871 call        24     def get_ddw_key(self,*args,**kwargs):
17:48:02.791868 line        25         input_key = input("请输入查询的商品：")
New var:....... input_key = '9787533255879'
17:48:07.665106 line        30         url = f"{self.web_href}/?key={input_key.strip()}&act=input"
New var:....... url = 'http://search.dangdang.com/?key=9787533255879&act=input'
17:48:07.668101 line        32             'User-Agent': UserAgent().random
New var:....... headers = {'User-Agent': 'Mozilla/5.0 (Windows NT 6.1; WOW...L, like Gecko) Chrome/31.0.1623.0 Safari/537.36'}
17:48:07.671099 line        34         page = requests.get(url=url, headers=headers)
New var:....... page = <Response [200]>
17:48:08.184091 line        36         tree = html.fromstring(page.text)
New var:....... tree = <Element html at 0x2176d2ffc28>
17:48:08.244053 line        39         go_sort = ''.join(tree.xpath('//*[@id="go_sort"]/div/div[@class="bottom"]/ul//*[@dd_name="当当自营"]//@href'))
New var:....... go_sort = '/?key=9787533255879&act=input&filter=0%7C0%7C0%...C0%7C1%7C0%7C0%7C0%7C0%7C0%7C0%7C0%7C0%7C0#J_tab'
17:48:08.250049 line        40         go_sort_href = self.web_href + go_sort
New var:....... go_sort_href = 'http://search.dangdang.com/?key=9787533255879&a...C0%7C1%7C0%7C0%7C0%7C0%7C0%7C0%7C0%7C0%7C0#J_tab'
17:48:08.252053 line        41         print(f'自营链接地址：{go_sort_href}')
17:48:08.254048 line        44         if go_sort:
17:48:08.256045 line        45             go_page = requests.get(url=go_sort_href, headers=headers)
New var:....... go_page = <Response [200]>
17:48:08.604503 line        46             go_tree = html.fromstring(go_page.text)
New var:....... go_tree = <Element html at 0x2176d2ffcc8>
17:48:08.631486 line        47             bigimge_li_list = go_tree.xpath('//*[@id="search_nature_rg"]/ul/li')
New var:....... bigimge_li_list = [<Element li at 0x2176ddd0598>, <Element li at 0x2176d2c8db8>]
17:48:08.642459 line        50             for n,li in enumerate(bigimge_li_list):
New var:....... n = 0
New var:....... li = <Element li at 0x2176ddd0598>
17:48:08.648477 line        52                 href = ''.join(li.xpath('./p[@class="name"]/a/@href'))
New var:....... href = 'http://product.dangdang.com/25225871.html'
17:48:08.654447 line        54                 printDarkBlue(f'{input_key}书本详情链接=====》：{href}\n',FOREGROUND_GREEN)
17:48:08.657463 line        57                 if len(li.xpath('./a/img/@data-original')) > 0:
17:48:08.659463 line        60                     src_imag = ''.join(li.xpath('./a/img/@src'))
New var:....... src_imag = 'http://img3m1.ddimg.cn/77/11/25225871-1_b_3.jpg'
17:48:08.660462 line        61                     print('封面图片====》’：', src_imag)
17:48:08.664443 line        66                     """
New var:....... book_inof_sql = " replace into book_info(id,src_imag,go_sort_hre....com/25225871.html',now())\n                    "
17:48:08.665460 line        68                 self.sql_cursor.query(book_inof_sql)
17:48:08.676435 line        70                 print('获取详情地址完成！！')
17:48:08.678435 line        50             for n,li in enumerate(bigimge_li_list):
Modified var:.. n = 1
Modified var:.. li = <Element li at 0x2176d2c8db8>
17:48:08.679434 line        52                 href = ''.join(li.xpath('./p[@class="name"]/a/@href'))
Modified var:.. href = 'http://product.dangdang.com/20246031.html'
17:48:08.683431 line        54                 printDarkBlue(f'{input_key}书本详情链接=====》：{href}\n',FOREGROUND_GREEN)
17:48:08.685431 line        57                 if len(li.xpath('./a/img/@data-original')) > 0:
17:48:08.687429 line        58                     src_imag = ''.join(li.xpath('./a/img/@data-original'))
Modified var:.. src_imag = 'http://img3m1.ddimg.cn/36/1/20246031-1_b_5.jpg'
17:48:08.688427 line        66                     """
Modified var:.. book_inof_sql = " replace into book_info(id,src_imag,go_sort_hre....com/20246031.html',now())\n                    "
17:48:08.690426 line        68                 self.sql_cursor.query(book_inof_sql)
17:48:08.706418 line        70                 print('获取详情地址完成！！')
17:48:08.707434 line        50             for n,li in enumerate(bigimge_li_list):
17:48:08.708432 return      50             for n,li in enumerate(bigimge_li_list):
Return value:.. None
Elapsed time: 00:00:05.926544
Source path:... D:\PycharmProjects\DDW\app\get_detail_html.py
Starting var:.. sefl = <app.get_detail_html.DdwBooksDetail object at 0x000002176D2C7B08>
Starting var:.. args = ()
Starting var:.. kwargs = {}
17:48:08.714428 call        25     def get_field(sefl,*args,**kwargs):
17:48:08.720411 line        28         href_sql = """ select id,href,src_imag from book_info"""
New var:....... href_sql = ' select id,href,src_imag from book_info'
17:48:08.721419 line        29         hrefs = sefl.sql_cursor.query(href_sql)
New var:....... hrefs = (('5c009d5b12b911eb805b507b9d245e55', 'http://pr...http://img3m1.ddimg.cn/36/1/20246031-1_b_5.jpg'))
17:48:08.726432 line        30         print(hrefs)
17:48:08.728407 line        31         for link in hrefs:
New var:....... link = ('5c009d5b12b911eb805b507b9d245e55', 'http://pro...http://img3m1.ddimg.cn/77/11/25225871-1_b_3.jpg')
17:48:08.729406 line        33             print('')
17:48:08.731405 line        34             printDarkBlue(f"开始读取详情数据，加载缓存。。。。。\n",FOREGROUND_BLUE)
17:48:08.733406 line        35             url = f'{link[1]}'
New var:....... url = 'http://product.dangdang.com/25225871.html'
17:48:08.734402 line        36             try:
17:48:08.736400 line        38                 chrome_opts = webdriver.ChromeOptions()
New var:....... chrome_opts = <selenium.webdriver.chrome.options.Options object at 0x000002176C41D908>
17:48:08.737400 line        39                 chrome_opts.add_argument("--headless")
17:48:08.739413 line        41                 browser = webdriver.Chrome(options=chrome_opts)
New var:....... browser = <selenium.webdriver.chrome.webdriver.WebDriver (session="46aadd94de297aa14b6c84c03acff58f")>
17:48:12.499309 line        43                 browser.get(url)
17:48:28.529910 line        44                 out_html = browser.page_source
New var:....... out_html = '<html><head><script async="" src="http://nt-dow...amp;random_id=0.3309785257574551"></body></html>'
17:48:28.559905 line        46                 tree = html.fromstring(out_html)
New var:....... tree = <Element html at 0x2176ddd0ea8>
17:48:28.573896 line        51                 product_title_xpath = tree.xpath('//*[@id="product_info"]/div/h1/text()')
New var:....... product_title_xpath = ['\n                    ', '\n                                        信谊绘本：3-6岁中国传统文化绘本·团圆    ']
17:48:28.579878 line        52                 product_title = ''.join(product_title_xpath).strip()
New var:....... product_title = '信谊绘本：3-6岁中国传统文化绘本·团圆'
17:48:28.584877 line        53                 print('书本名称：',product_title)
17:48:28.588873 line        59                 product_author_xpath = tree.xpath('//*[@id="product_info"]/div/span[@dd_name="作者"]/a//text()')
New var:....... product_author_xpath = ['余丽琼', '朱成梁']
17:48:28.592870 line        61                 if product_author_xpath:
17:48:28.596870 line        62                         product_author = ' '.join(product_author_xpath)
New var:....... product_author = '余丽琼 朱成梁'
17:48:28.600866 line        63                         print('作者：',product_author)
17:48:28.604863 line        68                 publishing_company_name_xpath = tree.xpath('//*[@id="product_info"]/div/span[@dd_name="出版社"]/a//text()')
New var:....... publishing_company_name_xpath = ['明天出版社']
17:48:28.609862 line        69                 if publishing_company_name_xpath:
17:48:28.613861 line        70                     publishing_company_name = ''.join(publishing_company_name_xpath)
New var:....... publishing_company_name = '明天出版社'
17:48:28.617858 line        71                     print('出版社：',publishing_company_name)
17:48:28.621868 line        76                 publish_date_xpath = tree.xpath('//*[@id="product_info"]/div/span//text()')
New var:....... publish_date_xpath = ['作者:作者:', '余丽琼', '\u3000文，', '朱成梁', '\u3000绘', '出版社:', '明天出版社', '出版时间:2008年04月\xa0']
17:48:28.626850 line        78                 if publish_date_xpath:
17:48:28.630850 line        79                     for pub_list in publish_date_xpath:
New var:....... pub_list = '作者:作者:'
17:48:28.634846 line        80                         if "出版时间" in pub_list:
17:48:28.637844 line        79                     for pub_list in publish_date_xpath:
Modified var:.. pub_list = '余丽琼'
17:48:28.640845 line        80                         if "出版时间" in pub_list:
17:48:28.643843 line        79                     for pub_list in publish_date_xpath:
Modified var:.. pub_list = '\u3000文，'
17:48:28.647840 line        80                         if "出版时间" in pub_list:
17:48:28.652838 line        79                     for pub_list in publish_date_xpath:
Modified var:.. pub_list = '朱成梁'
17:48:28.655835 line        80                         if "出版时间" in pub_list:
17:48:28.658835 line        79                     for pub_list in publish_date_xpath:
Modified var:.. pub_list = '\u3000绘'
17:48:28.660846 line        80                         if "出版时间" in pub_list:
17:48:28.665830 line        79                     for pub_list in publish_date_xpath:
Modified var:.. pub_list = '出版社:'
17:48:28.667844 line        80                         if "出版时间" in pub_list:
17:48:28.671825 line        79                     for pub_list in publish_date_xpath:
Modified var:.. pub_list = '明天出版社'
17:48:28.674824 line        80                         if "出版时间" in pub_list:
17:48:28.677822 line        79                     for pub_list in publish_date_xpath:
Modified var:.. pub_list = '出版时间:2008年04月\xa0'
17:48:28.680835 line        80                         if "出版时间" in pub_list:
17:48:28.685820 line        81                             publish_date = pub_list.split('出版时间:')[-1].split('\xa0')[0]
New var:....... publish_date = '2008年04月'
17:48:28.687818 line        82                             print('出版时间:',publish_date)
17:48:28.691828 line        79                     for pub_list in publish_date_xpath:
17:48:28.693815 line        87                 price_xpath = tree.xpath('//*[@id="pc-price"]/div/div/p/text()')
New var:....... price_xpath = ['\n                    ', '\n                    ', '\n                ', '39.80']
17:48:28.699810 line        88                 if price_xpath:
17:48:28.703809 line        89                     price = price_xpath[-1]
New var:....... price = '39.80'
17:48:28.705808 line        90                     print('价格：',price)
17:48:28.709803 line        95                 isbn_no_xpath = tree.xpath('//*[@id="detail_all"]/div/ul/li/text()')
New var:....... isbn_no_xpath = ['开 本：16开', '纸 张：铜版纸', '包 装：精装', '是否套装：否', '国际标准书号ISBN：9787533255879']
17:48:28.714800 line        96                 if isbn_no_xpath:
17:48:28.719798 line        97                     for isbn_no_li in isbn_no_xpath:
New var:....... isbn_no_li = '开 本：16开'
17:48:28.722796 line        98                         if "ISBN" in isbn_no_li:
17:48:28.725811 line        97                     for isbn_no_li in isbn_no_xpath:
Modified var:.. isbn_no_li = '纸 张：铜版纸'
17:48:28.727807 line        98                         if "ISBN" in isbn_no_li:
17:48:28.732791 line        97                     for isbn_no_li in isbn_no_xpath:
Modified var:.. isbn_no_li = '包 装：精装'
17:48:28.735805 line        98                         if "ISBN" in isbn_no_li:
17:48:28.738787 line        97                     for isbn_no_li in isbn_no_xpath:
Modified var:.. isbn_no_li = '是否套装：否'
17:48:28.741785 line        98                         if "ISBN" in isbn_no_li:
17:48:28.745798 line        97                     for isbn_no_li in isbn_no_xpath:
Modified var:.. isbn_no_li = '国际标准书号ISBN：9787533255879'
17:48:28.748782 line        98                         if "ISBN" in isbn_no_li:
17:48:28.752779 line        99                             isbn_new_no = isbn_no_li.split('国际标准书号ISBN：')[-1]
New var:....... isbn_new_no = '9787533255879'
17:48:28.755779 line       100                             print('ISBN号:',isbn_new_no)
17:48:28.758778 line        97                     for isbn_no_li in isbn_no_xpath:
17:48:28.761774 line       106                 introduce_str = ''.join(tree.xpath('//*[@id="detail"]/div[@id="content"]/div[@class="descrip"]//text()'))
New var:....... introduce_str = '\xa0 《团圆》——分享爱的温暖和好运。\n毛毛的爸爸是一个建筑师，他每年只能回家一次。除夕...的好运硬币。短短的相聚、沉沉的离别，父亲把一个长长的守望留在了女儿心里！\n\xa0\n\xa0'
17:48:28.767771 line       108                 pre = re.compile('>(.*)<')
New var:....... pre = re.compile('>(.*)<')
17:48:28.771783 line       109                 retouve_str = ''.join(pre.findall(introduce_str))
New var:....... retouve_str = ''
17:48:28.775781 line       111                 if retouve_str:
17:48:28.778766 line       114                     content_introduce = introduce_str.strip()
New var:....... content_introduce = '《团圆》——分享爱的温暖和好运。\n毛毛的爸爸是一个建筑师，他每年只能回家一次。除夕夜，爸爸把...a0\n这是一枚承载着爱的好运硬币。短短的相聚、沉沉的离别，父亲把一个长长的守望留在了女儿心里！'
17:48:28.783762 line       115                 print('内容简介:', content_introduce)
17:48:28.786760 line       121                 author_introduce_str = ''.join(
17:48:28.789758 line       122                     tree.xpath('//*[@id="detail"]/div[@id="authorIntroduction"]/div[@class="descrip"]//text()'))
New var:....... author_introduce_str = '文／余丽琼\xa0 \n1980年出生在安徽安庆。南京大学文学学士、戏剧艺术在读硕士，中国散文...。1994年，《争鹿》由台湾信谊基金出版社出版。2006年，出版第一本自编自绘的图画书《火焰》。'
17:48:28.796756 line       124                 retouve_str = ''.join(pre.findall(author_introduce_str))
17:48:28.803752 line       125                 if retouve_str:
17:48:28.805751 line       128                     author_introduce = author_introduce_str.strip()
New var:....... author_introduce = '文／余丽琼\xa0 \n1980年出生在安徽安庆。南京大学文学学士、戏剧艺术在读硕士，中国散文...。1994年，《争鹿》由台湾信谊基金出版社出版。2006年，出版第一本自编自绘的图画书《火焰》。'
17:48:28.808749 line       129                 print('书名作者简介:', author_introduce)
17:48:28.811745 line       134                 abstract_info_span = tree.xpath('//*[@id="detail"]/div[@id="abstract"]/div[@class="descrip"]//text()')
New var:....... abstract_info_span = ['\n', '本书入选教育部基础教育课程教材发展中心 中小学阅读指导目录（2020年版）', ...时报》年度*儿童图画书', '\n', '\xa0', '\n', '\xa0', '\xa0']
17:48:28.818741 line       135                 abstract_info = ''.join(abstract_info_span).strip()
New var:....... abstract_info = '本书入选教育部基础教育课程教材发展中心 中小学阅读指导目录（2020年版）\n一部将民族传统文...。\n\xa0\n【丰子恺儿童画书奖】*儿童图画书首奖\n2011年《纽约时报》年度*儿童图画书'
17:48:28.821755 line       136                 print('编辑推荐：',abstract_info)
17:48:28.825739 line       138                 abstract_info_pic = ''.join(tree.xpath('//*[@id="detail"]/div[@id="abstract"]/div[@class="descrip"]//*/@src'))
New var:....... abstract_info_pic = 'http://img54.ddimg.cn/99999990147084224.jpg'
17:48:28.829736 line       139                 print('编辑推荐长图：', abstract_info_pic)
17:48:28.834733 line       144                 feature_pic = ''.join(tree.xpath('//*[@id="detail"]/div[@id="feature"]/div[@class="descrip"]//*/@src'))
New var:....... feature_pic = 'http://img55.ddimg.cn/99999990168742015.jpg'
17:48:28.839731 line       145                 if not feature_pic:
17:48:28.843728 line       148                 print('产品特色长图：', feature_pic)
17:48:28.846727 line       153                 attachImage = ''.join(tree.xpath('//*[@id="detail"]/div[@id="attachImage"]/div[@class="descrip"]//*/img/@data-original'))
New var:....... attachImage = 'http://img52.ddimg.cn/99999990002501452.jpg'
17:48:28.851722 line       154                 if not attachImage:
17:48:28.854720 line       158                 print('书摘插画：', attachImage)
17:48:28.857721 line       167                 """
New var:....... tbook_sql = " REPLACE INTO `t_book` \n                      ..._b_3.jpg',now())\n            \n                "
17:48:28.859719 line       169                 sefl.sql_cursor.query(tbook_sql)
17:48:28.883705 line        31         for link in hrefs:
Modified var:.. link = ('5c03e9be12b911eb805b507b9d245e55', 'http://pro...'http://img3m1.ddimg.cn/36/1/20246031-1_b_5.jpg')
17:48:28.886717 line        33             print('')
17:48:28.890702 line        34             printDarkBlue(f"开始读取详情数据，加载缓存。。。。。\n",FOREGROUND_BLUE)
17:48:28.892698 line        35             url = f'{link[1]}'
Modified var:.. url = 'http://product.dangdang.com/20246031.html'
17:48:28.895699 line        36             try:
17:48:28.900707 line        38                 chrome_opts = webdriver.ChromeOptions()
Modified var:.. chrome_opts = <selenium.webdriver.chrome.options.Options object at 0x000002176D2DD908>
17:48:28.903694 line        39                 chrome_opts.add_argument("--headless")
17:48:28.906705 line        41                 browser = webdriver.Chrome(options=chrome_opts)
Modified var:.. browser = <selenium.webdriver.chrome.webdriver.WebDriver (session="8889e4f7cf39b42fe98e2d45b1def227")>
17:48:32.929552 line        43                 browser.get(url)
17:48:44.636053 line        44                 out_html = browser.page_source
Modified var:.. out_html = '<html><head><script async="" src="http://nt-dow...amp;random_id=0.6320771054958847"></body></html>'
17:48:44.669035 line        46                 tree = html.fromstring(out_html)
Modified var:.. tree = <Element html at 0x2176ddcb0e8>
17:48:44.682028 line        51                 product_title_xpath = tree.xpath('//*[@id="product_info"]/div/h1/text()')
Modified var:.. product_title_xpath = ['\n                    ', '\n                                        团圆——信谊 原创图画书系列    ']
17:48:44.688022 line        52                 product_title = ''.join(product_title_xpath).strip()
Modified var:.. product_title = '团圆——信谊 原创图画书系列'
17:48:44.691036 line        53                 print('书本名称：',product_title)
17:48:44.695020 line        59                 product_author_xpath = tree.xpath('//*[@id="product_info"]/div/span[@dd_name="作者"]/a//text()')
17:48:44.701017 line        61                 if product_author_xpath:
17:48:44.704016 line        62                         product_author = ' '.join(product_author_xpath)
17:48:44.706027 line        63                         print('作者：',product_author)
17:48:44.708026 line        68                 publishing_company_name_xpath = tree.xpath('//*[@id="product_info"]/div/span[@dd_name="出版社"]/a//text()')
17:48:44.714010 line        69                 if publishing_company_name_xpath:
17:48:44.717006 line        70                     publishing_company_name = ''.join(publishing_company_name_xpath)
17:48:44.719006 line        71                     print('出版社：',publishing_company_name)
17:48:44.722018 line        76                 publish_date_xpath = tree.xpath('//*[@id="product_info"]/div/span//text()')
Modified var:.. publish_date_xpath = ['作者:', '余丽琼', '\u3000文，', '朱成梁', '\u3000绘', '出版社:', '明天出版社', '出版时间:2008年04月\xa0']
17:48:44.726016 line        78                 if publish_date_xpath:
17:48:44.731008 line        79                     for pub_list in publish_date_xpath:
Modified var:.. pub_list = '作者:'
17:48:44.734012 line        80                         if "出版时间" in pub_list:
17:48:44.738009 line        79                     for pub_list in publish_date_xpath:
Modified var:.. pub_list = '余丽琼'
17:48:44.739995 line        80                         if "出版时间" in pub_list:
17:48:44.744006 line        79                     for pub_list in publish_date_xpath:
Modified var:.. pub_list = '\u3000文，'
17:48:44.747004 line        80                         if "出版时间" in pub_list:
17:48:44.751004 line        79                     for pub_list in publish_date_xpath:
Modified var:.. pub_list = '朱成梁'
17:48:44.754001 line        80                         if "出版时间" in pub_list:
17:48:44.756983 line        79                     for pub_list in publish_date_xpath:
Modified var:.. pub_list = '\u3000绘'
17:48:44.759981 line        80                         if "出版时间" in pub_list:
17:48:44.764980 line        79                     for pub_list in publish_date_xpath:
Modified var:.. pub_list = '出版社:'
17:48:44.766980 line        80                         if "出版时间" in pub_list:
17:48:44.770990 line        79                     for pub_list in publish_date_xpath:
Modified var:.. pub_list = '明天出版社'
17:48:44.773974 line        80                         if "出版时间" in pub_list:
17:48:44.776972 line        79                     for pub_list in publish_date_xpath:
Modified var:.. pub_list = '出版时间:2008年04月\xa0'
17:48:44.779985 line        80                         if "出版时间" in pub_list:
17:48:44.783983 line        81                             publish_date = pub_list.split('出版时间:')[-1].split('\xa0')[0]
17:48:44.786968 line        82                             print('出版时间:',publish_date)
17:48:44.788980 line        79                     for pub_list in publish_date_xpath:
17:48:44.791978 line        87                 price_xpath = tree.xpath('//*[@id="pc-price"]/div/div/p/text()')
Modified var:.. price_xpath = ['\n                    ', '\n                    ', '\n                ', '28.43']
17:48:44.797960 line        88                 if price_xpath:
17:48:44.801959 line        89                     price = price_xpath[-1]
Modified var:.. price = '28.43'
17:48:44.803957 line        90                     print('价格：',price)
17:48:44.807969 line        95                 isbn_no_xpath = tree.xpath('//*[@id="detail_all"]/div/ul/li/text()')
Modified var:.. isbn_no_xpath = ['开 本：大16开', '纸 张：铜版纸', '包 装：精装', '是否套装：否', '国际标准书号ISBN：9787533255879', '丛书名：信谊原创图画书系列']
17:48:44.812952 line        96                 if isbn_no_xpath:
17:48:44.817951 line        97                     for isbn_no_li in isbn_no_xpath:
Modified var:.. isbn_no_li = '开 本：大16开'
17:48:44.820947 line        98                         if "ISBN" in isbn_no_li:
17:48:44.824945 line        97                     for isbn_no_li in isbn_no_xpath:
Modified var:.. isbn_no_li = '纸 张：铜版纸'
17:48:44.826958 line        98                         if "ISBN" in isbn_no_li:
17:48:44.831941 line        97                     for isbn_no_li in isbn_no_xpath:
Modified var:.. isbn_no_li = '包 装：精装'
17:48:44.834941 line        98                         if "ISBN" in isbn_no_li:
17:48:44.837939 line        97                     for isbn_no_li in isbn_no_xpath:
Modified var:.. isbn_no_li = '是否套装：否'
17:48:44.840935 line        98                         if "ISBN" in isbn_no_li:
17:48:44.846932 line        97                     for isbn_no_li in isbn_no_xpath:
Modified var:.. isbn_no_li = '国际标准书号ISBN：9787533255879'
17:48:44.850945 line        98                         if "ISBN" in isbn_no_li:
17:48:44.854928 line        99                             isbn_new_no = isbn_no_li.split('国际标准书号ISBN：')[-1]
17:48:44.857926 line       100                             print('ISBN号:',isbn_new_no)
17:48:44.860924 line        97                     for isbn_no_li in isbn_no_xpath:
Modified var:.. isbn_no_li = '丛书名：信谊原创图画书系列'
17:48:44.866921 line        98                         if "ISBN" in isbn_no_li:
17:48:44.870918 line        97                     for isbn_no_li in isbn_no_xpath:
17:48:44.873916 line       106                 introduce_str = ''.join(tree.xpath('//*[@id="detail"]/div[@id="content"]/div[@class="descrip"]//text()'))
Modified var:.. introduce_str = '\u3000为离家很远的缘故，已经习惯了对家乡和父母的遥望，这些遥望常常是伴随着童年的回忆一下...。没想到很多年后，我和父亲换了位置——那个在家守望的人是他，而那个一心想要赶回家过年的人是我……'
17:48:44.879913 line       108                 pre = re.compile('>(.*)<')
17:48:44.884911 line       109                 retouve_str = ''.join(pre.findall(introduce_str))
17:48:44.889908 line       111                 if retouve_str:
17:48:44.897903 line       114                     content_introduce = introduce_str.strip()
Modified var:.. content_introduce = '为离家很远的缘故，已经习惯了对家乡和父母的遥望，这些遥望常常是伴随着童年的回忆一下子涌到我面前...。没想到很多年后，我和父亲换了位置——那个在家守望的人是他，而那个一心想要赶回家过年的人是我……'
17:48:44.903900 line       115                 print('内容简介:', content_introduce)
17:48:44.907898 line       121                 author_introduce_str = ''.join(
17:48:44.909898 line       122                     tree.xpath('//*[@id="detail"]/div[@id="authorIntroduction"]/div[@class="descrip"]//text()'))
Modified var:.. author_introduce_str = '余丽琼，1980年出生在安徽安庆。南京大学文学学士、戏剧艺术在读硕士，中国散文学会会员。现为《东方娃娃》编辑。1996年至今已发表散文、小说十余万字。'
17:48:44.916892 line       124                 retouve_str = ''.join(pre.findall(author_introduce_str))
17:48:44.921890 line       125                 if retouve_str:
17:48:44.923888 line       128                     author_introduce = author_introduce_str.strip()
Modified var:.. author_introduce = '余丽琼，1980年出生在安徽安庆。南京大学文学学士、戏剧艺术在读硕士，中国散文学会会员。现为《东方娃娃》编辑。1996年至今已发表散文、小说十余万字。'
17:48:44.926886 line       129                 print('书名作者简介:', author_introduce)
17:48:44.932883 line       134                 abstract_info_span = tree.xpath('//*[@id="detail"]/div[@id="abstract"]/div[@class="descrip"]//text()')
Modified var:.. abstract_info_span = ['适读人群 ：5-8岁', '\n', '\u3000\u3000团圆 属于你我的节日故事',...供了坚实的展开基础，也给绘者留下了广阔的创意空间。', '\n', '\xa0', '\xa0']
17:48:44.938879 line       135                 abstract_info = ''.join(abstract_info_span).strip()
Modified var:.. abstract_info = '适读人群 ：5-8岁\n\u3000\u3000团圆 属于你我的节日故事\u3000\u300...情感表达酽而不烈，结构安排疏而不漏，既為绘画提供了坚实的展开基础，也给绘者留下了广阔的创意空间。'
17:48:44.941879 line       136                 print('编辑推荐：',abstract_info)
17:48:44.947874 line       138                 abstract_info_pic = ''.join(tree.xpath('//*[@id="detail"]/div[@id="abstract"]/div[@class="descrip"]//*/@src'))
Modified var:.. abstract_info_pic = ''
17:48:44.953872 line       139                 print('编辑推荐长图：', abstract_info_pic)
17:48:44.956869 line       144                 feature_pic = ''.join(tree.xpath('//*[@id="detail"]/div[@id="feature"]/div[@class="descrip"]//*/@src'))
Modified var:.. feature_pic = ''
17:48:44.962866 line       145                 if not feature_pic:
17:48:44.968862 line       146                     feature_pic = ''.join(
17:48:44.970861 line       147                         tree.xpath('//*[@id="detail"]/div[@id="feature"]/div[@class="descrip"]//*/@data-original'))
17:48:44.974859 line       148                 print('产品特色长图：', feature_pic)
17:48:44.977857 line       153                 attachImage = ''.join(tree.xpath('//*[@id="detail"]/div[@id="attachImage"]/div[@class="descrip"]//*/img/@data-original'))
Modified var:.. attachImage = 'http://img57.ddimg.cn/99999990001989737.jpg'
17:48:44.985852 line       154                 if not attachImage:
17:48:44.988851 line       158                 print('书摘插画：', attachImage)
17:48:44.991851 line       167                 """
Modified var:.. tbook_sql = " REPLACE INTO `t_book` \n                      ..._b_5.jpg',now())\n            \n                "
17:48:44.996847 line       169                 sefl.sql_cursor.query(tbook_sql)
17:48:45.015836 line        31         for link in hrefs:
17:48:45.020832 line       172         print('详情数据已加载到数据库。。。')
17:48:45.025832 line       173         flag =True
New var:....... flag = True
17:48:45.031831 line       174         return flag
17:48:45.046818 return     174         return flag
Return value:.. True
Elapsed time: 00:00:36.341385
Source path:... D:\PycharmProjects\DDW\app\get_key_html.py
Starting var:.. self = <app.get_key_html.DdwBooks object at 0x000001BF10594848>
Starting var:.. args = ()
Starting var:.. kwargs = {}
17:52:09.212272 call        24     def get_ddw_key(self,*args,**kwargs):
17:52:09.217284 line        25         input_key = input("请输入查询的商品：")
Source path:... D:\PycharmProjects\DDW\app\get_key_html.py
Starting var:.. self = <app.get_key_html.DdwBooks object at 0x0000025E9AD16B08>
Starting var:.. args = ()
Starting var:.. kwargs = {}
17:52:38.096398 call        24     def get_ddw_key(self,*args,**kwargs):
17:52:38.101393 line        25         input_key = input("请输入查询的商品：")
New var:....... input_key = '9787533255879'
17:52:42.085121 line        30         url = f"{self.web_href}/?key={input_key.strip()}&act=input"
New var:....... url = 'http://search.dangdang.com/?key=9787533255879&act=input'
17:52:42.088120 line        32             'User-Agent': UserAgent().random
New var:....... headers = {'User-Agent': 'Mozilla/5.0 (Windows; U; Windows...HTML, like Gecko) Version/5.0.2 Safari/533.18.5'}
17:52:42.091117 line        34         page = requests.get(url=url, headers=headers)
New var:....... page = <Response [200]>
17:52:42.602825 line        36         tree = html.fromstring(page.text)
New var:....... tree = <Element html at 0x25e9b8afb38>
17:52:42.653795 line        39         go_sort = ''.join(tree.xpath('//*[@id="go_sort"]/div/div[@class="bottom"]/ul//*[@dd_name="当当自营"]//@href'))
New var:....... go_sort = '/?key=9787533255879&act=input&filter=0%7C0%7C0%...C0%7C1%7C0%7C0%7C0%7C0%7C0%7C0%7C0%7C0%7C0#J_tab'
17:52:42.662808 line        40         go_sort_href = self.web_href + go_sort
New var:....... go_sort_href = 'http://search.dangdang.com/?key=9787533255879&a...C0%7C1%7C0%7C0%7C0%7C0%7C0%7C0%7C0%7C0%7C0#J_tab'
17:52:42.665807 line        41         print(f'自营链接地址：{go_sort_href}')
17:52:42.668791 line        44         if go_sort:
17:52:42.670789 line        45             go_page = requests.get(url=go_sort_href, headers=headers)
New var:....... go_page = <Response [200]>
17:52:43.014618 line        46             go_tree = html.fromstring(go_page.text)
New var:....... go_tree = <Element html at 0x25e9b8afbd8>
17:52:43.031608 line        47             bigimge_li_list = go_tree.xpath('//*[@id="search_nature_rg"]/ul/li')
New var:....... bigimge_li_list = [<Element li at 0x25e9b9104a8>, <Element li at 0x25e9b879d68>]
17:52:43.036628 line        50             for n,li in enumerate(bigimge_li_list):
New var:....... n = 0
New var:....... li = <Element li at 0x25e9b9104a8>
17:52:43.039623 line        52                 href = ''.join(li.xpath('./p[@class="name"]/a/@href'))
New var:....... href = 'http://product.dangdang.com/25225871.html'
17:52:43.044605 line        54                 printDarkBlue(f'{input_key}书本详情链接=====》：{href}\n',FOREGROUND_GREEN)
17:52:43.047603 line        57                 if len(li.xpath('./a/img/@data-original')) > 0:
17:52:43.048602 line        60                     src_imag = ''.join(li.xpath('./a/img/@src'))
New var:....... src_imag = 'http://img3m1.ddimg.cn/77/11/25225871-1_b_3.jpg'
17:52:43.050601 line        61                     print('封面图片====》’：', src_imag)
17:52:43.054596 line        66                     """
New var:....... book_inof_sql = " replace into book_info(id,src_imag,go_sort_hre....com/25225871.html',now())\n                    "
17:52:43.056594 line        68                 self.sql_cursor.query(book_inof_sql)
17:52:43.066589 line        70                 print('获取详情地址完成！！')
17:52:43.068587 line        50             for n,li in enumerate(bigimge_li_list):
Modified var:.. n = 1
Modified var:.. li = <Element li at 0x25e9b879d68>
17:52:43.069586 line        52                 href = ''.join(li.xpath('./p[@class="name"]/a/@href'))
Modified var:.. href = 'http://product.dangdang.com/20246031.html'
17:52:43.074587 line        54                 printDarkBlue(f'{input_key}书本详情链接=====》：{href}\n',FOREGROUND_GREEN)
17:52:43.078584 line        57                 if len(li.xpath('./a/img/@data-original')) > 0:
17:52:43.079585 line        58                     src_imag = ''.join(li.xpath('./a/img/@data-original'))
Modified var:.. src_imag = 'http://img3m1.ddimg.cn/36/1/20246031-1_b_5.jpg'
17:52:43.081583 line        66                     """
Modified var:.. book_inof_sql = " replace into book_info(id,src_imag,go_sort_hre....com/20246031.html',now())\n                    "
17:52:43.084597 line        68                 self.sql_cursor.query(book_inof_sql)
17:52:43.096571 line        70                 print('获取详情地址完成！！')
17:52:43.098570 line        50             for n,li in enumerate(bigimge_li_list):
17:52:43.099569 return      50             for n,li in enumerate(bigimge_li_list):
Return value:.. None
Elapsed time: 00:00:05.012169
Source path:... D:\PycharmProjects\DDW\app\get_detail_html.py
Starting var:.. sefl = <app.get_detail_html.DdwBooksDetail object at 0x0000025E9B7D5308>
Starting var:.. args = ()
Starting var:.. kwargs = {}
17:52:43.109582 call        25     def get_field(sefl,*args,**kwargs):
17:52:43.117562 line        28         href_sql = """ select id,href,src_imag from book_info"""
New var:....... href_sql = ' select id,href,src_imag from book_info'
17:52:43.119561 line        29         hrefs = sefl.sql_cursor.query(href_sql)
New var:....... hrefs = (('ff8d2fef12b911eb805b507b9d245e55', 'http://pr...http://img3m1.ddimg.cn/36/1/20246031-1_b_5.jpg'))
17:52:43.127572 line        30         print(hrefs)
17:52:43.130569 line        31         for link in hrefs:
New var:....... link = ('ff8d2fef12b911eb805b507b9d245e55', 'http://pro...http://img3m1.ddimg.cn/77/11/25225871-1_b_3.jpg')
17:52:43.132553 line        33             print('')
17:52:43.135561 line        34             printDarkBlue(f"开始读取详情数据，加载缓存。。。。。\n",FOREGROUND_BLUE)
17:52:43.137567 line        35             url = f'{link[1]}'
New var:....... url = 'http://product.dangdang.com/25225871.html'
17:52:43.139546 line        36             try:
17:52:43.142547 line        38                 chrome_opts = webdriver.ChromeOptions()
New var:....... chrome_opts = <selenium.webdriver.chrome.options.Options object at 0x0000025E9B7E8C08>
17:52:43.143563 line        39                 chrome_opts.add_argument("--headless")
17:52:43.146546 line        41                 browser = webdriver.Chrome(options=chrome_opts)
New var:....... browser = <selenium.webdriver.chrome.webdriver.WebDriver (session="a14b03b87459729d475ad80ca6163a67")>
17:52:46.765555 line        43                 browser.get(url)
17:53:04.641590 line        44                 out_html = browser.page_source
New var:....... out_html = '<html><head><script async="" src="http://nt-dow...amp;random_id=0.5504690167439754"></body></html>'
17:53:04.698555 line        46                 tree = html.fromstring(out_html)
New var:....... tree = <Element html at 0x25e9b910e08>
17:53:04.711550 line        51                 product_title_xpath = tree.xpath('//*[@id="product_info"]/div/h1/text()')
New var:....... product_title_xpath = ['\n                    ', '\n                                        信谊绘本：3-6岁中国传统文化绘本·团圆    ']
17:53:04.716559 line        52                 product_title = ''.join(product_title_xpath).strip()
New var:....... product_title = '信谊绘本：3-6岁中国传统文化绘本·团圆'
17:53:04.719544 line        53                 print('书本名称：',product_title)
17:53:04.723541 line        59                 product_author_xpath = tree.xpath('//*[@id="product_info"]/div/span[@dd_name="作者"]/a//text()')
New var:....... product_author_xpath = ['余丽琼', '朱成梁']
17:53:04.727538 line        61                 if product_author_xpath:
17:53:04.731537 line        62                         product_author = ' '.join(product_author_xpath)
New var:....... product_author = '余丽琼 朱成梁'
17:53:04.733537 line        63                         print('作者：',product_author)
17:53:04.737548 line        68                 publishing_company_name_xpath = tree.xpath('//*[@id="product_info"]/div/span[@dd_name="出版社"]/a//text()')
New var:....... publishing_company_name_xpath = ['明天出版社']
17:53:04.741545 line        69                 if publishing_company_name_xpath:
17:53:04.745543 line        70                     publishing_company_name = ''.join(publishing_company_name_xpath)
New var:....... publishing_company_name = '明天出版社'
17:53:04.747542 line        71                     print('出版社：',publishing_company_name)
17:53:04.751527 line        76                 publish_date_xpath = tree.xpath('//*[@id="product_info"]/div/span//text()')
New var:....... publish_date_xpath = ['作者:作者:', '余丽琼', '\u3000文，', '朱成梁', '\u3000绘', '出版社:', '明天出版社', '出版时间:2008年04月\xa0']
17:53:04.755537 line        78                 if publish_date_xpath:
17:53:04.759521 line        79                     for pub_list in publish_date_xpath:
New var:....... pub_list = '作者:作者:'
17:53:04.762519 line        80                         if "出版时间" in pub_list:
17:53:04.765531 line        79                     for pub_list in publish_date_xpath:
Modified var:.. pub_list = '余丽琼'
17:53:04.768517 line        80                         if "出版时间" in pub_list:
17:53:04.771516 line        79                     for pub_list in publish_date_xpath:
Modified var:.. pub_list = '\u3000文，'
17:53:04.774527 line        80                         if "出版时间" in pub_list:
17:53:04.778509 line        79                     for pub_list in publish_date_xpath:
Modified var:.. pub_list = '朱成梁'
17:53:04.780510 line        80                         if "出版时间" in pub_list:
17:53:04.783508 line        79                     for pub_list in publish_date_xpath:
Modified var:.. pub_list = '\u3000绘'
17:53:04.786520 line        80                         if "出版时间" in pub_list:
17:53:04.789505 line        79                     for pub_list in publish_date_xpath:
Modified var:.. pub_list = '出版社:'
17:53:04.792517 line        80                         if "出版时间" in pub_list:
17:53:04.795502 line        79                     for pub_list in publish_date_xpath:
Modified var:.. pub_list = '明天出版社'
17:53:04.798513 line        80                         if "出版时间" in pub_list:
17:53:04.801500 line        79                     for pub_list in publish_date_xpath:
Modified var:.. pub_list = '出版时间:2008年04月\xa0'
17:53:04.804499 line        80                         if "出版时间" in pub_list:
17:53:04.808492 line        81                             publish_date = pub_list.split('出版时间:')[-1].split('\xa0')[0]
New var:....... publish_date = '2008年04月'
17:53:04.810491 line        82                             print('出版时间:',publish_date)
17:53:04.814506 line        79                     for pub_list in publish_date_xpath:
17:53:04.816504 line        87                 price_xpath = tree.xpath('//*[@id="pc-price"]/div/div/p/text()')
New var:....... price_xpath = ['\n                    ', '\n                    ', '\n                ', '39.80']
17:53:04.821485 line        88                 if price_xpath:
17:53:04.824486 line        89                     price = price_xpath[-1]
New var:....... price = '39.80'
17:53:04.827481 line        90                     print('价格：',price)
17:53:04.830495 line        95                 isbn_no_xpath = tree.xpath('//*[@id="detail_all"]/div/ul/li/text()')
New var:....... isbn_no_xpath = ['开 本：16开', '纸 张：铜版纸', '包 装：精装', '是否套装：否', '国际标准书号ISBN：9787533255879']
17:53:04.836476 line        96                 if isbn_no_xpath:
17:53:04.839478 line        97                     for isbn_no_li in isbn_no_xpath:
New var:....... isbn_no_li = '开 本：16开'
17:53:04.844475 line        98                         if "ISBN" in isbn_no_li:
17:53:04.847473 line        97                     for isbn_no_li in isbn_no_xpath:
Modified var:.. isbn_no_li = '纸 张：铜版纸'
17:53:04.850469 line        98                         if "ISBN" in isbn_no_li:
17:53:04.855466 line        97                     for isbn_no_li in isbn_no_xpath:
Modified var:.. isbn_no_li = '包 装：精装'
17:53:04.858467 line        98                         if "ISBN" in isbn_no_li:
17:53:04.862462 line        97                     for isbn_no_li in isbn_no_xpath:
Modified var:.. isbn_no_li = '是否套装：否'
17:53:04.864461 line        98                         if "ISBN" in isbn_no_li:
17:53:04.869458 line        97                     for isbn_no_li in isbn_no_xpath:
Modified var:.. isbn_no_li = '国际标准书号ISBN：9787533255879'
17:53:04.871457 line        98                         if "ISBN" in isbn_no_li:
17:53:04.875455 line        99                             isbn_new_no = isbn_no_li.split('国际标准书号ISBN：')[-1]
New var:....... isbn_new_no = '9787533255879'
17:53:04.878455 line       100                             print('ISBN号:',isbn_new_no)
17:53:04.881451 line        97                     for isbn_no_li in isbn_no_xpath:
17:53:04.885450 line       106                 introduce_str = ''.join(tree.xpath('//*[@id="detail"]/div[@id="content"]/div[@class="descrip"]//text()'))
New var:....... introduce_str = '\xa0 《团圆》——分享爱的温暖和好运。\n毛毛的爸爸是一个建筑师，他每年只能回家一次。除夕...的好运硬币。短短的相聚、沉沉的离别，父亲把一个长长的守望留在了女儿心里！\n\xa0\n\xa0'
17:53:04.890445 line       108                 pre = re.compile('>(.*)<')
New var:....... pre = re.compile('>(.*)<')
17:53:04.894447 line       109                 retouve_str = ''.join(pre.findall(introduce_str))
New var:....... retouve_str = ''
17:53:04.898441 line       111                 if retouve_str:
17:53:04.902439 line       114                     content_introduce = introduce_str.strip()
New var:....... content_introduce = '《团圆》——分享爱的温暖和好运。\n毛毛的爸爸是一个建筑师，他每年只能回家一次。除夕夜，爸爸把...a0\n这是一枚承载着爱的好运硬币。短短的相聚、沉沉的离别，父亲把一个长长的守望留在了女儿心里！'
17:53:04.905437 line       115                 print('内容简介:', content_introduce)
17:53:04.908435 line       121                 author_introduce_str = ''.join(
17:53:04.911434 line       122                     tree.xpath('//*[@id="detail"]/div[@id="authorIntroduction"]/div[@class="descrip"]//text()'))
New var:....... author_introduce_str = '文／余丽琼\xa0 \n1980年出生在安徽安庆。南京大学文学学士、戏剧艺术在读硕士，中国散文...。1994年，《争鹿》由台湾信谊基金出版社出版。2006年，出版第一本自编自绘的图画书《火焰》。'
17:53:04.915433 line       124                 retouve_str = ''.join(pre.findall(author_introduce_str))
17:53:04.920429 line       125                 if retouve_str:
17:53:04.923431 line       128                     author_introduce = author_introduce_str.strip()
New var:....... author_introduce = '文／余丽琼\xa0 \n1980年出生在安徽安庆。南京大学文学学士、戏剧艺术在读硕士，中国散文...。1994年，《争鹿》由台湾信谊基金出版社出版。2006年，出版第一本自编自绘的图画书《火焰》。'
17:53:04.925427 line       129                 print('书名作者简介:', author_introduce)
17:53:04.929427 line       134                 abstract_info_span = tree.xpath('//*[@id="detail"]/div[@id="abstract"]/div[@class="descrip"]//text()')
New var:....... abstract_info_span = ['\n', '本书入选教育部基础教育课程教材发展中心 中小学阅读指导目录（2020年版）', ...时报》年度*儿童图画书', '\n', '\xa0', '\n', '\xa0', '\xa0']
17:53:04.935423 line       135                 abstract_info = ''.join(abstract_info_span).strip()
New var:....... abstract_info = '本书入选教育部基础教育课程教材发展中心 中小学阅读指导目录（2020年版）\n一部将民族传统文...。\n\xa0\n【丰子恺儿童画书奖】*儿童图画书首奖\n2011年《纽约时报》年度*儿童图画书'
17:53:04.939418 line       136                 print('编辑推荐：',abstract_info)
17:53:04.943417 line       138                 abstract_info_pic = ''.join(tree.xpath('//*[@id="detail"]/div[@id="abstract"]/div[@class="descrip"]//*/@src'))
New var:....... abstract_info_pic = 'http://img54.ddimg.cn/99999990147084224.jpg'
17:53:04.948412 line       139                 print('编辑推荐长图：', abstract_info_pic)
17:53:04.953411 line       144                 feature_pic = ''.join(tree.xpath('//*[@id="detail"]/div[@id="feature"]/div[@class="descrip"]//*/@src'))
New var:....... feature_pic = 'http://img55.ddimg.cn/99999990168742015.jpg'
17:53:04.957407 line       145                 if not feature_pic:
17:53:04.961406 line       148                 print('产品特色长图：', feature_pic)
17:53:04.963404 line       153                 attachImage = ''.join(tree.xpath('//*[@id="detail"]/div[@id="attachImage"]/div[@class="descrip"]//*/img/@data-original'))
New var:....... attachImage = 'http://img52.ddimg.cn/99999990002501452.jpg'
17:53:04.969402 line       154                 if not attachImage:
17:53:04.972399 line       158                 print('书摘插画：', attachImage)
17:53:04.976397 line       167                 """
New var:....... tbook_sql = " REPLACE INTO `t_book` \n                      ..._b_3.jpg',now())\n            \n                "
17:53:04.979395 line       169                 sefl.sql_cursor.query(tbook_sql)
17:53:04.991388 line        31         for link in hrefs:
Modified var:.. link = ('ff91857712b911eb805b507b9d245e55', 'http://pro...'http://img3m1.ddimg.cn/36/1/20246031-1_b_5.jpg')
17:53:04.994389 line        33             print('')
17:53:04.997384 line        34             printDarkBlue(f"开始读取详情数据，加载缓存。。。。。\n",FOREGROUND_BLUE)
17:53:05.000383 line        35             url = f'{link[1]}'
Modified var:.. url = 'http://product.dangdang.com/20246031.html'
17:53:05.003382 line        36             try:
17:53:05.008378 line        38                 chrome_opts = webdriver.ChromeOptions()
Modified var:.. chrome_opts = <selenium.webdriver.chrome.options.Options object at 0x0000025E9B8A2588>
17:53:05.011376 line        39                 chrome_opts.add_argument("--headless")
17:53:05.015376 line        41                 browser = webdriver.Chrome(options=chrome_opts)
Modified var:.. browser = <selenium.webdriver.chrome.webdriver.WebDriver (session="389a4418498c6b6ad6e0b5dba7b23a78")>
17:53:08.700925 line        43                 browser.get(url)
17:53:14.567708 line        44                 out_html = browser.page_source
Modified var:.. out_html = '<html><head><script async="" src="http://nt-dow...amp;random_id=0.8151603724663834"></body></html>'
17:53:14.616676 line        46                 tree = html.fromstring(out_html)
Modified var:.. tree = <Element html at 0x25e9b9139f8>
17:53:14.630131 line        51                 product_title_xpath = tree.xpath('//*[@id="product_info"]/div/h1/text()')
Modified var:.. product_title_xpath = ['\n                    ', '\n                                        团圆——信谊 原创图画书系列    ']
17:53:14.636139 line        52                 product_title = ''.join(product_title_xpath).strip()
Modified var:.. product_title = '团圆——信谊 原创图画书系列'
17:53:14.640126 line        53                 print('书本名称：',product_title)
17:53:14.643112 line        59                 product_author_xpath = tree.xpath('//*[@id="product_info"]/div/span[@dd_name="作者"]/a//text()')
17:53:14.648122 line        61                 if product_author_xpath:
17:53:14.650120 line        62                         product_author = ' '.join(product_author_xpath)
17:53:14.654103 line        63                         print('作者：',product_author)
17:53:14.657102 line        68                 publishing_company_name_xpath = tree.xpath('//*[@id="product_info"]/div/span[@dd_name="出版社"]/a//text()')
17:53:14.661101 line        69                 if publishing_company_name_xpath:
17:53:14.665097 line        70                     publishing_company_name = ''.join(publishing_company_name_xpath)
17:53:14.670095 line        71                     print('出版社：',publishing_company_name)
17:53:14.672109 line        76                 publish_date_xpath = tree.xpath('//*[@id="product_info"]/div/span//text()')
Modified var:.. publish_date_xpath = ['作者:', '余丽琼', '\u3000文，', '朱成梁', '\u3000绘', '出版社:', '明天出版社', '出版时间:2008年04月\xa0']
17:53:14.677093 line        78                 if publish_date_xpath:
17:53:14.680088 line        79                     for pub_list in publish_date_xpath:
Modified var:.. pub_list = '作者:'
17:53:14.683102 line        80                         if "出版时间" in pub_list:
17:53:14.687109 line        79                     for pub_list in publish_date_xpath:
Modified var:.. pub_list = '余丽琼'
17:53:14.690082 line        80                         if "出版时间" in pub_list:
17:53:14.693081 line        79                     for pub_list in publish_date_xpath:
Modified var:.. pub_list = '\u3000文，'
17:53:14.695079 line        80                         if "出版时间" in pub_list:
17:53:14.699079 line        79                     for pub_list in publish_date_xpath:
Modified var:.. pub_list = '朱成梁'
17:53:14.704075 line        80                         if "出版时间" in pub_list:
17:53:14.707073 line        79                     for pub_list in publish_date_xpath:
Modified var:.. pub_list = '\u3000绘'
17:53:14.710073 line        80                         if "出版时间" in pub_list:
17:53:14.713071 line        79                     for pub_list in publish_date_xpath:
Modified var:.. pub_list = '出版社:'
17:53:14.716083 line        80                         if "出版时间" in pub_list:
17:53:14.720080 line        79                     for pub_list in publish_date_xpath:
Modified var:.. pub_list = '明天出版社'
17:53:14.722079 line        80                         if "出版时间" in pub_list:
17:53:14.725062 line        79                     for pub_list in publish_date_xpath:
Modified var:.. pub_list = '出版时间:2008年04月\xa0'
17:53:14.728637 line        80                         if "出版时间" in pub_list:
17:53:14.731650 line        81                             publish_date = pub_list.split('出版时间:')[-1].split('\xa0')[0]
17:53:14.734635 line        82                             print('出版时间:',publish_date)
17:53:14.737647 line        79                     for pub_list in publish_date_xpath:
17:53:14.740630 line        87                 price_xpath = tree.xpath('//*[@id="pc-price"]/div/div/p/text()')
Modified var:.. price_xpath = ['\n                    ', '\n                    ', '\n                ', '28.43']
17:53:14.744629 line        88                 if price_xpath:
17:53:14.747628 line        89                     price = price_xpath[-1]
Modified var:.. price = '28.43'
17:53:14.750624 line        90                     print('价格：',price)
17:53:14.754623 line        95                 isbn_no_xpath = tree.xpath('//*[@id="detail_all"]/div/ul/li/text()')
Modified var:.. isbn_no_xpath = ['开 本：大16开', '纸 张：铜版纸', '包 装：精装', '是否套装：否', '国际标准书号ISBN：9787533255879', '丛书名：信谊原创图画书系列']
17:53:14.758622 line        96                 if isbn_no_xpath:
17:53:14.761633 line        97                     for isbn_no_li in isbn_no_xpath:
Modified var:.. isbn_no_li = '开 本：大16开'
17:53:14.764616 line        98                         if "ISBN" in isbn_no_li:
17:53:14.767615 line        97                     for isbn_no_li in isbn_no_xpath:
Modified var:.. isbn_no_li = '纸 张：铜版纸'
17:53:14.770627 line        98                         if "ISBN" in isbn_no_li:
17:53:14.773626 line        97                     for isbn_no_li in isbn_no_xpath:
Modified var:.. isbn_no_li = '包 装：精装'
17:53:14.775624 line        98                         if "ISBN" in isbn_no_li:
17:53:14.779624 line        97                     for isbn_no_li in isbn_no_xpath:
Modified var:.. isbn_no_li = '是否套装：否'
17:53:14.781621 line        98                         if "ISBN" in isbn_no_li:
17:53:14.785608 line        97                     for isbn_no_li in isbn_no_xpath:
Modified var:.. isbn_no_li = '国际标准书号ISBN：9787533255879'
17:53:14.788603 line        98                         if "ISBN" in isbn_no_li:
17:53:14.791603 line        99                             isbn_new_no = isbn_no_li.split('国际标准书号ISBN：')[-1]
17:53:14.793602 line       100                             print('ISBN号:',isbn_new_no)
17:53:14.796600 line        97                     for isbn_no_li in isbn_no_xpath:
Modified var:.. isbn_no_li = '丛书名：信谊原创图画书系列'
17:53:14.799597 line        98                         if "ISBN" in isbn_no_li:
17:53:14.802611 line        97                     for isbn_no_li in isbn_no_xpath:
17:53:14.805608 line       106                 introduce_str = ''.join(tree.xpath('//*[@id="detail"]/div[@id="content"]/div[@class="descrip"]//text()'))
Modified var:.. introduce_str = '\u3000为离家很远的缘故，已经习惯了对家乡和父母的遥望，这些遥望常常是伴随着童年的回忆一下...。没想到很多年后，我和父亲换了位置——那个在家守望的人是他，而那个一心想要赶回家过年的人是我……'
17:53:14.809605 line       108                 pre = re.compile('>(.*)<')
17:53:14.812603 line       109                 retouve_str = ''.join(pre.findall(introduce_str))
17:53:14.815603 line       111                 if retouve_str:
17:53:14.818586 line       114                     content_introduce = introduce_str.strip()
Modified var:.. content_introduce = '为离家很远的缘故，已经习惯了对家乡和父母的遥望，这些遥望常常是伴随着童年的回忆一下子涌到我面前...。没想到很多年后，我和父亲换了位置——那个在家守望的人是他，而那个一心想要赶回家过年的人是我……'
17:53:14.821602 line       115                 print('内容简介:', content_introduce)
17:53:14.824598 line       121                 author_introduce_str = ''.join(
17:53:14.827580 line       122                     tree.xpath('//*[@id="detail"]/div[@id="authorIntroduction"]/div[@class="descrip"]//text()'))
Modified var:.. author_introduce_str = '余丽琼，1980年出生在安徽安庆。南京大学文学学士、戏剧艺术在读硕士，中国散文学会会员。现为《东方娃娃》编辑。1996年至今已发表散文、小说十余万字。'
17:53:14.831130 line       124                 retouve_str = ''.join(pre.findall(author_introduce_str))
17:53:14.834114 line       125                 if retouve_str:
17:53:14.839110 line       128                     author_introduce = author_introduce_str.strip()
Modified var:.. author_introduce = '余丽琼，1980年出生在安徽安庆。南京大学文学学士、戏剧艺术在读硕士，中国散文学会会员。现为《东方娃娃》编辑。1996年至今已发表散文、小说十余万字。'
17:53:14.842111 line       129                 print('书名作者简介:', author_introduce)
17:53:14.845108 line       134                 abstract_info_span = tree.xpath('//*[@id="detail"]/div[@id="abstract"]/div[@class="descrip"]//text()')
Modified var:.. abstract_info_span = ['适读人群 ：5-8岁', '\n', '\u3000\u3000团圆 属于你我的节日故事',...供了坚实的展开基础，也给绘者留下了广阔的创意空间。', '\n', '\xa0', '\xa0']
17:53:14.856102 line       135                 abstract_info = ''.join(abstract_info_span).strip()
Modified var:.. abstract_info = '适读人群 ：5-8岁\n\u3000\u3000团圆 属于你我的节日故事\u3000\u300...情感表达酽而不烈，结构安排疏而不漏，既為绘画提供了坚实的展开基础，也给绘者留下了广阔的创意空间。'
17:53:14.859102 line       136                 print('编辑推荐：',abstract_info)
17:53:14.863097 line       138                 abstract_info_pic = ''.join(tree.xpath('//*[@id="detail"]/div[@id="abstract"]/div[@class="descrip"]//*/@src'))
Modified var:.. abstract_info_pic = ''
17:53:14.871092 line       139                 print('编辑推荐长图：', abstract_info_pic)
17:53:14.875092 line       144                 feature_pic = ''.join(tree.xpath('//*[@id="detail"]/div[@id="feature"]/div[@class="descrip"]//*/@src'))
Modified var:.. feature_pic = ''
17:53:14.884086 line       145                 if not feature_pic:
17:53:14.890082 line       146                     feature_pic = ''.join(
17:53:14.895080 line       147                         tree.xpath('//*[@id="detail"]/div[@id="feature"]/div[@class="descrip"]//*/@data-original'))
17:53:14.904074 line       148                 print('产品特色长图：', feature_pic)
17:53:14.908072 line       153                 attachImage = ''.join(tree.xpath('//*[@id="detail"]/div[@id="attachImage"]/div[@class="descrip"]//*/img/@data-original'))
Modified var:.. attachImage = 'http://img57.ddimg.cn/99999990001989737.jpg'
17:53:14.916068 line       154                 if not attachImage:
17:53:14.921065 line       158                 print('书摘插画：', attachImage)
17:53:14.925064 line       167                 """
Modified var:.. tbook_sql = " REPLACE INTO `t_book` \n                      ..._b_5.jpg',now())\n            \n                "
17:53:14.928065 line       169                 sefl.sql_cursor.query(tbook_sql)
17:53:14.936080 line        31         for link in hrefs:
17:53:14.939068 line       172         print('详情数据已加载到数据库。。。')
17:53:14.941067 line       173         flag =True
New var:....... flag = True
17:53:14.944055 line       174         return flag
17:53:14.948056 return     174         return flag
Return value:.. True
Elapsed time: 00:00:31.841467
Starting var:.. self = <app.get_key_html.DdwBooks object at 0x0000025E9AD16B08>
Starting var:.. args = ()
Starting var:.. kwargs = {}
17:53:14.953046 call        24     def get_ddw_key(self,*args,**kwargs):
17:53:14.957055 line        25         input_key = input("请输入查询的商品：")
Source path:... D:\PycharmProjects\DDW\app\get_key_html.py
Starting var:.. self = <app.get_key_html.DdwBooks object at 0x000001C18A767608>
Starting var:.. args = ()
Starting var:.. kwargs = {}
17:53:28.919025 call        24     def get_ddw_key(self,*args,**kwargs):
17:53:28.925022 line        25         input_key = input("请输入查询的商品：")
New var:....... input_key = '9787533255879'
17:53:38.044675 line        30         url = f"{self.web_href}/?key={input_key.strip()}&act=input"
New var:....... url = 'http://search.dangdang.com/?key=9787533255879&act=input'
17:53:38.046673 line        32             'User-Agent': UserAgent().random
New var:....... headers = {'User-Agent': 'Mozilla/5.0 (X11; NetBSD) AppleW... like Gecko) Chrome/27.0.1453.116 Safari/537.36'}
17:53:38.049670 line        34         page = requests.get(url=url, headers=headers)
New var:....... page = <Response [200]>
17:53:38.411494 line        36         tree = html.fromstring(page.text)
New var:....... tree = <Element html at 0x1c18a7a0c28>
17:53:38.479768 line        39         go_sort = ''.join(tree.xpath('//*[@id="go_sort"]/div/div[@class="bottom"]/ul//*[@dd_name="当当自营"]//@href'))
New var:....... go_sort = '/?key=9787533255879&act=input&filter=0%7C0%7C0%...C0%7C1%7C0%7C0%7C0%7C0%7C0%7C0%7C0%7C0%7C0#J_tab'
17:53:38.486765 line        40         go_sort_href = self.web_href + go_sort
New var:....... go_sort_href = 'http://search.dangdang.com/?key=9787533255879&a...C0%7C1%7C0%7C0%7C0%7C0%7C0%7C0%7C0%7C0%7C0#J_tab'
17:53:38.487765 line        41         print(f'自营链接地址：{go_sort_href}')
17:53:38.490750 line        44         if go_sort:
17:53:38.491747 line        45             go_page = requests.get(url=go_sort_href, headers=headers)
New var:....... go_page = <Response [200]>
17:53:38.709633 line        46             go_tree = html.fromstring(go_page.text)
New var:....... go_tree = <Element html at 0x1c18a7a0cc8>
17:53:38.728641 line        47             bigimge_li_list = go_tree.xpath('//*[@id="search_nature_rg"]/ul/li')
New var:....... bigimge_li_list = [<Element li at 0x1c18a800598>, <Element li at 0x1c18a768e08>]
17:53:38.734619 line        50             for n,li in enumerate(bigimge_li_list):
New var:....... n = 0
New var:....... li = <Element li at 0x1c18a800598>
17:53:38.738620 line        52                 href = ''.join(li.xpath('./p[@class="name"]/a/@href'))
New var:....... href = 'http://product.dangdang.com/25225871.html'
17:53:38.743614 line        54                 printDarkBlue(f'{input_key}书本详情链接=====》：{href}\n',FOREGROUND_GREEN)
17:53:38.746615 line        57                 if len(li.xpath('./a/img/@data-original')) > 0:
17:53:38.748614 line        60                     src_imag = ''.join(li.xpath('./a/img/@src'))
New var:....... src_imag = 'http://img3m1.ddimg.cn/77/11/25225871-1_b_3.jpg'
17:53:38.749631 line        61                     print('封面图片====》’：', src_imag)
17:53:38.753608 line        66                     """
New var:....... book_inof_sql = " replace into book_info(id,src_imag,go_sort_hre....com/25225871.html',now())\n                    "
17:53:38.755611 line        68                 self.sql_cursor.query(book_inof_sql)
17:53:38.769675 line        70                 print('获取详情地址完成！！')
17:53:38.771617 line        50             for n,li in enumerate(bigimge_li_list):
Modified var:.. n = 1
Modified var:.. li = <Element li at 0x1c18a768e08>
17:53:38.773616 line        52                 href = ''.join(li.xpath('./p[@class="name"]/a/@href'))
Modified var:.. href = 'http://product.dangdang.com/20246031.html'
17:53:38.779593 line        54                 printDarkBlue(f'{input_key}书本详情链接=====》：{href}\n',FOREGROUND_GREEN)
17:53:38.783590 line        57                 if len(li.xpath('./a/img/@data-original')) > 0:
17:53:38.785593 line        58                     src_imag = ''.join(li.xpath('./a/img/@data-original'))
Modified var:.. src_imag = 'http://img3m1.ddimg.cn/36/1/20246031-1_b_5.jpg'
17:53:38.787593 line        66                     """
Modified var:.. book_inof_sql = " replace into book_info(id,src_imag,go_sort_hre....com/20246031.html',now())\n                    "
17:53:38.790606 line        68                 self.sql_cursor.query(book_inof_sql)
17:53:38.802600 line        70                 print('获取详情地址完成！！')
17:53:38.804584 line        50             for n,li in enumerate(bigimge_li_list):
17:53:38.806577 return      50             for n,li in enumerate(bigimge_li_list):
Return value:.. None
Elapsed time: 00:00:09.896550
Source path:... D:\PycharmProjects\DDW\app\get_detail_html.py
Starting var:.. sefl = <app.get_detail_html.DdwBooksDetail object at 0x000001C18A7679C8>
Starting var:.. args = ()
Starting var:.. kwargs = {}
17:53:38.816591 call        25     def get_field(sefl,*args,**kwargs):
17:53:38.825570 line        28         href_sql = """ select id,href,src_imag from book_info"""
New var:....... href_sql = ' select id,href,src_imag from book_info'
17:53:38.827585 line        29         hrefs = sefl.sql_cursor.query(href_sql)
New var:....... hrefs = (('ff8d2fef12b911eb805b507b9d245e55', 'http://pr...http://img3m1.ddimg.cn/36/1/20246031-1_b_5.jpg'))
17:53:38.836580 line        30         print(hrefs)
17:53:38.839578 line        31         for link in hrefs:
New var:....... link = ('ff8d2fef12b911eb805b507b9d245e55', 'http://pro...http://img3m1.ddimg.cn/77/11/25225871-1_b_3.jpg')
17:53:38.841577 line        33             print('')
17:53:38.845558 line        34             printDarkBlue(f"开始读取详情数据，加载缓存。。。。。\n",FOREGROUND_BLUE)
17:53:38.848555 line        35             url = f'{link[1]}'
New var:....... url = 'http://product.dangdang.com/25225871.html'
17:53:38.849553 line        36             try:
17:53:38.853550 line        38                 chrome_opts = webdriver.ChromeOptions()
New var:....... chrome_opts = <selenium.webdriver.chrome.options.Options object at 0x000001C18A767E88>
17:53:38.855549 line        39                 chrome_opts.add_argument("--headless")
17:53:38.859547 line        41                 browser = webdriver.Chrome(options=chrome_opts)
New var:....... browser = <selenium.webdriver.chrome.webdriver.WebDriver (session="6e2318402be660e7d8362cf13206b3a0")>
17:53:42.553271 line        43                 browser.get(url)
17:53:58.087870 line        44                 out_html = browser.page_source
New var:....... out_html = '<html><head><script async="" src="http://nt-dow...amp;random_id=0.6494834563515355"></body></html>'
17:53:58.115851 line        46                 tree = html.fromstring(out_html)
New var:....... tree = <Element html at 0x1c189dbee08>
17:53:58.127858 line        51                 product_title_xpath = tree.xpath('//*[@id="product_info"]/div/h1/text()')
New var:....... product_title_xpath = ['\n                    ', '\n                                        信谊绘本：3-6岁中国传统文化绘本·团圆    ']
17:53:58.133842 line        52                 product_title = ''.join(product_title_xpath).strip()
New var:....... product_title = '信谊绘本：3-6岁中国传统文化绘本·团圆'
17:53:58.136839 line        53                 print('书本名称：',product_title)
17:53:58.140836 line        59                 product_author_xpath = tree.xpath('//*[@id="product_info"]/div/span[@dd_name="作者"]/a//text()')
New var:....... product_author_xpath = ['余丽琼', '朱成梁']
17:53:58.144834 line        61                 if product_author_xpath:
17:53:58.147848 line        62                         product_author = ' '.join(product_author_xpath)
New var:....... product_author = '余丽琼 朱成梁'
17:53:58.150847 line        63                         print('作者：',product_author)
17:53:58.154830 line        68                 publishing_company_name_xpath = tree.xpath('//*[@id="product_info"]/div/span[@dd_name="出版社"]/a//text()')
New var:....... publishing_company_name_xpath = ['明天出版社']
17:53:58.158826 line        69                 if publishing_company_name_xpath:
17:53:58.161825 line        70                     publishing_company_name = ''.join(publishing_company_name_xpath)
New var:....... publishing_company_name = '明天出版社'
17:53:58.163823 line        71                     print('出版社：',publishing_company_name)
17:53:58.167824 line        76                 publish_date_xpath = tree.xpath('//*[@id="product_info"]/div/span//text()')
New var:....... publish_date_xpath = ['作者:作者:', '余丽琼', '\u3000文，', '朱成梁', '\u3000绘', '出版社:', '明天出版社', '出版时间:2008年04月\xa0']
17:53:58.171833 line        78                 if publish_date_xpath:
17:53:58.174832 line        79                     for pub_list in publish_date_xpath:
New var:....... pub_list = '作者:作者:'
17:53:58.177827 line        80                         if "出版时间" in pub_list:
17:53:58.180829 line        79                     for pub_list in publish_date_xpath:
Modified var:.. pub_list = '余丽琼'
17:53:58.183827 line        80                         if "出版时间" in pub_list:
17:53:58.187810 line        79                     for pub_list in publish_date_xpath:
Modified var:.. pub_list = '\u3000文，'
17:53:58.189808 line        80                         if "出版时间" in pub_list:
17:53:58.192807 line        79                     for pub_list in publish_date_xpath:
Modified var:.. pub_list = '朱成梁'
17:53:58.195808 line        80                         if "出版时间" in pub_list:
17:53:58.198819 line        79                     for pub_list in publish_date_xpath:
Modified var:.. pub_list = '\u3000绘'
17:53:58.201804 line        80                         if "出版时间" in pub_list:
17:53:58.204802 line        79                     for pub_list in publish_date_xpath:
Modified var:.. pub_list = '出版社:'
17:53:58.206799 line        80                         if "出版时间" in pub_list:
17:53:58.210799 line        79                     for pub_list in publish_date_xpath:
Modified var:.. pub_list = '明天出版社'
17:53:58.212797 line        80                         if "出版时间" in pub_list:
17:53:58.216794 line        79                     for pub_list in publish_date_xpath:
Modified var:.. pub_list = '出版时间:2008年04月\xa0'
17:53:58.219792 line        80                         if "出版时间" in pub_list:
17:53:58.222790 line        81                             publish_date = pub_list.split('出版时间:')[-1].split('\xa0')[0]
New var:....... publish_date = '2008年04月'
17:53:58.224788 line        82                             print('出版时间:',publish_date)
17:53:58.228786 line        79                     for pub_list in publish_date_xpath:
17:53:58.231784 line        87                 price_xpath = tree.xpath('//*[@id="pc-price"]/div/div/p/text()')
New var:....... price_xpath = ['\n                    ', '\n                    ', '\n                ', '39.80']
17:53:58.235797 line        88                 if price_xpath:
17:53:58.239782 line        89                     price = price_xpath[-1]
New var:....... price = '39.80'
17:53:58.241794 line        90                     print('价格：',price)
17:53:58.245777 line        95                 isbn_no_xpath = tree.xpath('//*[@id="detail_all"]/div/ul/li/text()')
New var:....... isbn_no_xpath = ['开 本：16开', '纸 张：铜版纸', '包 装：精装', '是否套装：否', '国际标准书号ISBN：9787533255879']
17:53:58.250774 line        96                 if isbn_no_xpath:
17:53:58.253787 line        97                     for isbn_no_li in isbn_no_xpath:
New var:....... isbn_no_li = '开 本：16开'
17:53:58.255786 line        98                         if "ISBN" in isbn_no_li:
17:53:58.259768 line        97                     for isbn_no_li in isbn_no_xpath:
Modified var:.. isbn_no_li = '纸 张：铜版纸'
17:53:58.261783 line        98                         if "ISBN" in isbn_no_li:
17:53:58.265765 line        97                     for isbn_no_li in isbn_no_xpath:
Modified var:.. isbn_no_li = '包 装：精装'
17:53:58.267780 line        98                         if "ISBN" in isbn_no_li:
17:53:58.271776 line        97                     for isbn_no_li in isbn_no_xpath:
Modified var:.. isbn_no_li = '是否套装：否'
17:53:58.273775 line        98                         if "ISBN" in isbn_no_li:
17:53:58.277774 line        97                     for isbn_no_li in isbn_no_xpath:
Modified var:.. isbn_no_li = '国际标准书号ISBN：9787533255879'
17:53:58.280757 line        98                         if "ISBN" in isbn_no_li:
17:53:58.284755 line        99                             isbn_new_no = isbn_no_li.split('国际标准书号ISBN：')[-1]
New var:....... isbn_new_no = '9787533255879'
17:53:58.286753 line       100                             print('ISBN号:',isbn_new_no)
17:53:58.290751 line        97                     for isbn_no_li in isbn_no_xpath:
17:53:58.292750 line       106                 introduce_str = ''.join(tree.xpath('//*[@id="detail"]/div[@id="content"]/div[@class="descrip"]//text()'))
New var:....... introduce_str = '\xa0 《团圆》——分享爱的温暖和好运。\n毛毛的爸爸是一个建筑师，他每年只能回家一次。除夕...的好运硬币。短短的相聚、沉沉的离别，父亲把一个长长的守望留在了女儿心里！\n\xa0\n\xa0'
17:53:58.298763 line       108                 pre = re.compile('>(.*)<')
New var:....... pre = re.compile('>(.*)<')
17:53:58.304758 line       109                 retouve_str = ''.join(pre.findall(introduce_str))
New var:....... retouve_str = ''
17:53:58.308741 line       111                 if retouve_str:
17:53:58.312741 line       114                     content_introduce = introduce_str.strip()
New var:....... content_introduce = '《团圆》——分享爱的温暖和好运。\n毛毛的爸爸是一个建筑师，他每年只能回家一次。除夕夜，爸爸把...a0\n这是一枚承载着爱的好运硬币。短短的相聚、沉沉的离别，父亲把一个长长的守望留在了女儿心里！'
17:53:58.316736 line       115                 print('内容简介:', content_introduce)
17:53:58.320734 line       121                 author_introduce_str = ''.join(
17:53:58.323732 line       122                     tree.xpath('//*[@id="detail"]/div[@id="authorIntroduction"]/div[@class="descrip"]//text()'))
New var:....... author_introduce_str = '文／余丽琼\xa0 \n1980年出生在安徽安庆。南京大学文学学士、戏剧艺术在读硕士，中国散文...。1994年，《争鹿》由台湾信谊基金出版社出版。2006年，出版第一本自编自绘的图画书《火焰》。'
17:53:58.328764 line       124                 retouve_str = ''.join(pre.findall(author_introduce_str))
17:53:58.331762 line       125                 if retouve_str:
17:53:58.334744 line       128                     author_introduce = author_introduce_str.strip()
New var:....... author_introduce = '文／余丽琼\xa0 \n1980年出生在安徽安庆。南京大学文学学士、戏剧艺术在读硕士，中国散文...。1994年，《争鹿》由台湾信谊基金出版社出版。2006年，出版第一本自编自绘的图画书《火焰》。'
17:53:58.337743 line       129                 print('书名作者简介:', author_introduce)
17:53:58.340756 line       134                 abstract_info_span = tree.xpath('//*[@id="detail"]/div[@id="abstract"]/div[@class="descrip"]//text()')
New var:....... abstract_info_span = ['\n', '本书入选教育部基础教育课程教材发展中心 中小学阅读指导目录（2020年版）', ...时报》年度*儿童图画书', '\n', '\xa0', '\n', '\xa0', '\xa0']
17:53:58.345741 line       135                 abstract_info = ''.join(abstract_info_span).strip()
New var:....... abstract_info = '本书入选教育部基础教育课程教材发展中心 中小学阅读指导目录（2020年版）\n一部将民族传统文...。\n\xa0\n【丰子恺儿童画书奖】*儿童图画书首奖\n2011年《纽约时报》年度*儿童图画书'
17:53:58.352735 line       136                 print('编辑推荐：',abstract_info)
17:53:58.356733 line       138                 abstract_info_pic = ''.join(tree.xpath('//*[@id="detail"]/div[@id="abstract"]/div[@class="descrip"]//*/@src'))
New var:....... abstract_info_pic = 'http://img54.ddimg.cn/99999990147084224.jpg'
17:53:58.362731 line       139                 print('编辑推荐长图：', abstract_info_pic)
17:53:58.368726 line       144                 feature_pic = ''.join(tree.xpath('//*[@id="detail"]/div[@id="feature"]/div[@class="descrip"]//*/@src'))
New var:....... feature_pic = 'http://img55.ddimg.cn/99999990168742015.jpg'
17:53:58.373724 line       145                 if not feature_pic:
17:53:58.377720 line       148                 print('产品特色长图：', feature_pic)
17:53:58.379721 line       153                 attachImage = ''.join(tree.xpath('//*[@id="detail"]/div[@id="attachImage"]/div[@class="descrip"]//*/img/@data-original'))
New var:....... attachImage = 'http://img52.ddimg.cn/99999990002501452.jpg'
17:53:58.386716 line       154                 if not attachImage:
17:53:58.390715 line       158                 print('书摘插画：', attachImage)
17:53:58.393711 line       167                 """
New var:....... tbook_sql = " REPLACE INTO `t_book` \n                      ..._b_3.jpg',now())\n            \n                "
17:53:58.395710 line       169                 sefl.sql_cursor.query(tbook_sql)
17:53:58.407703 line        31         for link in hrefs:
Modified var:.. link = ('ff91857712b911eb805b507b9d245e55', 'http://pro...'http://img3m1.ddimg.cn/36/1/20246031-1_b_5.jpg')
17:53:58.410703 line        33             print('')
17:53:58.414699 line        34             printDarkBlue(f"开始读取详情数据，加载缓存。。。。。\n",FOREGROUND_BLUE)
17:53:58.418699 line        35             url = f'{link[1]}'
Modified var:.. url = 'http://product.dangdang.com/20246031.html'
17:53:58.421701 line        36             try:
17:53:58.425693 line        38                 chrome_opts = webdriver.ChromeOptions()
Modified var:.. chrome_opts = <selenium.webdriver.chrome.options.Options object at 0x000001C18A556B88>
17:53:58.427691 line        39                 chrome_opts.add_argument("--headless")
17:53:58.431690 line        41                 browser = webdriver.Chrome(options=chrome_opts)
Modified var:.. browser = <selenium.webdriver.chrome.webdriver.WebDriver (session="87fa7956a7650406227b2c216774393c")>
17:54:02.205980 line        43                 browser.get(url)
17:54:20.453702 line        44                 out_html = browser.page_source
Modified var:.. out_html = '<html><head><script async="" src="http://nt-dow...mp;random_id=0.19253493786512554"></body></html>'
17:54:20.503648 line        46                 tree = html.fromstring(out_html)
Modified var:.. tree = <Element html at 0x1c18a7f8138>
17:54:20.516639 line        51                 product_title_xpath = tree.xpath('//*[@id="product_info"]/div/h1/text()')
Modified var:.. product_title_xpath = ['\n                    ', '\n                                        团圆——信谊 原创图画书系列    ']
17:54:20.521636 line        52                 product_title = ''.join(product_title_xpath).strip()
Modified var:.. product_title = '团圆——信谊 原创图画书系列'
17:54:20.524634 line        53                 print('书本名称：',product_title)
17:54:20.527633 line        59                 product_author_xpath = tree.xpath('//*[@id="product_info"]/div/span[@dd_name="作者"]/a//text()')
17:54:20.532645 line        61                 if product_author_xpath:
17:54:20.535643 line        62                         product_author = ' '.join(product_author_xpath)
17:54:20.537642 line        63                         print('作者：',product_author)
17:54:20.540625 line        68                 publishing_company_name_xpath = tree.xpath('//*[@id="product_info"]/div/span[@dd_name="出版社"]/a//text()')
17:54:20.544623 line        69                 if publishing_company_name_xpath:
17:54:20.547638 line        70                     publishing_company_name = ''.join(publishing_company_name_xpath)
17:54:20.550634 line        71                     print('出版社：',publishing_company_name)
17:54:20.552618 line        76                 publish_date_xpath = tree.xpath('//*[@id="product_info"]/div/span//text()')
Modified var:.. publish_date_xpath = ['作者:', '余丽琼', '\u3000文，', '朱成梁', '\u3000绘', '出版社:', '明天出版社', '出版时间:2008年04月\xa0']
17:54:20.557631 line        78                 if publish_date_xpath:
17:54:20.560629 line        79                     for pub_list in publish_date_xpath:
Modified var:.. pub_list = '作者:'
17:54:20.562615 line        80                         if "出版时间" in pub_list:
17:54:20.567610 line        79                     for pub_list in publish_date_xpath:
Modified var:.. pub_list = '余丽琼'
17:54:20.569610 line        80                         if "出版时间" in pub_list:
17:54:20.573610 line        79                     for pub_list in publish_date_xpath:
Modified var:.. pub_list = '\u3000文，'
17:54:20.575620 line        80                         if "出版时间" in pub_list:
17:54:20.578603 line        79                     for pub_list in publish_date_xpath:
Modified var:.. pub_list = '朱成梁'
17:54:20.580602 line        80                         if "出版时间" in pub_list:
17:54:20.584616 line        79                     for pub_list in publish_date_xpath:
Modified var:.. pub_list = '\u3000绘'
17:54:20.586614 line        80                         if "出版时间" in pub_list:
17:54:20.590612 line        79                     for pub_list in publish_date_xpath:
Modified var:.. pub_list = '出版社:'
17:54:20.592611 line        80                         if "出版时间" in pub_list:
17:54:20.596608 line        79                     for pub_list in publish_date_xpath:
Modified var:.. pub_list = '明天出版社'
17:54:20.599591 line        80                         if "出版时间" in pub_list:
17:54:20.602590 line        79                     for pub_list in publish_date_xpath:
Modified var:.. pub_list = '出版时间:2008年04月\xa0'
17:54:20.605588 line        80                         if "出版时间" in pub_list:
17:54:20.608602 line        81                             publish_date = pub_list.split('出版时间:')[-1].split('\xa0')[0]
17:54:20.611585 line        82                             print('出版时间:',publish_date)
17:54:20.613583 line        79                     for pub_list in publish_date_xpath:
17:54:20.616583 line        87                 price_xpath = tree.xpath('//*[@id="pc-price"]/div/div/p/text()')
Modified var:.. price_xpath = ['\n                    ', '\n                    ', '\n                ', '28.43']
17:54:20.620594 line        88                 if price_xpath:
17:54:20.624593 line        89                     price = price_xpath[-1]
Modified var:.. price = '28.43'
17:54:20.626592 line        90                     print('价格：',price)
17:54:20.629575 line        95                 isbn_no_xpath = tree.xpath('//*[@id="detail_all"]/div/ul/li/text()')
Modified var:.. isbn_no_xpath = ['开 本：大16开', '纸 张：铜版纸', '包 装：精装', '是否套装：否', '国际标准书号ISBN：9787533255879', '丛书名：信谊原创图画书系列']
17:54:20.635570 line        96                 if isbn_no_xpath:
17:54:20.638571 line        97                     for isbn_no_li in isbn_no_xpath:
Modified var:.. isbn_no_li = '开 本：大16开'
17:54:20.640584 line        98                         if "ISBN" in isbn_no_li:
17:54:20.643568 line        97                     for isbn_no_li in isbn_no_xpath:
Modified var:.. isbn_no_li = '纸 张：铜版纸'
17:54:20.646580 line        98                         if "ISBN" in isbn_no_li:
17:54:20.650577 line        97                     for isbn_no_li in isbn_no_xpath:
Modified var:.. isbn_no_li = '包 装：精装'
17:54:20.652576 line        98                         if "ISBN" in isbn_no_li:
17:54:20.656561 line        97                     for isbn_no_li in isbn_no_xpath:
Modified var:.. isbn_no_li = '是否套装：否'
17:54:20.658573 line        98                         if "ISBN" in isbn_no_li:
17:54:20.661557 line        97                     for isbn_no_li in isbn_no_xpath:
Modified var:.. isbn_no_li = '国际标准书号ISBN：9787533255879'
17:54:20.665555 line        98                         if "ISBN" in isbn_no_li:
17:54:20.669552 line        99                             isbn_new_no = isbn_no_li.split('国际标准书号ISBN：')[-1]
17:54:20.671565 line       100                             print('ISBN号:',isbn_new_no)
17:54:20.673564 line        97                     for isbn_no_li in isbn_no_xpath:
Modified var:.. isbn_no_li = '丛书名：信谊原创图画书系列'
17:54:20.676563 line        98                         if "ISBN" in isbn_no_li:
17:54:20.679546 line        97                     for isbn_no_li in isbn_no_xpath:
17:54:20.682545 line       106                 introduce_str = ''.join(tree.xpath('//*[@id="detail"]/div[@id="content"]/div[@class="descrip"]//text()'))
Modified var:.. introduce_str = '\u3000为离家很远的缘故，已经习惯了对家乡和父母的遥望，这些遥望常常是伴随着童年的回忆一下...。没想到很多年后，我和父亲换了位置——那个在家守望的人是他，而那个一心想要赶回家过年的人是我……'
17:54:20.686556 line       108                 pre = re.compile('>(.*)<')
17:54:20.690540 line       109                 retouve_str = ''.join(pre.findall(introduce_str))
17:54:20.692538 line       111                 if retouve_str:
17:54:20.695536 line       114                     content_introduce = introduce_str.strip()
Modified var:.. content_introduce = '为离家很远的缘故，已经习惯了对家乡和父母的遥望，这些遥望常常是伴随着童年的回忆一下子涌到我面前...。没想到很多年后，我和父亲换了位置——那个在家守望的人是他，而那个一心想要赶回家过年的人是我……'
17:54:20.698535 line       115                 print('内容简介:', content_introduce)
17:54:20.701533 line       121                 author_introduce_str = ''.join(
17:54:20.704546 line       122                     tree.xpath('//*[@id="detail"]/div[@id="authorIntroduction"]/div[@class="descrip"]//text()'))
Modified var:.. author_introduce_str = '余丽琼，1980年出生在安徽安庆。南京大学文学学士、戏剧艺术在读硕士，中国散文学会会员。现为《东方娃娃》编辑。1996年至今已发表散文、小说十余万字。'
17:54:20.708543 line       124                 retouve_str = ''.join(pre.findall(author_introduce_str))
17:54:20.711527 line       125                 if retouve_str:
17:54:20.714541 line       128                     author_introduce = author_introduce_str.strip()
Modified var:.. author_introduce = '余丽琼，1980年出生在安徽安庆。南京大学文学学士、戏剧艺术在读硕士，中国散文学会会员。现为《东方娃娃》编辑。1996年至今已发表散文、小说十余万字。'
17:54:20.717539 line       129                 print('书名作者简介:', author_introduce)
17:54:20.720523 line       134                 abstract_info_span = tree.xpath('//*[@id="detail"]/div[@id="abstract"]/div[@class="descrip"]//text()')
Modified var:.. abstract_info_span = ['适读人群 ：5-8岁', '\n', '\u3000\u3000团圆 属于你我的节日故事',...供了坚实的展开基础，也给绘者留下了广阔的创意空间。', '\n', '\xa0', '\xa0']
17:54:20.726521 line       135                 abstract_info = ''.join(abstract_info_span).strip()
Modified var:.. abstract_info = '适读人群 ：5-8岁\n\u3000\u3000团圆 属于你我的节日故事\u3000\u300...情感表达酽而不烈，结构安排疏而不漏，既為绘画提供了坚实的展开基础，也给绘者留下了广阔的创意空间。'
17:54:20.730532 line       136                 print('编辑推荐：',abstract_info)
17:54:20.734530 line       138                 abstract_info_pic = ''.join(tree.xpath('//*[@id="detail"]/div[@id="abstract"]/div[@class="descrip"]//*/@src'))
Modified var:.. abstract_info_pic = ''
17:54:20.738512 line       139                 print('编辑推荐长图：', abstract_info_pic)
17:54:20.742510 line       144                 feature_pic = ''.join(tree.xpath('//*[@id="detail"]/div[@id="feature"]/div[@class="descrip"]//*/@src'))
Modified var:.. feature_pic = ''
17:54:20.746507 line       145                 if not feature_pic:
17:54:20.752505 line       146                     feature_pic = ''.join(
17:54:20.755503 line       147                         tree.xpath('//*[@id="detail"]/div[@id="feature"]/div[@class="descrip"]//*/@data-original'))
17:54:20.759502 line       148                 print('产品特色长图：', feature_pic)
17:54:20.761498 line       153                 attachImage = ''.join(tree.xpath('//*[@id="detail"]/div[@id="attachImage"]/div[@class="descrip"]//*/img/@data-original'))
Modified var:.. attachImage = 'http://img57.ddimg.cn/99999990001989737.jpg'
17:54:20.767496 line       154                 if not attachImage:
17:54:20.770497 line       158                 print('书摘插画：', attachImage)
17:54:20.773507 line       167                 """
Modified var:.. tbook_sql = " REPLACE INTO `t_book` \n                      ..._b_5.jpg',now())\n            \n                "
17:54:20.775505 line       169                 sefl.sql_cursor.query(tbook_sql)
17:54:20.784486 line        31         for link in hrefs:
17:54:20.788487 line       172         print('详情数据已加载到数据库。。。')
17:54:20.791482 line       173         flag =True
New var:....... flag = True
17:54:20.793480 line       174         return flag
17:54:20.797478 return     174         return flag
Return value:.. True
Elapsed time: 00:00:41.985886
Starting var:.. self = <app.get_key_html.DdwBooks object at 0x000001C18A767608>
Starting var:.. args = ()
Starting var:.. kwargs = {}
17:54:20.803475 call        24     def get_ddw_key(self,*args,**kwargs):
17:54:20.807473 line        25         input_key = input("请输入查询的商品：")
New var:....... input_key = '9787556428991'
17:54:28.487846 line        30         url = f"{self.web_href}/?key={input_key.strip()}&act=input"
New var:....... url = 'http://search.dangdang.com/?key=9787556428991&act=input'
17:54:28.489842 line        32             'User-Agent': UserAgent().random
New var:....... headers = {'User-Agent': 'Mozilla/5.0 (X11; OpenBSD i386) ... like Gecko) Chrome/36.0.1985.125 Safari/537.36'}
17:54:28.492841 line        34         page = requests.get(url=url, headers=headers)
New var:....... page = <Response [200]>
17:54:32.936023 line        36         tree = html.fromstring(page.text)
New var:....... tree = <Element html at 0x1c18a7f8098>
17:54:32.986000 line        39         go_sort = ''.join(tree.xpath('//*[@id="go_sort"]/div/div[@class="bottom"]/ul//*[@dd_name="当当自营"]//@href'))
New var:....... go_sort = '/?key=9787556428991&act=input&filter=0%7C0%7C0%...C0%7C1%7C0%7C0%7C0%7C0%7C0%7C0%7C0%7C0%7C0#J_tab'
17:54:32.991984 line        40         go_sort_href = self.web_href + go_sort
New var:....... go_sort_href = 'http://search.dangdang.com/?key=9787556428991&a...C0%7C1%7C0%7C0%7C0%7C0%7C0%7C0%7C0%7C0%7C0#J_tab'
17:54:32.993984 line        41         print(f'自营链接地址：{go_sort_href}')
17:54:32.995981 line        44         if go_sort:
17:54:32.997982 line        45             go_page = requests.get(url=go_sort_href, headers=headers)
New var:....... go_page = <Response [200]>
17:54:33.239840 line        46             go_tree = html.fromstring(go_page.text)
New var:....... go_tree = <Element html at 0x1c18a825ef8>
17:54:33.250834 line        47             bigimge_li_list = go_tree.xpath('//*[@id="search_nature_rg"]/ul/li')
New var:....... bigimge_li_list = [<Element li at 0x1c18a80ef98>, <Element li at 0x1c18a804db8>]
17:54:33.253832 line        50             for n,li in enumerate(bigimge_li_list):
New var:....... n = 0
New var:....... li = <Element li at 0x1c18a80ef98>
17:54:33.255831 line        52                 href = ''.join(li.xpath('./p[@class="name"]/a/@href'))
New var:....... href = 'http://product.dangdang.com/28553919.html'
17:54:33.258832 line        54                 printDarkBlue(f'{input_key}书本详情链接=====》：{href}\n',FOREGROUND_GREEN)
17:54:33.260831 line        57                 if len(li.xpath('./a/img/@data-original')) > 0:
17:54:33.261831 line        60                     src_imag = ''.join(li.xpath('./a/img/@src'))
New var:....... src_imag = 'http://img3m9.ddimg.cn/42/20/28553919-1_b_9.jpg'
17:54:33.262830 line        61                     print('封面图片====》’：', src_imag)
17:54:33.264828 line        66                     """
New var:....... book_inof_sql = " replace into book_info(id,src_imag,go_sort_hre....com/28553919.html',now())\n                    "
17:54:33.266827 line        68                 self.sql_cursor.query(book_inof_sql)
17:54:33.274835 line        70                 print('获取详情地址完成！！')
17:54:33.275822 line        50             for n,li in enumerate(bigimge_li_list):
Modified var:.. n = 1
Modified var:.. li = <Element li at 0x1c18a804db8>
17:54:33.276819 line        52                 href = ''.join(li.xpath('./p[@class="name"]/a/@href'))
Modified var:.. href = 'http://product.dangdang.com/26514708.html'
17:54:33.280817 line        54                 printDarkBlue(f'{input_key}书本详情链接=====》：{href}\n',FOREGROUND_GREEN)
17:54:33.282815 line        57                 if len(li.xpath('./a/img/@data-original')) > 0:
17:54:33.283815 line        58                     src_imag = ''.join(li.xpath('./a/img/@data-original'))
Modified var:.. src_imag = 'http://img3m8.ddimg.cn/33/27/26514708-1_b_2.jpg'
17:54:33.284815 line        66                     """
Modified var:.. book_inof_sql = " replace into book_info(id,src_imag,go_sort_hre....com/26514708.html',now())\n                    "
17:54:33.286829 line        68                 self.sql_cursor.query(book_inof_sql)
17:54:33.295808 line        70                 print('获取详情地址完成！！')
17:54:33.296825 line        50             for n,li in enumerate(bigimge_li_list):
17:54:33.297822 return      50             for n,li in enumerate(bigimge_li_list):
Return value:.. None
Elapsed time: 00:00:12.498344
Starting var:.. sefl = <app.get_detail_html.DdwBooksDetail object at 0x000001C18A7679C8>
Starting var:.. args = ()
Starting var:.. kwargs = {}
17:54:33.302819 call        25     def get_field(sefl,*args,**kwargs):
17:54:33.306802 line        28         href_sql = """ select id,href,src_imag from book_info"""
New var:....... href_sql = ' select id,href,src_imag from book_info'
17:54:33.307801 line        29         hrefs = sefl.sql_cursor.query(href_sql)
New var:....... hrefs = (('413d8fa512ba11eb805b507b9d245e55', 'http://pr...http://img3m1.ddimg.cn/36/1/20246031-1_b_5.jpg'))
17:54:33.312798 line        30         print(hrefs)
17:54:33.314800 line        31         for link in hrefs:
New var:....... link = ('413d8fa512ba11eb805b507b9d245e55', 'http://pro...http://img3m9.ddimg.cn/42/20/28553919-1_b_9.jpg')
17:54:33.315812 line        33             print('')
17:54:33.317795 line        34             printDarkBlue(f"开始读取详情数据，加载缓存。。。。。\n",FOREGROUND_BLUE)
17:54:33.318795 line        35             url = f'{link[1]}'
New var:....... url = 'http://product.dangdang.com/28553919.html'
17:54:33.319794 line        36             try:
17:54:33.321808 line        38                 chrome_opts = webdriver.ChromeOptions()
New var:....... chrome_opts = <selenium.webdriver.chrome.options.Options object at 0x000001C18A6D8A88>
17:54:33.322807 line        39                 chrome_opts.add_argument("--headless")
17:54:33.324791 line        41                 browser = webdriver.Chrome(options=chrome_opts)
New var:....... browser = <selenium.webdriver.chrome.webdriver.WebDriver (session="abe2f7b3159549bf361e4f4386f4fe02")>
17:54:36.958125 line        43                 browser.get(url)
17:54:55.258162 line        44                 out_html = browser.page_source
New var:....... out_html = '<html><head><script async="" src="http://nt-dow...amp;random_id=0.5528082440725013"></body></html>'
17:54:55.293142 line        46                 tree = html.fromstring(out_html)
New var:....... tree = <Element html at 0x1c18a7f8408>
17:54:55.313119 line        51                 product_title_xpath = tree.xpath('//*[@id="product_info"]/div/h1/text()')
New var:....... product_title_xpath = ['\n                    ', '\n                                        大侦探福尔摩斯1-40册（合辑）    ']
17:54:55.321111 line        52                 product_title = ''.join(product_title_xpath).strip()
New var:....... product_title = '大侦探福尔摩斯1-40册（合辑）'
17:54:55.325109 line        53                 print('书本名称：',product_title)
17:54:55.329108 line        59                 product_author_xpath = tree.xpath('//*[@id="product_info"]/div/span[@dd_name="作者"]/a//text()')
New var:....... product_author_xpath = ['柯南．道尔', '厉河']
17:54:55.338101 line        61                 if product_author_xpath:
17:54:55.342101 line        62                         product_author = ' '.join(product_author_xpath)
New var:....... product_author = '柯南．道尔 厉河'
17:54:55.345100 line        63                         print('作者：',product_author)
17:54:55.352094 line        68                 publishing_company_name_xpath = tree.xpath('//*[@id="product_info"]/div/span[@dd_name="出版社"]/a//text()')
New var:....... publishing_company_name_xpath = ['湖北教育出版社']
17:54:55.358092 line        69                 if publishing_company_name_xpath:
17:54:55.362088 line        70                     publishing_company_name = ''.join(publishing_company_name_xpath)
New var:....... publishing_company_name = '湖北教育出版社'
17:54:55.370086 line        71                     print('出版社：',publishing_company_name)
17:54:55.376081 line        76                 publish_date_xpath = tree.xpath('//*[@id="product_info"]/div/span//text()')
New var:....... publish_date_xpath = ['作者:原著：', '柯南．道尔', '， 作者：[中国香港] ', '厉河', '出版社:', '湖北教育出版社', '出版时间:2020年06月\xa0']
17:54:55.387073 line        78                 if publish_date_xpath:
17:54:55.391070 line        79                     for pub_list in publish_date_xpath:
New var:....... pub_list = '作者:原著：'
17:54:55.394070 line        80                         if "出版时间" in pub_list:
17:54:55.401067 line        79                     for pub_list in publish_date_xpath:
Modified var:.. pub_list = '柯南．道尔'
17:54:55.405064 line        80                         if "出版时间" in pub_list:
17:54:55.422054 line        79                     for pub_list in publish_date_xpath:
Modified var:.. pub_list = '， 作者：[中国香港] '
17:54:55.424052 line        80                         if "出版时间" in pub_list:
17:54:55.427050 line        79                     for pub_list in publish_date_xpath:
Modified var:.. pub_list = '厉河'
17:54:55.430048 line        80                         if "出版时间" in pub_list:
17:54:55.435046 line        79                     for pub_list in publish_date_xpath:
Modified var:.. pub_list = '出版社:'
17:54:55.438044 line        80                         if "出版时间" in pub_list:
17:54:55.442043 line        79                     for pub_list in publish_date_xpath:
Modified var:.. pub_list = '湖北教育出版社'
17:54:55.445041 line        80                         if "出版时间" in pub_list:
17:54:55.455035 line        79                     for pub_list in publish_date_xpath:
Modified var:.. pub_list = '出版时间:2020年06月\xa0'
17:54:55.459031 line        80                         if "出版时间" in pub_list:
17:54:55.469027 line        81                             publish_date = pub_list.split('出版时间:')[-1].split('\xa0')[0]
New var:....... publish_date = '2020年06月'
17:54:55.474023 line        82                             print('出版时间:',publish_date)
17:54:55.481023 line        79                     for pub_list in publish_date_xpath:
17:54:55.485017 line        87                 price_xpath = tree.xpath('//*[@id="pc-price"]/div/div/p/text()')
New var:....... price_xpath = ['\n                    ', '\n                    ', '\n                ', '703.10']
17:54:55.490015 line        88                 if price_xpath:
17:54:55.494014 line        89                     price = price_xpath[-1]
New var:....... price = '703.10'
17:54:55.496012 line        90                     print('价格：',price)
17:54:55.502007 line        95                 isbn_no_xpath = tree.xpath('//*[@id="detail_all"]/div/ul/li/text()')
New var:....... isbn_no_xpath = ['开 本：32开', '纸 张：胶版纸', '包 装：平装-胶订', '是否套装：是', '国际标准书号ISBN：9787556428991']
17:54:55.507005 line        96                 if isbn_no_xpath:
17:54:55.510003 line        97                     for isbn_no_li in isbn_no_xpath:
New var:....... isbn_no_li = '开 本：32开'
17:54:55.513002 line        98                         if "ISBN" in isbn_no_li:
17:54:55.518998 line        97                     for isbn_no_li in isbn_no_xpath:
Modified var:.. isbn_no_li = '纸 张：胶版纸'
17:54:55.521996 line        98                         if "ISBN" in isbn_no_li:
17:54:55.525994 line        97                     for isbn_no_li in isbn_no_xpath:
Modified var:.. isbn_no_li = '包 装：平装-胶订'
17:54:55.527992 line        98                         if "ISBN" in isbn_no_li:
17:54:55.536989 line        97                     for isbn_no_li in isbn_no_xpath:
Modified var:.. isbn_no_li = '是否套装：是'
17:54:55.541985 line        98                         if "ISBN" in isbn_no_li:
17:54:55.548981 line        97                     for isbn_no_li in isbn_no_xpath:
Modified var:.. isbn_no_li = '国际标准书号ISBN：9787556428991'
17:54:55.552978 line        98                         if "ISBN" in isbn_no_li:
17:54:55.557979 line        99                             isbn_new_no = isbn_no_li.split('国际标准书号ISBN：')[-1]
New var:....... isbn_new_no = '9787556428991'
17:54:55.560974 line       100                             print('ISBN号:',isbn_new_no)
17:54:55.564977 line        97                     for isbn_no_li in isbn_no_xpath:
17:54:55.567971 line       106                 introduce_str = ''.join(tree.xpath('//*[@id="detail"]/div[@id="content"]/div[@class="descrip"]//text()'))
New var:....... introduce_str = '《大侦探福尔摩斯》系列2018年销量突破200万册，连续多次打入香港商务印书馆童书畅销榜、大众...洋溢的来信，校园活动深圳站仅四所小学，竟引发四千余册现场购书狂潮，场面火爆。</p>显示全部信息'
17:54:55.572969 line       108                 pre = re.compile('>(.*)<')
New var:....... pre = re.compile('>(.*)<')
17:54:55.576965 line       109                 retouve_str = ''.join(pre.findall(introduce_str))
New var:....... retouve_str = '《大侦探福尔摩斯》系列2018年销量突破200万册，连续多次打入香港商务印书馆童书畅销榜、大众...各地小朋友数百封热情洋溢的来信，校园活动深圳站仅四所小学，竟引发四千余册现场购书狂潮，场面火爆。'
17:54:55.581963 line       111                 if retouve_str:
17:54:55.586959 line       112                     content_introduce = retouve_str.strip()
New var:....... content_introduce = '《大侦探福尔摩斯》系列2018年销量突破200万册，连续多次打入香港商务印书馆童书畅销榜、大众...各地小朋友数百封热情洋溢的来信，校园活动深圳站仅四所小学，竟引发四千余册现场购书狂潮，场面火爆。'
17:54:55.589957 line       115                 print('内容简介:', content_introduce)
17:54:55.593955 line       121                 author_introduce_str = ''.join(
17:54:55.596954 line       122                     tree.xpath('//*[@id="detail"]/div[@id="authorIntroduction"]/div[@class="descrip"]//text()'))
New var:....... author_introduce_str = '原著：柯南•道尔（1859～1930）\n英国著名侦探小说家，曾学医及开设诊所，同时撰写冒险小...n于2009年着手创作《大侦探福尔摩斯》，至今已出版了四十多集，深受香港小学生欢迎。\n\xa0'
17:54:55.604949 line       124                 retouve_str = ''.join(pre.findall(author_introduce_str))
Modified var:.. retouve_str = ''
17:54:55.608946 line       125                 if retouve_str:
17:54:55.616944 line       128                     author_introduce = author_introduce_str.strip()
New var:....... author_introduce = '原著：柯南•道尔（1859～1930）\n英国著名侦探小说家，曾学医及开设诊所，同时撰写冒险小...罗力》等。\n于2009年着手创作《大侦探福尔摩斯》，至今已出版了四十多集，深受香港小学生欢迎。'
17:54:55.620939 line       129                 print('书名作者简介:', author_introduce)
17:54:55.623938 line       134                 abstract_info_span = tree.xpath('//*[@id="detail"]/div[@id="abstract"]/div[@class="descrip"]//text()')
New var:....... abstract_info_span = ['（1）从经典改编名著《大侦探福尔摩斯》，让孩子轻轻松松爱上阅读，慢慢从图画书过渡到文字阅读。...中传递的价值理念和人性善恶，可以辅助孩子慢慢建立自己的世界观、人生观和价值观。', '\xa0']
17:54:55.628935 line       135                 abstract_info = ''.join(abstract_info_span).strip()
New var:....... abstract_info = '（1）从经典改编名著《大侦探福尔摩斯》，让孩子轻轻松松爱上阅读，慢慢从图画书过渡到文字阅读。家...识！\n（3）故事中传递的价值理念和人性善恶，可以辅助孩子慢慢建立自己的世界观、人生观和价值观。'
17:54:55.637929 line       136                 print('编辑推荐：',abstract_info)
17:54:55.641928 line       138                 abstract_info_pic = ''.join(tree.xpath('//*[@id="detail"]/div[@id="abstract"]/div[@class="descrip"]//*/@src'))
New var:....... abstract_info_pic = ''
17:54:55.661917 line       139                 print('编辑推荐长图：', abstract_info_pic)
17:54:55.672911 line       144                 feature_pic = ''.join(tree.xpath('//*[@id="detail"]/div[@id="feature"]/div[@class="descrip"]//*/@src'))
New var:....... feature_pic = 'http://img55.ddimg.cn/99999990149136495.jpg'
17:54:55.683922 line       145                 if not feature_pic:
17:54:55.689900 line       148                 print('产品特色长图：', feature_pic)
17:54:55.693898 line       153                 attachImage = ''.join(tree.xpath('//*[@id="detail"]/div[@id="attachImage"]/div[@class="descrip"]//*/img/@data-original'))
New var:....... attachImage = 'http://img51.ddimg.cn/99999990149139321.jpg'
17:54:55.704893 line       154                 if not attachImage:
17:54:55.710889 line       158                 print('书摘插画：', attachImage)
17:54:55.720883 line       167                 """
New var:....... tbook_sql = " REPLACE INTO `t_book` \n                      ..._b_9.jpg',now())\n            \n                "
17:54:55.723880 line       169                 sefl.sql_cursor.query(tbook_sql)
17:54:55.737874 line        31         for link in hrefs:
Modified var:.. link = ('4140a4d112ba11eb805b507b9d245e55', 'http://pro...http://img3m8.ddimg.cn/33/27/26514708-1_b_2.jpg')
17:54:55.741870 line        33             print('')
17:54:55.744869 line        34             printDarkBlue(f"开始读取详情数据，加载缓存。。。。。\n",FOREGROUND_BLUE)
17:54:55.750870 line        35             url = f'{link[1]}'
Modified var:.. url = 'http://product.dangdang.com/26514708.html'
17:54:55.752864 line        36             try:
17:54:55.756862 line        38                 chrome_opts = webdriver.ChromeOptions()
Modified var:.. chrome_opts = <selenium.webdriver.chrome.options.Options object at 0x000001C18A80DE08>
17:54:55.759859 line        39                 chrome_opts.add_argument("--headless")
17:54:55.763857 line        41                 browser = webdriver.Chrome(options=chrome_opts)
Modified var:.. browser = <selenium.webdriver.chrome.webdriver.WebDriver (session="a625a884c400b6418bc069d421eb20c1")>
17:54:59.722731 line        43                 browser.get(url)
17:55:25.066763 line        44                 out_html = browser.page_source
Modified var:.. out_html = '<html><head><script async="" src="http://nt-dow...amp;random_id=0.6247399253526025"></body></html>'
17:55:25.097746 line        46                 tree = html.fromstring(out_html)
Modified var:.. tree = <Element html at 0x1c18a80b818>
17:55:25.109723 line        51                 product_title_xpath = tree.xpath('//*[@id="product_info"]/div/h1/text()')
Modified var:.. product_title_xpath = ['\n                    ', '\n                                        大侦探福尔摩斯（第9辑）：火中的青苔    ']
17:55:25.115723 line        52                 product_title = ''.join(product_title_xpath).strip()
Modified var:.. product_title = '大侦探福尔摩斯（第9辑）：火中的青苔'
17:55:25.119718 line        53                 print('书本名称：',product_title)
17:55:25.122719 line        59                 product_author_xpath = tree.xpath('//*[@id="product_info"]/div/span[@dd_name="作者"]/a//text()')
Modified var:.. product_author_xpath = ['厉河', '心喜阅童书']
17:55:25.127727 line        61                 if product_author_xpath:
17:55:25.131726 line        62                         product_author = ' '.join(product_author_xpath)
Modified var:.. product_author = '厉河 心喜阅童书'
17:55:25.134710 line        63                         print('作者：',product_author)
17:55:25.137708 line        68                 publishing_company_name_xpath = tree.xpath('//*[@id="product_info"]/div/span[@dd_name="出版社"]/a//text()')
17:55:25.141706 line        69                 if publishing_company_name_xpath:
17:55:25.144703 line        70                     publishing_company_name = ''.join(publishing_company_name_xpath)
17:55:25.147702 line        71                     print('出版社：',publishing_company_name)
17:55:25.150700 line        76                 publish_date_xpath = tree.xpath('//*[@id="product_info"]/div/span//text()')
Modified var:.. publish_date_xpath = ['作者:', '厉河', ' 著；', '心喜阅童书', ' 出品', '出版社:', '湖北教育出版社', '出版时间:2019年03月\xa0']
17:55:25.155713 line        78                 if publish_date_xpath:
17:55:25.158696 line        79                     for pub_list in publish_date_xpath:
Modified var:.. pub_list = '作者:'
17:55:25.162695 line        80                         if "出版时间" in pub_list:
17:55:25.165691 line        79                     for pub_list in publish_date_xpath:
Modified var:.. pub_list = '厉河'
17:55:25.168692 line        80                         if "出版时间" in pub_list:
17:55:25.171690 line        79                     for pub_list in publish_date_xpath:
Modified var:.. pub_list = ' 著；'
17:55:25.174688 line        80                         if "出版时间" in pub_list:
17:55:25.178684 line        79                     for pub_list in publish_date_xpath:
Modified var:.. pub_list = '心喜阅童书'
17:55:25.181685 line        80                         if "出版时间" in pub_list:
17:55:25.185696 line        79                     for pub_list in publish_date_xpath:
Modified var:.. pub_list = ' 出品'
17:55:25.188681 line        80                         if "出版时间" in pub_list:
17:55:25.191679 line        79                     for pub_list in publish_date_xpath:
Modified var:.. pub_list = '出版社:'
17:55:25.194677 line        80                         if "出版时间" in pub_list:
17:55:25.198675 line        79                     for pub_list in publish_date_xpath:
Modified var:.. pub_list = '湖北教育出版社'
17:55:25.201671 line        80                         if "出版时间" in pub_list:
17:55:25.204685 line        79                     for pub_list in publish_date_xpath:
Modified var:.. pub_list = '出版时间:2019年03月\xa0'
17:55:25.207668 line        80                         if "出版时间" in pub_list:
17:55:25.210668 line        81                             publish_date = pub_list.split('出版时间:')[-1].split('\xa0')[0]
Modified var:.. publish_date = '2019年03月'
17:55:25.214665 line        82                             print('出版时间:',publish_date)
17:55:25.218661 line        79                     for pub_list in publish_date_xpath:
17:55:25.220660 line        87                 price_xpath = tree.xpath('//*[@id="pc-price"]/div/div/p/text()')
Modified var:.. price_xpath = ['\n                    ', '\n                    ', '\n                ', '16.90']
17:55:25.225657 line        88                 if price_xpath:
17:55:25.229658 line        89                     price = price_xpath[-1]
Modified var:.. price = '16.90'
17:55:25.232668 line        90                     print('价格：',price)
17:55:25.235652 line        95                 isbn_no_xpath = tree.xpath('//*[@id="detail_all"]/div/ul/li/text()')
Modified var:.. isbn_no_xpath = ['开 本：32开', '纸 张：胶版纸', '包 装：平装-胶订', '是否套装：否', '国际标准书号ISBN：9787556428991']
17:55:25.240648 line        96                 if isbn_no_xpath:
17:55:25.244648 line        97                     for isbn_no_li in isbn_no_xpath:
Modified var:.. isbn_no_li = '开 本：32开'
17:55:25.247649 line        98                         if "ISBN" in isbn_no_li:
17:55:25.251657 line        97                     for isbn_no_li in isbn_no_xpath:
Modified var:.. isbn_no_li = '纸 张：胶版纸'
17:55:25.253643 line        98                         if "ISBN" in isbn_no_li:
17:55:25.257642 line        97                     for isbn_no_li in isbn_no_xpath:
Modified var:.. isbn_no_li = '包 装：平装-胶订'
17:55:25.260639 line        98                         if "ISBN" in isbn_no_li:
17:55:25.264635 line        97                     for isbn_no_li in isbn_no_xpath:
Modified var:.. isbn_no_li = '是否套装：否'
17:55:25.266633 line        98                         if "ISBN" in isbn_no_li:
17:55:25.270646 line        97                     for isbn_no_li in isbn_no_xpath:
Modified var:.. isbn_no_li = '国际标准书号ISBN：9787556428991'
17:55:25.272645 line        98                         if "ISBN" in isbn_no_li:
17:55:25.276643 line        99                             isbn_new_no = isbn_no_li.split('国际标准书号ISBN：')[-1]
17:55:25.278627 line       100                             print('ISBN号:',isbn_new_no)
17:55:25.282626 line        97                     for isbn_no_li in isbn_no_xpath:
17:55:25.284626 line       106                 introduce_str = ''.join(tree.xpath('//*[@id="detail"]/div[@id="content"]/div[@class="descrip"]//text()'))
Modified var:.. introduce_str = '《火中的青苔》：福尔摩斯与华生偶遇警方围捕行动，绑匪携人质躲藏在一间小屋内，警方为保护人质性命...，角色瞬间清晰；逻辑推理分析解密，每个细节都暗藏玄机；惊险故事不乏温情，在震撼中收获前进的动力。'
17:55:25.289635 line       108                 pre = re.compile('>(.*)<')
17:55:25.292621 line       109                 retouve_str = ''.join(pre.findall(introduce_str))
17:55:25.296619 line       111                 if retouve_str:
17:55:25.299615 line       114                     content_introduce = introduce_str.strip()
Modified var:.. content_introduce = '《火中的青苔》：福尔摩斯与华生偶遇警方围捕行动，绑匪携人质躲藏在一间小屋内，警方为保护人质性命...，角色瞬间清晰；逻辑推理分析解密，每个细节都暗藏玄机；惊险故事不乏温情，在震撼中收获前进的动力。'
17:55:25.301613 line       115                 print('内容简介:', content_introduce)
17:55:25.305611 line       121                 author_introduce_str = ''.join(
17:55:25.308610 line       122                     tree.xpath('//*[@id="detail"]/div[@id="authorIntroduction"]/div[@class="descrip"]//text()'))
Modified var:.. author_introduce_str = ' 作者：[中国香港] 厉河\n\n日本法政大学文学学士、纽约大学电影研究硕士，从事电影、电视编...小学生最爱书籍”奖及“小学组教师推荐好读”奖，《美味的杀意》获香港出版双年奖颁发“出版奖”。\n'
17:55:25.313607 line       124                 retouve_str = ''.join(pre.findall(author_introduce_str))
17:55:25.316605 line       125                 if retouve_str:
17:55:25.319606 line       128                     author_introduce = author_introduce_str.strip()
Modified var:.. author_introduce = '作者：[中国香港] 厉河\n\n日本法政大学文学学士、纽约大学电影研究硕士，从事电影、电视编剧...颁“小学生最爱书籍”奖及“小学组教师推荐好读”奖，《美味的杀意》获香港出版双年奖颁发“出版奖”。'
17:55:25.322617 line       129                 print('书名作者简介:', author_introduce)
17:55:25.325615 line       134                 abstract_info_span = tree.xpath('//*[@id="detail"]/div[@id="abstract"]/div[@class="descrip"]//text()')
Modified var:.. abstract_info_span = ['1.适合小学生阅读的文字表达，提升语文阅读能力。', '\n', '用*易读的篇幅和语言，传...情洋溢的来信，校园活动深圳站仅四所小学，竟引发四千余册现场购书狂潮，场面火爆。', '\xa0']
17:55:25.333598 line       135                 abstract_info = ''.join(abstract_info_span).strip()
Modified var:.. abstract_info = '1.适合小学生阅读的文字表达，提升语文阅读能力。\n用*易读的篇幅和语言，传达经典的原味和精髓...各地小朋友数百封热情洋溢的来信，校园活动深圳站仅四所小学，竟引发四千余册现场购书狂潮，场面火爆。'
17:55:25.337594 line       136                 print('编辑推荐：',abstract_info)
17:55:25.341592 line       138                 abstract_info_pic = ''.join(tree.xpath('//*[@id="detail"]/div[@id="abstract"]/div[@class="descrip"]//*/@src'))
17:55:25.346589 line       139                 print('编辑推荐长图：', abstract_info_pic)
17:55:25.351586 line       144                 feature_pic = ''.join(tree.xpath('//*[@id="detail"]/div[@id="feature"]/div[@class="descrip"]//*/@src'))
Modified var:.. feature_pic = 'http://img56.ddimg.cn/99999990003971116.jpg'
17:55:25.356597 line       145                 if not feature_pic:
17:55:25.360581 line       148                 print('产品特色长图：', feature_pic)
17:55:25.366580 line       153                 attachImage = ''.join(tree.xpath('//*[@id="detail"]/div[@id="attachImage"]/div[@class="descrip"]//*/img/@data-original'))
Modified var:.. attachImage = 'http://img54.ddimg.cn/99999990003971004.jpg'
17:55:25.370578 line       154                 if not attachImage:
17:55:25.375572 line       158                 print('书摘插画：', attachImage)
17:55:25.380570 line       167                 """
Modified var:.. tbook_sql = " REPLACE INTO `t_book` \n                      ..._b_2.jpg',now())\n            \n                "
17:55:25.385566 line       169                 sefl.sql_cursor.query(tbook_sql)
17:55:25.397560 line        31         for link in hrefs:
Modified var:.. link = ('ff8d2fef12b911eb805b507b9d245e55', 'http://pro...http://img3m1.ddimg.cn/77/11/25225871-1_b_3.jpg')
17:55:25.405556 line        33             print('')
17:55:25.411551 line        34             printDarkBlue(f"开始读取详情数据，加载缓存。。。。。\n",FOREGROUND_BLUE)
17:55:25.417547 line        35             url = f'{link[1]}'
Modified var:.. url = 'http://product.dangdang.com/25225871.html'
17:55:25.423545 line        36             try:
17:55:25.427542 line        38                 chrome_opts = webdriver.ChromeOptions()
Modified var:.. chrome_opts = <selenium.webdriver.chrome.options.Options object at 0x000001C18A80D348>
17:55:25.432540 line        39                 chrome_opts.add_argument("--headless")
17:55:25.437536 line        41                 browser = webdriver.Chrome(options=chrome_opts)
Modified var:.. browser = <selenium.webdriver.chrome.webdriver.WebDriver (session="a39a602b4813a576e8dfc216c36aa941")>
17:55:29.220333 line        43                 browser.get(url)
17:55:58.306243 line        44                 out_html = browser.page_source
Modified var:.. out_html = '<html><head><script async="" src="http://nt-dow...amp;random_id=0.9321008090451679"></body></html>'
17:55:58.361212 line        46                 tree = html.fromstring(out_html)
Modified var:.. tree = <Element html at 0x1c18a82fd68>
17:55:58.383200 line        51                 product_title_xpath = tree.xpath('//*[@id="product_info"]/div/h1/text()')
Modified var:.. product_title_xpath = ['\n                    ', '\n                                        信谊绘本：3-6岁中国传统文化绘本·团圆    ']
17:55:58.391195 line        52                 product_title = ''.join(product_title_xpath).strip()
Modified var:.. product_title = '信谊绘本：3-6岁中国传统文化绘本·团圆'
17:55:58.401190 line        53                 print('书本名称：',product_title)
17:55:58.408185 line        59                 product_author_xpath = tree.xpath('//*[@id="product_info"]/div/span[@dd_name="作者"]/a//text()')
Modified var:.. product_author_xpath = ['余丽琼', '朱成梁']
17:55:58.419181 line        61                 if product_author_xpath:
17:55:58.425176 line        62                         product_author = ' '.join(product_author_xpath)
Modified var:.. product_author = '余丽琼 朱成梁'
17:55:58.432171 line        63                         print('作者：',product_author)
17:55:58.439169 line        68                 publishing_company_name_xpath = tree.xpath('//*[@id="product_info"]/div/span[@dd_name="出版社"]/a//text()')
Modified var:.. publishing_company_name_xpath = ['明天出版社']
17:55:58.451167 line        69                 if publishing_company_name_xpath:
17:55:58.455158 line        70                     publishing_company_name = ''.join(publishing_company_name_xpath)
Modified var:.. publishing_company_name = '明天出版社'
17:55:58.460155 line        71                     print('出版社：',publishing_company_name)
17:55:58.470150 line        76                 publish_date_xpath = tree.xpath('//*[@id="product_info"]/div/span//text()')
Modified var:.. publish_date_xpath = ['作者:作者:', '余丽琼', '\u3000文，', '朱成梁', '\u3000绘', '出版社:', '明天出版社', '出版时间:2008年04月\xa0']
17:55:58.488139 line        78                 if publish_date_xpath:
17:55:58.499134 line        79                     for pub_list in publish_date_xpath:
Modified var:.. pub_list = '作者:作者:'
17:55:58.505130 line        80                         if "出版时间" in pub_list:
17:55:58.513125 line        79                     for pub_list in publish_date_xpath:
Modified var:.. pub_list = '余丽琼'
17:55:58.517125 line        80                         if "出版时间" in pub_list:
17:55:58.523121 line        79                     for pub_list in publish_date_xpath:
Modified var:.. pub_list = '\u3000文，'
17:55:58.531115 line        80                         if "出版时间" in pub_list:
17:55:58.536112 line        79                     for pub_list in publish_date_xpath:
Modified var:.. pub_list = '朱成梁'
17:55:58.541112 line        80                         if "出版时间" in pub_list:
17:55:58.548107 line        79                     for pub_list in publish_date_xpath:
Modified var:.. pub_list = '\u3000绘'
17:55:58.552106 line        80                         if "出版时间" in pub_list:
17:55:58.568181 line        79                     for pub_list in publish_date_xpath:
Modified var:.. pub_list = '出版社:'
17:55:58.581173 line        80                         if "出版时间" in pub_list:
17:55:58.588166 line        79                     for pub_list in publish_date_xpath:
Modified var:.. pub_list = '明天出版社'
17:55:58.601157 line        80                         if "出版时间" in pub_list:
17:55:58.607156 line        79                     for pub_list in publish_date_xpath:
Modified var:.. pub_list = '出版时间:2008年04月\xa0'
17:55:58.618151 line        80                         if "出版时间" in pub_list:
17:55:58.631140 line        81                             publish_date = pub_list.split('出版时间:')[-1].split('\xa0')[0]
Modified var:.. publish_date = '2008年04月'
17:55:58.636144 line        82                             print('出版时间:',publish_date)
17:55:58.648131 line        79                     for pub_list in publish_date_xpath:
17:55:58.654128 line        87                 price_xpath = tree.xpath('//*[@id="pc-price"]/div/div/p/text()')
Modified var:.. price_xpath = ['\n                    ', '\n                    ', '\n                ', '39.80']
17:55:58.673116 line        88                 if price_xpath:
17:55:58.682111 line        89                     price = price_xpath[-1]
Modified var:.. price = '39.80'
17:55:58.691108 line        90                     print('价格：',price)
17:55:58.702141 line        95                 isbn_no_xpath = tree.xpath('//*[@id="detail_all"]/div/ul/li/text()')
Modified var:.. isbn_no_xpath = ['开 本：16开', '纸 张：铜版纸', '包 装：精装', '是否套装：否', '国际标准书号ISBN：9787533255879']
17:55:58.717168 line        96                 if isbn_no_xpath:
17:55:58.732211 line        97                     for isbn_no_li in isbn_no_xpath:
Modified var:.. isbn_no_li = '开 本：16开'
17:55:58.737207 line        98                         if "ISBN" in isbn_no_li:
17:55:58.747201 line        97                     for isbn_no_li in isbn_no_xpath:
Modified var:.. isbn_no_li = '纸 张：铜版纸'
17:55:58.753200 line        98                         if "ISBN" in isbn_no_li:
17:55:58.758196 line        97                     for isbn_no_li in isbn_no_xpath:
Modified var:.. isbn_no_li = '包 装：精装'
17:55:58.767193 line        98                         if "ISBN" in isbn_no_li:
17:55:58.771188 line        97                     for isbn_no_li in isbn_no_xpath:
Modified var:.. isbn_no_li = '是否套装：否'
17:55:58.780182 line        98                         if "ISBN" in isbn_no_li:
17:55:58.786178 line        97                     for isbn_no_li in isbn_no_xpath:
Modified var:.. isbn_no_li = '国际标准书号ISBN：9787533255879'
17:55:58.790179 line        98                         if "ISBN" in isbn_no_li:
17:55:58.798160 line        99                             isbn_new_no = isbn_no_li.split('国际标准书号ISBN：')[-1]
Modified var:.. isbn_new_no = '9787533255879'
17:55:58.802157 line       100                             print('ISBN号:',isbn_new_no)
17:55:58.806153 line        97                     for isbn_no_li in isbn_no_xpath:
17:55:58.814153 line       106                 introduce_str = ''.join(tree.xpath('//*[@id="detail"]/div[@id="content"]/div[@class="descrip"]//text()'))
Modified var:.. introduce_str = '\xa0 《团圆》——分享爱的温暖和好运。\n毛毛的爸爸是一个建筑师，他每年只能回家一次。除夕...的好运硬币。短短的相聚、沉沉的离别，父亲把一个长长的守望留在了女儿心里！\n\xa0\n\xa0'
17:55:58.821146 line       108                 pre = re.compile('>(.*)<')
17:55:58.825653 line       109                 retouve_str = ''.join(pre.findall(introduce_str))
17:55:58.830652 line       111                 if retouve_str:
17:55:58.834648 line       114                     content_introduce = introduce_str.strip()
Modified var:.. content_introduce = '《团圆》——分享爱的温暖和好运。\n毛毛的爸爸是一个建筑师，他每年只能回家一次。除夕夜，爸爸把...a0\n这是一枚承载着爱的好运硬币。短短的相聚、沉沉的离别，父亲把一个长长的守望留在了女儿心里！'
17:55:58.837646 line       115                 print('内容简介:', content_introduce)
17:55:58.847644 line       121                 author_introduce_str = ''.join(
17:55:58.850641 line       122                     tree.xpath('//*[@id="detail"]/div[@id="authorIntroduction"]/div[@class="descrip"]//text()'))
Modified var:.. author_introduce_str = '文／余丽琼\xa0 \n1980年出生在安徽安庆。南京大学文学学士、戏剧艺术在读硕士，中国散文...。1994年，《争鹿》由台湾信谊基金出版社出版。2006年，出版第一本自编自绘的图画书《火焰》。'
17:55:58.859060 line       124                 retouve_str = ''.join(pre.findall(author_introduce_str))
17:55:58.866057 line       125                 if retouve_str:
17:55:58.870053 line       128                     author_introduce = author_introduce_str.strip()
Modified var:.. author_introduce = '文／余丽琼\xa0 \n1980年出生在安徽安庆。南京大学文学学士、戏剧艺术在读硕士，中国散文...。1994年，《争鹿》由台湾信谊基金出版社出版。2006年，出版第一本自编自绘的图画书《火焰》。'
17:55:58.873059 line       129                 print('书名作者简介:', author_introduce)
17:55:58.881055 line       134                 abstract_info_span = tree.xpath('//*[@id="detail"]/div[@id="abstract"]/div[@class="descrip"]//text()')
Modified var:.. abstract_info_span = ['\n', '本书入选教育部基础教育课程教材发展中心 中小学阅读指导目录（2020年版）', ...时报》年度*儿童图画书', '\n', '\xa0', '\n', '\xa0', '\xa0']
17:55:58.890050 line       135                 abstract_info = ''.join(abstract_info_span).strip()
Modified var:.. abstract_info = '本书入选教育部基础教育课程教材发展中心 中小学阅读指导目录（2020年版）\n一部将民族传统文...。\n\xa0\n【丰子恺儿童画书奖】*儿童图画书首奖\n2011年《纽约时报》年度*儿童图画书'
17:55:58.899044 line       136                 print('编辑推荐：',abstract_info)
17:55:58.903043 line       138                 abstract_info_pic = ''.join(tree.xpath('//*[@id="detail"]/div[@id="abstract"]/div[@class="descrip"]//*/@src'))
Modified var:.. abstract_info_pic = 'http://img54.ddimg.cn/99999990147084224.jpg'
17:55:58.909038 line       139                 print('编辑推荐长图：', abstract_info_pic)
17:55:58.918035 line       144                 feature_pic = ''.join(tree.xpath('//*[@id="detail"]/div[@id="feature"]/div[@class="descrip"]//*/@src'))
Modified var:.. feature_pic = 'http://img55.ddimg.cn/99999990168742015.jpg'
17:55:58.926028 line       145                 if not feature_pic:
17:55:58.937022 line       148                 print('产品特色长图：', feature_pic)
17:55:58.940020 line       153                 attachImage = ''.join(tree.xpath('//*[@id="detail"]/div[@id="attachImage"]/div[@class="descrip"]//*/img/@data-original'))
Modified var:.. attachImage = 'http://img52.ddimg.cn/99999990002501452.jpg'
17:55:58.953014 line       154                 if not attachImage:
17:55:58.958010 line       158                 print('书摘插画：', attachImage)
17:55:58.966006 line       167                 """
Modified var:.. tbook_sql = " REPLACE INTO `t_book` \n                      ..._b_3.jpg',now())\n            \n                "
17:55:58.969004 line       169                 sefl.sql_cursor.query(tbook_sql)
17:55:58.984995 line        31         for link in hrefs:
Modified var:.. link = ('ff91857712b911eb805b507b9d245e55', 'http://pro...'http://img3m1.ddimg.cn/36/1/20246031-1_b_5.jpg')
17:55:58.987995 line        33             print('')
17:55:58.993990 line        34             printDarkBlue(f"开始读取详情数据，加载缓存。。。。。\n",FOREGROUND_BLUE)
17:55:58.998987 line        35             url = f'{link[1]}'
Modified var:.. url = 'http://product.dangdang.com/20246031.html'
17:55:59.002985 line        36             try:
17:55:59.007983 line        38                 chrome_opts = webdriver.ChromeOptions()
Modified var:.. chrome_opts = <selenium.webdriver.chrome.options.Options object at 0x000001C18A816CC8>
17:55:59.013979 line        39                 chrome_opts.add_argument("--headless")
17:55:59.018976 line        41                 browser = webdriver.Chrome(options=chrome_opts)
Modified var:.. browser = <selenium.webdriver.chrome.webdriver.WebDriver (session="bb416fe30605b53adb45a888c28b124a")>
17:56:06.969755 line        43                 browser.get(url)
17:56:21.847879 line        44                 out_html = browser.page_source
Modified var:.. out_html = '<html><head><script async="" src="http://nt-dow...mp;random_id=0.08648630895317044"></body></html>'
17:56:21.874877 line        46                 tree = html.fromstring(out_html)
Modified var:.. tree = <Element html at 0x1c18a82aef8>
17:56:21.887869 line        51                 product_title_xpath = tree.xpath('//*[@id="product_info"]/div/h1/text()')
Modified var:.. product_title_xpath = ['\n                    ', '\n                                        团圆——信谊 原创图画书系列    ']
17:56:21.893853 line        52                 product_title = ''.join(product_title_xpath).strip()
Modified var:.. product_title = '团圆——信谊 原创图画书系列'
17:56:21.896850 line        53                 print('书本名称：',product_title)
17:56:21.900847 line        59                 product_author_xpath = tree.xpath('//*[@id="product_info"]/div/span[@dd_name="作者"]/a//text()')
17:56:21.904859 line        61                 if product_author_xpath:
17:56:21.906859 line        62                         product_author = ' '.join(product_author_xpath)
17:56:21.909845 line        63                         print('作者：',product_author)
17:56:21.911842 line        68                 publishing_company_name_xpath = tree.xpath('//*[@id="product_info"]/div/span[@dd_name="出版社"]/a//text()')
17:56:21.916852 line        69                 if publishing_company_name_xpath:
17:56:21.919841 line        70                     publishing_company_name = ''.join(publishing_company_name_xpath)
17:56:21.921835 line        71                     print('出版社：',publishing_company_name)
17:56:21.924836 line        76                 publish_date_xpath = tree.xpath('//*[@id="product_info"]/div/span//text()')
Modified var:.. publish_date_xpath = ['作者:', '余丽琼', '\u3000文，', '朱成梁', '\u3000绘', '出版社:', '明天出版社', '出版时间:2008年04月\xa0']
17:56:21.929833 line        78                 if publish_date_xpath:
17:56:21.932831 line        79                     for pub_list in publish_date_xpath:
Modified var:.. pub_list = '作者:'
17:56:21.935827 line        80                         if "出版时间" in pub_list:
17:56:21.938826 line        79                     for pub_list in publish_date_xpath:
Modified var:.. pub_list = '余丽琼'
17:56:21.940824 line        80                         if "出版时间" in pub_list:
17:56:21.944837 line        79                     for pub_list in publish_date_xpath:
Modified var:.. pub_list = '\u3000文，'
17:56:21.946821 line        80                         if "出版时间" in pub_list:
17:56:21.950819 line        79                     for pub_list in publish_date_xpath:
Modified var:.. pub_list = '朱成梁'
17:56:21.952817 line        80                         if "出版时间" in pub_list:
17:56:21.955816 line        79                     for pub_list in publish_date_xpath:
Modified var:.. pub_list = '\u3000绘'
17:56:21.958829 line        80                         if "出版时间" in pub_list:
17:56:21.962813 line        79                     for pub_list in publish_date_xpath:
Modified var:.. pub_list = '出版社:'
17:56:21.965813 line        80                         if "出版时间" in pub_list:
17:56:21.968811 line        79                     for pub_list in publish_date_xpath:
Modified var:.. pub_list = '明天出版社'
17:56:21.971809 line        80                         if "出版时间" in pub_list:
17:56:21.974821 line        79                     for pub_list in publish_date_xpath:
Modified var:.. pub_list = '出版时间:2008年04月\xa0'
17:56:21.977819 line        80                         if "出版时间" in pub_list:
17:56:21.980804 line        81                             publish_date = pub_list.split('出版时间:')[-1].split('\xa0')[0]
17:56:21.983802 line        82                             print('出版时间:',publish_date)
17:56:21.985799 line        79                     for pub_list in publish_date_xpath:
17:56:21.988814 line        87                 price_xpath = tree.xpath('//*[@id="pc-price"]/div/div/p/text()')
Modified var:.. price_xpath = ['\n                    ', '\n                    ', '\n                ', '28.43']
17:56:21.992811 line        88                 if price_xpath:
17:56:21.996795 line        89                     price = price_xpath[-1]
Modified var:.. price = '28.43'
17:56:21.998793 line        90                     print('价格：',price)
17:56:22.002790 line        95                 isbn_no_xpath = tree.xpath('//*[@id="detail_all"]/div/ul/li/text()')
Modified var:.. isbn_no_xpath = ['开 本：大16开', '纸 张：铜版纸', '包 装：精装', '是否套装：否', '国际标准书号ISBN：9787533255879', '丛书名：信谊原创图画书系列']
17:56:22.006786 line        96                 if isbn_no_xpath:
17:56:22.010785 line        97                     for isbn_no_li in isbn_no_xpath:
Modified var:.. isbn_no_li = '开 本：大16开'
17:56:22.012783 line        98                         if "ISBN" in isbn_no_li:
17:56:22.016783 line        97                     for isbn_no_li in isbn_no_xpath:
Modified var:.. isbn_no_li = '纸 张：铜版纸'
17:56:22.018780 line        98                         if "ISBN" in isbn_no_li:
17:56:22.022778 line        97                     for isbn_no_li in isbn_no_xpath:
Modified var:.. isbn_no_li = '包 装：精装'
17:56:22.024776 line        98                         if "ISBN" in isbn_no_li:
17:56:22.028790 line        97                     for isbn_no_li in isbn_no_xpath:
Modified var:.. isbn_no_li = '是否套装：否'
17:56:22.030773 line        98                         if "ISBN" in isbn_no_li:
17:56:22.034771 line        97                     for isbn_no_li in isbn_no_xpath:
Modified var:.. isbn_no_li = '国际标准书号ISBN：9787533255879'
17:56:22.036772 line        98                         if "ISBN" in isbn_no_li:
17:56:22.039768 line        99                             isbn_new_no = isbn_no_li.split('国际标准书号ISBN：')[-1]
17:56:22.042766 line       100                             print('ISBN号:',isbn_new_no)
17:56:22.045769 line        97                     for isbn_no_li in isbn_no_xpath:
Modified var:.. isbn_no_li = '丛书名：信谊原创图画书系列'
17:56:22.048762 line        98                         if "ISBN" in isbn_no_li:
17:56:22.051764 line        97                     for isbn_no_li in isbn_no_xpath:
17:56:22.054761 line       106                 introduce_str = ''.join(tree.xpath('//*[@id="detail"]/div[@id="content"]/div[@class="descrip"]//text()'))
Modified var:.. introduce_str = '\u3000为离家很远的缘故，已经习惯了对家乡和父母的遥望，这些遥望常常是伴随着童年的回忆一下...。没想到很多年后，我和父亲换了位置——那个在家守望的人是他，而那个一心想要赶回家过年的人是我……'
17:56:22.058771 line       108                 pre = re.compile('>(.*)<')
17:56:22.062757 line       109                 retouve_str = ''.join(pre.findall(introduce_str))
17:56:22.064756 line       111                 if retouve_str:
17:56:22.067754 line       114                     content_introduce = introduce_str.strip()
Modified var:.. content_introduce = '为离家很远的缘故，已经习惯了对家乡和父母的遥望，这些遥望常常是伴随着童年的回忆一下子涌到我面前...。没想到很多年后，我和父亲换了位置——那个在家守望的人是他，而那个一心想要赶回家过年的人是我……'
17:56:22.069766 line       115                 print('内容简介:', content_introduce)
17:56:22.073764 line       121                 author_introduce_str = ''.join(
17:56:22.075750 line       122                     tree.xpath('//*[@id="detail"]/div[@id="authorIntroduction"]/div[@class="descrip"]//text()'))
Modified var:.. author_introduce_str = '余丽琼，1980年出生在安徽安庆。南京大学文学学士、戏剧艺术在读硕士，中国散文学会会员。现为《东方娃娃》编辑。1996年至今已发表散文、小说十余万字。'
17:56:22.081745 line       124                 retouve_str = ''.join(pre.findall(author_introduce_str))
17:56:22.084757 line       125                 if retouve_str:
17:56:22.087740 line       128                     author_introduce = author_introduce_str.strip()
Modified var:.. author_introduce = '余丽琼，1980年出生在安徽安庆。南京大学文学学士、戏剧艺术在读硕士，中国散文学会会员。现为《东方娃娃》编辑。1996年至今已发表散文、小说十余万字。'
17:56:22.089741 line       129                 print('书名作者简介:', author_introduce)
17:56:22.093740 line       134                 abstract_info_span = tree.xpath('//*[@id="detail"]/div[@id="abstract"]/div[@class="descrip"]//text()')
Modified var:.. abstract_info_span = ['适读人群 ：5-8岁', '\n', '\u3000\u3000团圆 属于你我的节日故事',...供了坚实的展开基础，也给绘者留下了广阔的创意空间。', '\n', '\xa0', '\xa0']
17:56:22.098734 line       135                 abstract_info = ''.join(abstract_info_span).strip()
Modified var:.. abstract_info = '适读人群 ：5-8岁\n\u3000\u3000团圆 属于你我的节日故事\u3000\u300...情感表达酽而不烈，结构安排疏而不漏，既為绘画提供了坚实的展开基础，也给绘者留下了广阔的创意空间。'
17:56:22.102733 line       136                 print('编辑推荐：',abstract_info)
17:56:22.107744 line       138                 abstract_info_pic = ''.join(tree.xpath('//*[@id="detail"]/div[@id="abstract"]/div[@class="descrip"]//*/@src'))
Modified var:.. abstract_info_pic = ''
17:56:22.112740 line       139                 print('编辑推荐长图：', abstract_info_pic)
17:56:22.115739 line       144                 feature_pic = ''.join(tree.xpath('//*[@id="detail"]/div[@id="feature"]/div[@class="descrip"]//*/@src'))
Modified var:.. feature_pic = ''
17:56:22.119723 line       145                 if not feature_pic:
17:56:22.123735 line       146                     feature_pic = ''.join(
17:56:22.127735 line       147                         tree.xpath('//*[@id="detail"]/div[@id="feature"]/div[@class="descrip"]//*/@data-original'))
17:56:22.131730 line       148                 print('产品特色长图：', feature_pic)
17:56:22.134714 line       153                 attachImage = ''.join(tree.xpath('//*[@id="detail"]/div[@id="attachImage"]/div[@class="descrip"]//*/img/@data-original'))
Modified var:.. attachImage = 'http://img57.ddimg.cn/99999990001989737.jpg'
17:56:22.138711 line       154                 if not attachImage:
17:56:22.141709 line       158                 print('书摘插画：', attachImage)
17:56:22.144723 line       167                 """
Modified var:.. tbook_sql = " REPLACE INTO `t_book` \n                      ..._b_5.jpg',now())\n            \n                "
17:56:22.147706 line       169                 sefl.sql_cursor.query(tbook_sql)
17:56:22.159702 line        31         for link in hrefs:
17:56:22.162713 line       172         print('详情数据已加载到数据库。。。')
17:56:22.165698 line       173         flag =True
New var:....... flag = True
17:56:22.167710 line       174         return flag
17:56:22.170693 return     174         return flag
Return value:.. True
Elapsed time: 00:01:48.871879
Starting var:.. self = <app.get_key_html.DdwBooks object at 0x000001C18A767608>
Starting var:.. args = ()
Starting var:.. kwargs = {}
17:56:22.174698 call        24     def get_ddw_key(self,*args,**kwargs):
17:56:22.179690 line        25         input_key = input("请输入查询的商品：")
18:23:25.036098 exception   25         input_key = input("请输入查询的商品：")
Exception:..... EOFError: EOF when reading a line
Call ended by exception
Elapsed time: 00:27:02.865395
